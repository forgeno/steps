(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{396:function(e,t,a){e.exports=a(894)},401:function(e,t,a){},403:function(e,t,a){},443:function(e,t){},445:function(e,t){},476:function(e,t){},477:function(e,t){},525:function(e,t){},527:function(e,t){},548:function(e,t){},894:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(37),l=a.n(i),o=(a(401),a(3)),r=a(4),c=a(7),m=a(5),u=a(6),d=a(904),h=a(903),p=(a(403),a(10)),g=a.n(p),f=a(228),b=a.n(f),v=g.a.createActions(["loadAllSidewalks","display","setDrawerOpened"]),y=a(77),w={url:"https://js.arcgis.com/4.9"},I=-113.499,S=53.5405,E=a(229),C=a.n(E),k=3145728,O=function(e){return"".concat("http://199.116.235.159:8000","/api/").concat(e,"/")},j=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"sendPostRequest",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({uri:O(e),headers:{"Content-Type":"application/json"},json:!0,method:"POST",body:t},a);return C.a.post(n)}},{key:"sendGetRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({uri:O(e),json:!0,qs:t},a);return C.a.get(n)}}]),e}(),_=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={sidewalks:[],sidewalkSelected:!1,longitude:I,latitude:S},e.listenables=v,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"onLoadAllSidewalks",value:function(){var e=this;j.sendGetRequest("sidewalk").then(function(t){e.setState({sidewalks:t})}).catch(function(e){console.error(e)})}},{key:"onSetDrawerOpened",value:function(e){this.setState({sidewalkSelected:e})}},{key:"onDisplay",value:function(e,t,a,n,s,i,l,o,r,c,m,u){var d=this,h=new e({basemap:"dark-gray-vector"}),p=new a({url:"https://services9.arcgis.com/8ccGcFm2KpUhl0DB/arcgis/rest/services/edm_network_walkability/FeatureServer",renderer:{type:"unique-value",field:"Rating",defaultSymbol:{type:"simple-fill"},uniqueValueInfos:[{value:5,symbol:{type:"simple-line",width:3,color:"#00A300",style:"solid"}},{value:4,symbol:{type:"simple-line",width:3,color:"#00A392",style:"solid"}},{value:3,symbol:{type:"simple-line",width:3,color:"#FF7A00",style:"solid"}},{value:2,symbol:{type:"simple-line",width:3,color:"#FFDF00",style:"solid"}},{value:1,symbol:{type:"simple-line",width:3,color:"#FF0000",style:"solid"}},{value:"",symbol:{type:"simple-line",width:3,color:"#D2D3D1",style:"solid"}}],highlightOptions:{color:[255,241,58],fillOpacity:.4}}}),g=new t({map:h,container:"mapContainer",center:[this.state.longitude,this.state.latitude],zoom:15});g.when(function(){console.log(h.layers);var e=new u({view:g,layerInfos:[{layer:p,title:"Sidewalk Ratings"}]});g.ui.add(e,"bottom-left")});h.add(p),g.on("click",function(e){var t=g.extent.width/g.width;p.popupEnabled=!1,g.popup.dockEnabled=!0,g.popup.visible=!1,g.popup.dockOptions={buttonEnabled:!1},p.popupTemplate={title:"Street ID: {osm_id}",content:"Average Rating: {Rating}"};var a=new s({center:e.mapPoint,radius:5*t}),n=p.createQuery();n.geometry=a,p.queryFeatures(n).then(function(t){if(0!==t.features.length){var a=t.features,n=parseInt(a[0].attributes.osm_id),s=(parseInt(a[0].attributes.Rating),d.state.sidewalks.find(function(e){return e.id===n}));if(!s)return void console.error("No sidewalk with a matching ID was found");g.goTo({center:[e.mapPoint.longitude,e.mapPoint.latitude],animate:!0,duration:200,easing:"easy-in"}),d.setState({longitude:e.mapPoint.longitude,latitude:e.mapPoint.latitude,sidewalkSelected:!0,selectedSidewalkDetails:s})}})}),this.setState({map:h,view:g})}}]),t}(g.a.Store),D=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).store=_,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){Promise.all([b.a.loadModules(["esri/Map","esri/views/MapView"],w),b.a.loadModules(["esri/layers/FeatureLayer","esri/PopupTemplate","esri/geometry/Circle","esri/Graphic","esri/core/watchUtils","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/layers/support/MapImage","esri/widgets/Legend","esri/widgets/Search"],w)]).then(function(e){v.display(e[0][0],e[0][1],e[1][0],e[1][1],e[1][2],e[1][3],e[1][4],e[1][5],e[1][6],e[1][7],e[1][8],e[1][9],e[1][10])})}},{key:"render",value:function(){return s.a.createElement("div",{id:"mapContainer"})}}]),t}(p.Component),N=g.a.createActions(["uploadSidewalkImage","loadUploadedImages","loadSidewalkDetails","uploadComment","dismissImageErrorMessage","dismissImageSuccessMessage","uploadRatings","removeLoadedComment","removeLoadedImage"]),x=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state=e._getDefaultSidewalkState(),e.listenables=N,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"_getDefaultSidewalkState",value:function(){return{loadedUserImages:[],hasNextImagesPage:!0,currentSidewalk:null,uploadingSidewalkImage:!1,uploadedImageError:!1,uploadingComment:!1,uploadCommentFailed:!1,uploadImageSucceeded:!1}}},{key:"onLoadSidewalkDetails",value:function(e){var t=this;this.setState(this._getDefaultSidewalkState()),j.sendGetRequest("sidewalk/".concat(e.id)).then(function(a){var n=Object.assign({},e,a);t.setState({currentSidewalk:n,hasNextImagesPage:n.lastImage,loadedUserImages:[n.lastImage],accessibilityValue:n.accessibility})}).catch(function(e){console.error(e)})}},{key:"onUploadSidewalkImage",value:function(e){var t=this;this.setState({uploadingSidewalkImage:!0,uploadedImageError:!1,uploadImageSucceeded:!1}),j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/image/create"),{image:e}).then(function(){t.setState({uploadingSidewalkImage:!1,uploadImageSucceeded:!0})}).catch(function(e){t.setState({uploadingSidewalkImage:!1,uploadedImageError:!0}),console.error(e)})}},{key:"onLoadUploadedImages",value:function(e,t,a){var n=this;j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/image"),{startIndex:e,endIndex:t}).then(function(e){return n.setState({hasNextImagesPage:e.hasMoreImages,loadedUserImages:n.state.loadedUserImages.slice(0).concat(e.images)}),a()}).catch(function(e){console.error(e)})}},{key:"onUploadComment",value:function(e){var t=this;this.setState({uploadingComment:!0}),j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/comment/create"),{text:e}).then(function(e){var a=t.state.currentSidewalk.comments.slice();a.unshift(e),t.setState({uploadingComment:!1,uploadCommentFailed:!1,commentHint:"Comment Successfully Uploaded!",currentSidewalk:Object.assign(t.state.currentSidewalk,{comments:a})})}).catch(function(e){t.setState({uploadingComment:!1,uploadCommentFailed:!0}),console.error(e)})}},{key:"onDismissImageErrorMessage",value:function(){this.setState({uploadedImageError:!1})}},{key:"onDismissImageSuccessMessage",value:function(){this.setState({uploadImageSucceeded:!1})}},{key:"onUploadRatings",value:function(e,t,a,n,s){var i=this;j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/rate"),{accessibility:parseFloat(e),comfort:parseFloat(t),connectivity:parseFloat(a),senseOfSecurity:parseFloat(s),physicalSafety:parseFloat(n)}).then(function(e){i.setState({accessibility:3,comfort:3,connectivity:3,physicalSafety:3,senseOfSecurity:3})}).catch(function(e){console.error(e)})}},{key:"onRemoveLoadedComment",value:function(e){var t=this.state.currentSidewalk.comments.slice(),a=t.indexOf(e);if(-1!==a){var n=this.state.currentSidewalk.totalComments-1;t.splice(a,1),this.setState({currentSidewalk:Object.assign(this.state.currentSidewalk,{comments:t,totalComments:n})})}}},{key:"onRemoveLoadedImage",value:function(e,t,a){var n=this.state.loadedUserImages.indexOf(e);if(-1!==n){var s=this.state.currentSidewalk.totalImages-1,i=this.state.loadedUserImages.slice(),l={totalImages:s};if(i.splice(n,1),this.state.currentSidewalk.lastImage===e&&(l.lastImage=i[0]||null),this.setState({currentSidewalk:Object.assign(this.state.currentSidewalk,l),loadedUserImages:i}),n===i.length&&n>0&&t(n),0===i.length)return a()}}}]),t}(g.a.Store),R=a(906),P=a(901),L=a(905),M=a(150),U=a.n(M),A=a(58),F=a.n(A),T=["January","February","March","April","May","June","July","August","September","October","November","December"],B=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"formatDateForDisplay",value:function(e){return T[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()+" - "+function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}(e)}}]),e}(),V=g.a.createActions(["deleteComment","dismissCommentSuccessMessage","dismissCommentErrorMessage","checkCredentials","deleteImage","dismissImageSuccessMessage","dismissImageErrorMessage","dismissLoginSuccess","dismissLoginError","getUnapprovedImages","handlePendingImages"]),z=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={isLoggedIn:!1,isDeletingComment:!1,successfullyDeletedComment:!1,failedDeleteComment:!1,username:"",password:"",credentialError:!1},e.listenables=V,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"onDeleteComment",value:function(e,t,a){var n=this;this.setState({isDeletingComment:!0,successfullyDeletedComment:!1,failedDeleteComment:!1}),j.sendPostRequest("sidewalk/".concat(e,"/comment/delete"),{id:t,username:this.state.username,password:this.state.password}).then(function(){n.setState({isDeletingComment:!1,successfullyDeletedComment:!0}),a(!0)}).catch(function(e){n.setState({isDeletingComment:!1,failedDeleteComment:!0}),a(!1),console.error(e)})}},{key:"onDismissCommentSuccessMessage",value:function(){this.setState({successfullyDeletedComment:!1})}},{key:"onDismissCommentErrorMessage",value:function(){this.setState({failedDeleteComment:!1})}},{key:"onCheckCredentials",value:function(e,t){var a=this;j.sendPostRequest("adminAccount/login",{username:e,password:t}).then(function(e){a.setState({isLoggedIn:!0,successfullyLoggedIn:!0,username:"stepsAdmin",password:"716481e86d31433e772f52de60b915c4"})}).catch(function(e){a.setState({isLoggedIn:!1,failedToLogIn:!0}),console.error(e)})}},{key:"onCheckUserLogin",value:function(){this.state.LoggedIn}},{key:"onDeleteImage",value:function(e,t,a){var n=this;this.setState({isDeletingImage:!0,successfullyDeletedImage:!1,failedDeleteImage:!1}),j.sendPostRequest("sidewalk/".concat(e,"/image/delete"),{imageId:t,username:this.state.username,password:this.state.password}).then(function(){return n.setState({isDeletingImage:!1,successfullyDeletedImage:!0}),a(!0)}).catch(function(e){return n.setState({isDeletingImage:!1,failedDeleteImage:!0}),console.error(e),a(!1)})}},{key:"onDismissImageSuccessMessage",value:function(){this.setState({successfullyDeletedImage:!1})}},{key:"onDismissImageErrorMessage",value:function(){this.setState({failedDeleteImage:!1})}},{key:"onDismissLoginSuccess",value:function(){this.setState({successfullyLoggedIn:!1})}},{key:"onDismissLoginError",value:function(){this.setState({failedToLogIn:!1})}},{key:"onHandlePendingImages",value:function(e,t){var a=this;j.sendPostRequest("sidewalk/2/image/respond",{username:this.state.username,password:this.state.password,accepted:e,imageId:String(t)}).then(function(e){a.onGetUnapprovedImages(0,5)}).catch(function(e){console.error(e)})}},{key:"onGetUnapprovedImages",value:function(){var e=this;j.sendPostRequest("sidewalk/unapprovedImages",{username:this.state.username,password:this.state.password,startIndex:0,endIndex:5}).then(function(t){e.setState({hasMoreImages:t.hasMoreImages,pendingImages:t.images})}).catch(function(e){console.error(e)})}}]),t}(g.a.Store),q=(g.a.Component,a(370)),W=a.n(q),H=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(W.a,null)}}]),t}(s.a.Component),G=a(900),K=a(99),Y=a.n(K),J=a(45),$=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._cancel=function(){a.props.onCancel()},a._confirm=function(){a.props.onConfirm()},a.state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(Y.a,{open:this.props.visible,onClose:this._cancel},s.a.createElement("div",{className:e.paper},s.a.createElement(G.a.Header,null,s.a.createElement(G.a.Title,null,this.props.title)),s.a.createElement("div",{className:"marginUpDown15"},this.props.body),s.a.createElement(G.a.Footer,null,s.a.createElement(L.a,{onClick:this._cancel},"Cancel"),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._confirm,disabled:this.props.disabledConfirm},"Confirm"))))}}]),t}(s.a.Component),Q=Object(J.withStyles)(function(e){return{paper:{width:"50%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,margin:"auto",position:"relative",top:"50%",transform:"translateY(-50%)"}}})($),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._cancel=function(){a.props.onClose()},a._confirm=function(){V.deleteComment(a.props.sidewalkId,a.props.comment.id,function(e){e&&a.props.onClose(!0)})},a.store=z,a.state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"renderModalBody",value:function(){return this.props.visible?s.a.createElement("div",null,s.a.createElement("p",{className:"wrapText"},this.props.comment.text),this.state.isDeletingComment&&s.a.createElement(H,null)):null}},{key:"render",value:function(){return s.a.createElement(Q,{title:"Are you sure you want to delete this comment?",body:this.renderModalBody(),onCancel:this._cancel,onConfirm:this._confirm,visible:this.props.visible,disabledConfirm:this.state.isDeletingComment})}}]),t}(g.a.Component),Z=a(374),ee=a.n(Z),te=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleChange=function(t){e.setState({enteredComment:t.target.value})},e._handleSubmit=function(t){N.uploadComment(e.state.enteredComment),e.setState({enteredComment:"",commentHint:"Comment Successfully Updated!"})},e._openConfirmationModal=function(t){e.setState({modalOpened:!0,selectedComment:t})},e._closeConfirmationModal=function(t){t&&N.removeLoadedComment(e.state.selectedComment),e.setState({modalOpened:!1,selectedComment:null})},e.store=x,e.state={enteredComment:"",commentHint:"Enter your comment here!",modalOpened:!1},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"_validateCommentState",value:function(){var e=new(a(759))({replaceRegex:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im});e.addWords("@","587","780");var t=this.state.enteredComment.length;return e.isProfane(this.state.enteredComment)?"error":0===t?"error":t<=300?"success":"error"}},{key:"render",value:function(){if(!this.state.currentSidewalk)return null;var e=this.state.currentSidewalk.comments;return s.a.createElement("div",null,s.a.createElement("div",{className:"commentUploadSection"},s.a.createElement("div",{className:"commentBox"},s.a.createElement("form",null,s.a.createElement(R.a,{bsSize:"small",controlId:"formBasicText",validationState:this._validateCommentState()},s.a.createElement(P.a,{type:"textarea",value:this.state.enteredComment,placeholder:this.state.commentHint,onChange:this._handleChange}),s.a.createElement(P.a.Feedback,null)))),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._handleSubmit,disabled:"error"===this._validateCommentState()},"Submit")),s.a.createElement("br",null),s.a.createElement("div",{className:"commentDisplaySection"},s.a.createElement(ee.a,{className:"displayList"},e.map(function(e,t){return s.a.createElement("div",{className:"commentDisplayBox",key:t},s.a.createElement("h5",null,e.text),s.a.createElement("h6",null,B.formatDateForDisplay(new Date(e.date))))}))),s.a.createElement(X,{comment:this.state.selectedComment,sidewalkId:this.state.currentSidewalk.id,onClose:this._closeConfirmationModal,visible:this.state.modalOpened}))}}]),t}(g.a.Component),ae=a(897),ne=function(e){return new Promise(function(t,a){var n=new FileReader;n.onerror=function(e){n.abort(),a(e)},n.onload=function(){t(this.result)},n.readAsDataURL(e)})},se=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row"},s.a.createElement(P.a,{readOnly:!0,type:"text",placeholder:this.props.fileName||"No file selected"}),s.a.createElement(L.a,{onClick:function(){return e.fileInput.click()},bsStyle:"primary"},s.a.createElement("div",null,s.a.createElement("input",{type:"file",accept:"image/*",onChange:this.props.onSelect,className:"uploadImageInput",ref:function(t){e.fileInput=t}}),s.a.createElement("span",{className:"imageComponentButtonText"},"Choose File"))))}}]),t}(s.a.Component),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._selectImageToUpload=function(e){var t=e.target.files[0];t&&t.size<=k?(a.setState({loadingSelectedImage:!0,selectedImageSize:null,selectedImage:null,selectedFileName:t.name}),ne(t).then(function(e){a.setState({selectedImage:e,selectedImageSize:t.size,loadingSelectedImage:!1})})):(!a.state.selectedImage||t&&t.size>k)&&a.setState({selectedImageSize:t&&t.size,selectedImage:null,selectedFileName:t&&t.name,loadingSelectedImage:!1})},a._shouldDisplaySizeWarning=function(){return Boolean(a.state.selectedImageSize&&a.state.selectedImageSize>k)},a._canUpload=function(){return Boolean(a.state.selectedImage&&a.state.selectedImageSize<=k)},a._cancel=function(){a.setState({selectedImage:null,selectedImageSize:null,selectedFileName:null,loadingSelectedImage:!1}),a.props.onClose()},a._confirmUpload=function(){a.props.onClose(a.state.selectedImage),a.setState({selectedImage:null,selectedImageSize:null,selectedFileName:null,loadingSelectedImage:!1})},a.state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(Y.a,{open:this.props.visible,onClose:this._cancel},s.a.createElement("div",{className:e.paper},s.a.createElement(G.a.Header,null,s.a.createElement(G.a.Title,null,"Upload Image")),s.a.createElement("div",{className:"marginUpDown15"},this._shouldDisplaySizeWarning()&&s.a.createElement(ae.a,{bsStyle:"danger"},"That image is too large. The selected image should be no more than ",Math.floor(k/1048576)," megabytes."),s.a.createElement(se,{onSelect:this._selectImageToUpload,fileName:this.state.selectedFileName}),this.state.selectedImage&&s.a.createElement("div",{className:"selectedImagePreview"},s.a.createElement("img",{className:"img-responsive",alt:"selected",src:this.state.selectedImage})),this.state.loadingSelectedImage&&s.a.createElement(H,null)),s.a.createElement(G.a.Footer,null,s.a.createElement(L.a,{onClick:this._cancel},"Cancel"),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._confirmUpload,disabled:!this._canUpload()},"Upload"))))}}]),t}(s.a.Component),le=Object(J.withStyles)(function(e){return{paper:{width:"50%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,margin:"auto",position:"relative",top:"50%",transform:"translateY(-50%)"}}})(ie),oe=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(L.a,{bsStyle:"primary",onClick:this.props.onClick},s.a.createElement("span",{className:"glyphicon glyphicon-camera"}),s.a.createElement("span",{className:"uploadSidewalkImageText"},"Upload Image"))}}]),t}(s.a.Component),re=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return 0===this.props.imageCount?s.a.createElement("h5",null,"Nobody has uploaded images yet for this sidewalk."):s.a.createElement("div",{className:"previewSidewalkImages"},s.a.createElement(L.a,{bsStyle:"primary",onClick:this.props.onClick},"View ",this.props.imageCount," images"))}}]),t}(s.a.Component),ce=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._viewImages=function(){e.props.onOpenImages()},e._openImageModal=function(){e.setState({modalOpened:!0})},e._closeImageModal=function(t){e.setState({modalOpened:!1}),t&&N.uploadSidewalkImage(t)},e.store=x,e.state={modalOpened:!1},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.currentSidewalk?s.a.createElement("div",null,s.a.createElement(re,{imageCount:this.state.currentSidewalk.totalImages,previewImage:this.state.currentSidewalk.lastImage,onClick:this._viewImages}),s.a.createElement(oe,{onClick:this._openImageModal}),this.state.uploadingSidewalkImage&&s.a.createElement("div",{className:"marginTop10"},s.a.createElement("span",{className:"marginRight10"},"Uploading..."),s.a.createElement(H,null)),s.a.createElement(le,{visible:this.state.modalOpened,onClose:this._closeImageModal})):null}}]),t}(g.a.Component),me=a(375),ue=a.n(me),de=a(377),he=a.n(de),pe=a(127),ge=a.n(pe),fe=a(376),be=a.n(fe),ve=a(231),ye=a.n(ve),we=a(76),Ie=a.n(we),Se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(Ie.a,{className:e.root},s.a.createElement(ue.a,null,s.a.createElement(be.a,null,s.a.createElement(ye.a,null,s.a.createElement(ge.a,{className:e.tableCell},"Activity"),s.a.createElement(ge.a,{className:e.tableCell,numeric:!0},"Percentage"))),s.a.createElement(he.a,null,this.props.activities.map(function(t,a){return s.a.createElement(ye.a,{key:a},s.a.createElement(ge.a,{className:e.tableCell,component:"th",scope:"row"},t.type),s.a.createElement(ge.a,{className:e.tableCell,numeric:!0},100*t.distributionPercent))}))))}}]),t}(s.a.Component),Ee=Object(J.withStyles)(function(e){return{root:{width:"100%",overflowX:"auto"},tableCell:{fontSize:"14px",fontWeight:e.typography.fontWeightRegular,fontFamily:"Proza Libre"}}})(Se),Ce=a(153),ke=a.n(Ce),Oe=a(378),je=a.n(Oe),_e=a(149),De=a.n(_e),Ne=a(380),xe=a.n(Ne),Re=a(379),Pe=a.n(Re),Le=a(381),Me=a.n(Le),Ue=a(102),Ae=a.n(Ue),Fe=a(382),Te=a.n(Fe),Be=a(385),Ve=a.n(Be),ze=a(384),qe=a.n(ze),We=a(383),He=a.n(We),Ge=(a(68),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._handleClose=function(){a.props.onClose()},a._handleKeyDown=function(e){"Escape"===e.key&&a._handleClose()},a.changeAccessibility=function(e,t){a.setState({accessibilityValue:t})},a.ChangeConnectivity=function(e,t){a.setState({connectivityValue:t})},a.changeComfort=function(e,t){a.setState({comfortValue:t})},a.changeSafety=function(e,t){a.setState({safetyValue:t})},a.changeSecurity=function(e,t){a.setState({securityValue:t})},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a._handleSubmitRating=function(e){N.uploadRatings(a.state.accessibilityValue,a.state.comfortValue,a.state.connectivityValue,a.state.safetyValue,a.state.securityValue),a.setState({accessibilityValue:3,connectivityValue:3,comfortValue:3,safetyValue:3,securityValue:3,open:!1})},a.state={accessibilityValue:3,connectivityValue:3,comfortValue:3,safetyValue:3,securityValue:3,open:!1},a.store=x,a.selfRef=s.a.createRef(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&this.props.selectedSidewalkDetails&&N.loadSidewalkDetails(this.props.selectedSidewalkDetails)}},{key:"renderExpansionPanel",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.props.classes;return s.a.createElement(je.a,{defaultExpanded:a},s.a.createElement(Pe.a,{expandIcon:s.a.createElement(xe.a,null),"data-sidewalk-header":e},s.a.createElement(De.a,{className:n.heading},e)),s.a.createElement(Me.a,null,t))}},{key:"renderSummaryDetails",value:function(){var e=null;return e=this.state.currentSidewalk.lastImage?s.a.createElement("div",{className:"drawerImageSection"},s.a.createElement("img",{className:"img-responsive",alt:"sidewalk-preview",src:this.state.currentSidewalk.lastImage.url})):s.a.createElement("h4",null,"There are no uploaded images for this sidewalk."),s.a.createElement("div",null,s.a.createElement("h3",{className:"streetNameSection"},this.state.currentSidewalk.address),s.a.createElement("hr",null),e,s.a.createElement("hr",null),s.a.createElement("h5",null,"The average pedestrian velocity on this sidewalk is ",this.state.currentSidewalk.averageVelocity," metres per second."))}},{key:"renderUploadImageComponent",value:function(){return s.a.createElement(ce,{onOpenImages:this.props.onOpenImages})}},{key:"_formatRating",value:function(e){return e&&e.toFixed(2)}},{key:"renderRatings",value:function(){var e=this.props.classes,t=this.state.accessibilityValue,a=this.state.connectivityValue,n=this.state.comfortValue,i=this.state.safetyValue,l=this.state.securityValue;return s.a.createElement("div",null,s.a.createElement(L.a,{onClick:this.handleClickOpen},"Rate this sidewalk"),s.a.createElement(Te.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(He.a,{id:"form-dialog-title"},s.a.createElement("h3",null,"Rate the Sidewalk"),s.a.createElement("n",null),s.a.createElement("h5",null,"Please rate the sidewalk out of the sacle of 1 to 5.")),s.a.createElement(qe.a,null,s.a.createElement("h5",null," Accessibility "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:t,min:1,max:5,step:1,onChange:this.changeAccessibility})),t,"/5"),s.a.createElement("h5",null," Connectivity "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:a,min:1,max:5,step:1,onChange:this.ChangeConnectivity})),a,"/5"),s.a.createElement("h5",null," Comfort "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:n,min:1,max:5,step:1,onChange:this.changeComfort})),n,"/5"),s.a.createElement("h5",null," Physical Safety "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:i,min:1,max:5,step:1,onChange:this.changeSafety})),i,"/5"),s.a.createElement("h5",null," Sense of Security "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:l,min:1,max:5,step:1,onChange:this.changeSecurity})),l,"/5")),s.a.createElement(Ve.a,null,s.a.createElement(L.a,{onClick:this.handleClose,color:"primary"},"Cancel"),s.a.createElement(L.a,{onClick:this._handleSubmitRating,color:"primary"},"Submit"))),s.a.createElement("h4",null,this.state.currentSidewalk.totalRatings," people have rated this sidewalk."),s.a.createElement("hr",null),s.a.createElement("h4",null,"Overall: ",this._formatRating(this.state.currentSidewalk.overallRating)),s.a.createElement("h4",null,"Accessibility: ",this._formatRating(this.state.currentSidewalk.accessibility)),s.a.createElement("h4",null,"Connectivity: ",this._formatRating(this.state.currentSidewalk.connectivity)),s.a.createElement("h4",null,"Comfort: ",this._formatRating(this.state.currentSidewalk.comfort)),s.a.createElement("h4",null,"Physical Safety: ",this._formatRating(this.state.currentSidewalk.physicalSafety)),s.a.createElement("h4",null,"Sense of Security: ",this._formatRating(this.state.currentSidewalk.senseOfSecurity)))}},{key:"renderComments",value:function(){return s.a.createElement(te,null)}},{key:"renderPedestrianData",value:function(){return 0===this.state.currentSidewalk.mobilityTypeDistribution.length?s.a.createElement("h4",null,"No pedestrian data has been recorded for this sidewalk"):s.a.createElement(Ee,{activities:this.state.currentSidewalk.mobilityTypeDistribution})}},{key:"renderDrawerDetails",value:function(){return this.state.currentSidewalk?s.a.createElement("div",{className:"sidewalkDrawer"},this.renderExpansionPanel("Summary",this.renderSummaryDetails(),!0),this.renderExpansionPanel("Images",this.renderUploadImageComponent()),this.renderExpansionPanel("Ratings",this.renderRatings()),this.renderExpansionPanel("Comments",this.renderComments()),this.renderExpansionPanel("Pedestrian Data",this.renderPedestrianData())):null}},{key:"render",value:function(){return s.a.createElement("div",{tabIndex:0,onKeyDown:this._handleKeyDown,ref:this.selfRef,className:"noOutlineDiv"},s.a.createElement(ke.a,{open:this.props.visible,anchor:"right",variant:"temporary"},s.a.createElement(F.a,{onClick:this._handleClose,className:"closeButton"}),this.renderDrawerDetails()))}}]),t}(p.Component)),Ke=Object(J.withStyles)(function(e){return{root:{width:"90%"},slider:{padding:"22px 0px"},heading:{fontSize:e.typography.pxToRem(30),fontWeight:e.typography.fontWeightRegular,fontFamily:"Proza Libre"}}})(Ge),Ye=a(386),Je=a.n(Ye),$e=a(387),Qe=a.n($e),Xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).listRef=s.a.createRef(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(){this.listRef.current.forceUpdateGrid()}},{key:"render",value:function(){var e=this,t=this.props.hasNextPage&&!this.props.isNextPageLoading?this.props.loadedItemCount+1:this.props.loadedItemCount;return s.a.createElement(Je.a,{isRowLoaded:this.props.isRowLoaded,loadMoreRows:this.props.loadMoreRows,rowCount:t},function(a){var n=a.onRowsRendered;return s.a.createElement(Qe.a,{ref:e.listRef,height:1e3,onRowsRendered:n,rowCount:t,rowHeight:200,rowRenderer:e.props.rowRenderer,width:250,style:{outline:"none"}})})}}]),t}(s.a.PureComponent),Ze=(a(881),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._onImageClicked=function(e){a.setState({currentImageIndex:e}),void 0!==a.props.getImageIndex&&a.props.getImageIndex(e)},a._isRowLoaded=function(e){var t=e.index;return Boolean(a.props.loadedImages[t])},a._loadMoreRows=function(e){var t=e.startIndex,n=e.stopIndex;t||(n=(t=a.props.loadedImages.length)+1),a.props.loadMoreData(t,n+4)},a._rowRenderer=function(e){var t,n=e.index,i=e.key,l=e.style;return t=a._isRowLoaded({index:n})?s.a.createElement("div",{className:a.state.currentImageIndex===n?"infiniteImageRowSelected":"infiniteImageRowUnselected"},s.a.createElement(U.a,{className:"clickableItem"},a.props.renderAboveImage&&a.props.renderAboveImage(a.state.currentImageIndex===n,a.props.loadedImages[n]),s.a.createElement("img",{onClick:function(){a._onImageClicked(n)},className:"img-responsive fillAvailable",alt:"uploaded",src:a.props.loadedImages[n].url}))):s.a.createElement(H,null),s.a.createElement("div",{className:"infiniteImageListRow",key:i,style:l},t)},a._handleKeyDown=function(e){if(a.props.visible)if("ArrowRight"===e.key||"ArrowDown"===e.key){if(a.state.currentImageIndex===a.props.loadedImages.length-1){if(!a.props.hasNextPage)return;a._loadMoreRows({startIndex:a.state.currentImageIndex+1,stopIndex:a.state.currentImageIndex+1})}a.setState({currentImageIndex:a.state.currentImageIndex+1})}else("ArrowLeft"===e.key||"ArrowUp"===e.key)&&a.state.currentImageIndex>0?a.setState({currentImageIndex:a.state.currentImageIndex-1}):"Escape"===e.key&&a.props.onClose()},a.state={currentImageIndex:0},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"renderSelectedImage",value:function(){var e;return e=this.props.loadedImages[this.state.currentImageIndex]?s.a.createElement("img",{className:"backgroundImage",alt:"selected",src:this.props.loadedImages[this.state.currentImageIndex].url}):s.a.createElement(H,null),s.a.createElement("div",{className:"selectedImageWrapper"},e)}},{key:"displayImageDrawer",value:function(){var e=Object(J.withStyles)(this.props.classes)(ke.a);return s.a.createElement("div",null,s.a.createElement(e,{open:this.props.visible,variant:"persistent",onClose:this.props.onClose,anchor:"left",SlideProps:{unmountOnExit:!0}},this.renderSelectedImage()),s.a.createElement(e,{open:this.props.visible,variant:"persistent",onClose:this.props.onClose,anchor:"right",SlideProps:{unmountOnExit:!0}},s.a.createElement(F.a,{className:"closeButton",onClick:this.props.onClose}),s.a.createElement(Xe,{isRowLoaded:this._isRowLoaded,loadMoreRows:this.props.isNextPageLoading?function(){}:this._loadMoreRows,rowRenderer:this._rowRenderer,hasNextPage:this.props.hasNextPage,loadedItemCount:this.props.loadedImages.length,isNextPageLoading:this.props.isNextPageLoading})))}},{key:"render",value:function(){return s.a.createElement("div",{className:"noOutlineDiv",tabIndex:0,onKeyDown:this._handleKeyDown},this.displayImageDrawer())}}]),t}(s.a.Component)),et=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._cancel=function(){a.props.onClose()},a._confirm=function(){V.deleteImage(a.props.sidewalkId,a.props.image.id,function(e){e&&a.props.onClose(!0)})},a.store=z,a.state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"renderModalBody",value:function(){return this.props.visible?s.a.createElement("div",null,this.state.isDeletingImage&&s.a.createElement(H,null),s.a.createElement("div",{className:"selectedImagePreview"},s.a.createElement("img",{className:"img-responsive",alt:"selected",src:this.props.image.url}))):null}},{key:"render",value:function(){return s.a.createElement(Q,{title:"Are you sure you want to delete this image?",body:this.renderModalBody(),onCancel:this._cancel,onConfirm:this._confirm,visible:this.props.visible,disabledConfirm:this.state.isDeletingImage})}}]),t}(g.a.Component),tt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._loadMoreImages=function(e,t){a.setState({isNextPageLoading:!0}),N.loadUploadedImages(e,t,function(){setTimeout(function(){a.setState({isNextPageLoading:!1})},50)})},a._onDeleteImageClicked=function(e){a.setState({modalOpened:!0,selectedImage:e})},a._onModalClosed=function(e){e&&N.removeLoadedImage(a.state.selectedImage,function(e){a.galleryRef.current._onImageClicked(e-1)},function(){a.props.onClose()}),a.setState({modalOpened:!1,selectedImage:null})},a._renderDeleteButton=function(e,t){return e&&a.state.isLoggedIn?s.a.createElement(F.a,{className:"closeButton",onClick:function(){a._onDeleteImageClicked(t)}}):null},a.stores=[x,z],a.state={isNextPageLoading:!1,modalOpened:!1},a.galleryRef=s.a.createRef(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.currentSidewalk?s.a.createElement("div",null,s.a.createElement(Ze,{classes:{},loadedImages:this.state.loadedUserImages,hasNextPage:this.state.hasNextImagesPage,loadMoreData:this._loadMoreImages,visible:this.props.visible,isNextPageLoading:this.state.isNextPageLoading,onClose:this.props.onClose,renderAboveImage:this._renderDeleteButton,ref:this.galleryRef}),s.a.createElement(et,{visible:this.props.visible&&this.state.modalOpened,onClose:this._onModalClosed,sidewalkId:this.state.currentSidewalk.id,image:this.state.selectedImage})):null}}]),t}(g.a.Component),at=a(389),nt=a.n(at),st=a(388),it=a.n(st),lt=a(227),ot=a.n(lt),rt=a(226),ct=a.n(rt),mt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._handleClose=function(){a.props.onClose()},a.state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(it.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.props.visible,autoHideDuration:4e3,onClose:this._handleClose},s.a.createElement(ot.a,{className:this.props.alertContentClassName,"aria-describedby":"client-snackbar",message:s.a.createElement("div",{id:"client-snackbar",className:"alertBody"},this.props.icon,s.a.createElement("span",{className:"alertMessage"},this.props.message)),action:[s.a.createElement(ct.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this._handleClose},s.a.createElement(F.a,null))]}))}}]),t}(s.a.Component),ut=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(mt,{onClose:this.props.onClose,visible:this.props.visible,message:this.props.message,alertContentClassName:"errorAlert",icon:s.a.createElement(nt.a,{className:"alertIcon"})})}}]),t}(s.a.Component),dt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleClose=function(){N.dismissImageErrorMessage()},e.store=x,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.uploadedImageError,message:"An error occurred while uploading the image."})}}]),t}(g.a.Component),ht=a(390),pt=a.n(ht),gt=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(mt,{onClose:this.props.onClose,visible:this.props.visible,message:this.props.message,alertContentClassName:"successAlert",icon:s.a.createElement(pt.a,{className:"alertIcon"})})}}]),t}(s.a.Component),ft=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleClose=function(){N.dismissImageSuccessMessage()},e.store=x,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(gt,{onClose:this._handleClose,visible:this.state.uploadImageSucceeded,message:"Your image was uploaded. It must be approved before it is visible."})}}]),t}(g.a.Component),bt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleClose=function(){V.dismissCommentSuccessMessage()},e.store=z,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(gt,{onClose:this._handleClose,visible:this.state.successfullyDeletedComment,message:"The comment was successfully deleted."})}}]),t}(g.a.Component),vt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleClose=function(){V.dismissCommentErrorMessage()},e.store=z,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.failedDeleteComment,message:"An error occurred while deleting the comment."})}}]),t}(g.a.Component),yt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleClose=function(){V.dismissImageErrorMessage()},e.store=z,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.failedDeleteImage,message:"An error occurred while deleting the image."})}}]),t}(g.a.Component),wt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleClose=function(){V.dismissImageSuccessMessage()},e.store=z,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(gt,{onClose:this._handleClose,visible:this.state.successfullyDeletedImage,message:"The image has been successfully deleted."})}}]),t}(g.a.Component),It=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(dt,null),s.a.createElement(ft,null),s.a.createElement(bt,null),s.a.createElement(vt,null),s.a.createElement(yt,null),s.a.createElement(wt,null))}}]),t}(s.a.Component),St=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e)))._viewImages=function(){v.setDrawerOpened(!1),a.setState({viewingImages:!0})},a._closeImages=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&v.setDrawerOpened(!0),a.setState({viewingImages:!1})},a._onCloseDrawer=function(){a._closeImages(!1),v.setDrawerOpened(!1)},a.state={viewingImages:!1},a.store=_,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.state.sidewalks&&0!==this.state.sidewalks.length||v.loadAllSidewalks()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(D,null),s.a.createElement(Ke,{visible:this.state.sidewalkSelected,onClose:this._onCloseDrawer,selectedSidewalkDetails:this.state.selectedSidewalkDetails,onOpenImages:this._viewImages}),s.a.createElement(tt,{onClose:this._closeImages,visible:this.state.viewingImages}),s.a.createElement(It,null))}}]),t}(p.Component),Et=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"renderCategory",value:function(e,t){return s.a.createElement("div",null,s.a.createElement("h3",null,e),s.a.createElement("p",null,t),s.a.createElement("hr",null))}},{key:"render",value:function(){return s.a.createElement("div",{className:"padding25"},this.renderCategory("What is this website about?","This website was made for the purpose of allowing the citizens of Edmonton to discuss \n\t\t\t\t\ttheir experiences on sidewalks across the city with other people. As a user of this site, you are able to select any\n\t\t\t\t\tsidewalk in the city from the map displayed on the home page. By selecting a sidewalk, you will be\n\t\t\t\t\tshown what other people think about that particular sidewalk, through ratings, images, and comments.\n\t\t\t\t\tYou can leave your own ratings and comments on the sidewalk, as well as upload any image that you\n\t\t\t\t\tfeel is relevant to the sidewalk."),this.renderCategory("Who will use the results?","\n\t\t\t\tThe results will primarily be used by two parties. The first one is government officials, so they can see\n\t\t\t\twhat sidewalks in the city are in need of improvement the most. STEPS researchers will also use the data collected\n\t\t\t\tfrom this website so that they can analyze it to get a bigger picture of the overall state of sidewalks\n\t\t\t\tin Edmonton.\n\t\t\t\t"),this.renderCategory("How can I get involved?","\n\t\t\t\tAll you need to do to be involved with the STEPS application is to leave your feelings and thoughts\n\t\t\t\tabout particular sidewalks. You can rate any sidewalk you want, comment on it, or even upload an image to it.\n\t\t\t\t"),this.renderCategory("Privacy Policy","\n\t\t\t\tAll of the data collected on this site will be used purely for research purposes. We will never sell any of the\n\t\t\t\tdata we collect to third parties, and nothing that you upload to the site will be directly linked back to you.\n\t\t\t\tAll of your interactions with the site will be anonymous.\n\t\t\t\t"))}}]),t}(s.a.Component),Ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).loadMoreImages=function(e,t){a.setState({isNextPageLoading:!0}),V.getUnapprovedImages(e,t,function(){setTimeout(function(){a.setState({isNextPageLoading:!1})},50)})},a.handleAccept=function(){var e=a.state.pendingImages[a.imageIndex].id;V.handlePendingImages(!0,e)},a.handleReject=function(){var e=a.state.pendingImages[a.imageIndex].id;V.handlePendingImages(!1,e)},a.getImageIndex=function(e){a.setState({currentImageIndex:e}),a.imageIndex=e},a.store=z,a.state={},a.imageIndex=0,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){V.getUnapprovedImages()}},{key:"render",value:function(){if(void 0!==this.state.pendingImages&&this.state.pendingImages.length>0){return s.a.createElement("div",null,s.a.createElement(Ze,{classes:{paper:{margin:"65px 0px 0px 0px"}},loadedImages:this.state.pendingImages,hasNextPage:this.state.hasMoreImages,loadMoreData:this.loadMoreImages,visible:!0,isNextPageLoading:this.state.isNextPageLoading,getImageIndex:this.getImageIndex}),s.a.createElement("div",{className:"buttonContainer"},s.a.createElement("div",null,s.a.createElement(L.a,{bsStyle:"success",onClick:this.handleAccept}," Success ")),s.a.createElement("div",null,s.a.createElement(L.a,{bsStyle:"danger",onClick:this.handleReject}," Reject "))))}return s.a.createElement("h1",null,"No images uploaded")}}]),t}(g.a.Component),kt=a(898),Ot=a(391),jt=a.n(Ot),_t=a(392),Dt=a.n(_t),Nt=a(87),xt=a.n(Nt),Rt={root:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},button:{fontSize:14,"&:hover":{color:"#FFEB3B"},"&:focus":{color:"#FFEB3B"}},titleButton:{fontSize:18,"&:hover":{color:"#FFEB3B"},"&:focus":{color:"#FFEB3B"},fontFamily:"Proza Libre"}},Pt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).store=z,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(jt.a,{position:"static"},s.a.createElement(Dt.a,null,s.a.createElement(kt.a,{to:"/"},s.a.createElement(xt.a,{color:"inherit",className:e.titleButton},"STEPS ")," "),s.a.createElement(kt.a,{to:"/about/"},s.a.createElement(xt.a,{color:"inherit",className:e.button},"  About ")),s.a.createElement(kt.a,{to:"/statistics/"},s.a.createElement(xt.a,{color:"inherit",className:e.button}," ",s.a.createElement(kt.a,{to:"/statistics/"})," Statistics ")),!this.state.isLoggedIn&&s.a.createElement(kt.a,{to:"/login"},s.a.createElement(xt.a,{color:"inherit",className:e.button}," Login ")," "),this.state.isLoggedIn&&s.a.createElement(kt.a,{to:"/dashboard"},s.a.createElement(xt.a,{color:"inherit",className:e.button},"  Dashboard")))))}}]),t}(g.a.Component),Lt=Object(J.withStyles)(Rt)(Pt),Mt=(a(367),a(899)),Ut=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this)))._handleUserChange=function(t){e.setState({username:t.target.value})},e._handlePassChange=function(t){e.setState({password:t.target.value})},e._validateCredentials=function(t){var a=e.state.username.length,n=e.state.password.length;return 0===a||0===n?"error":"success"},e._handleSubmit=function(t){var n=a(367)(String(e.state.password));V.checkCredentials(String(e.state.username),n),e.setState({username:"",password:""})},e._handleClose=function(){V.dismissLoginSuccess(),V.dismissLoginError()},e._validCredentialAdminPage=function(t){if(e.state.isLoggedIn)return e.props.history.push("/dashboard")},e.store=z,e._validCredentialAdminPage=e._validCredentialAdminPage.bind(Object(y.a)(Object(y.a)(e))),e.state={username:"",password:""},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loginContainer col-lg-4 col-md-6"},s.a.createElement("h3",{className:"adminTitleLogin"},"Admin Login"),s.a.createElement("form",null,s.a.createElement(R.a,{controlId:"username",bsSize:"small"},s.a.createElement(Mt.a,null,"Username"),s.a.createElement(P.a,{autoFocus:!0,type:"username",value:this.state.username,onChange:this._handleUserChange,placeholder:"Username"})),s.a.createElement(R.a,{controlId:"password",bsSize:"small"},s.a.createElement(Mt.a,null,"Password"),s.a.createElement(P.a,{value:this.state.password,onChange:this._handlePassChange,type:"password",placeholder:"Password"})),this._validCredentialAdminPage(),s.a.createElement(L.a,{bsStyle:"primary",type:"submit",onClick:this._handleSubmit,disabled:"error"===this._validateCredentials()},"Login")),s.a.createElement(gt,{onClose:this._handleClose,visible:this.state.successfullyLoggedIn,message:"Successfully Loggedin."}),s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.failedToLogIn,message:"Invalid Credentials"}))}}]),t}(p.Component),At=a(395),Ft=g.a.createActions(["loadSummaryStatistics"]),Tt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={totalSidewalks:0,totalReviews:0,totalComments:0,averageReviews:{},totalImagesUploaded:0,contributionsByMonth:[],isLoading:!1},e.listenables=Ft,e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"onLoadSummaryStatistics",value:function(){var e=this;this.setState({isLoading:!0}),j.sendGetRequest("sidewalk/2").then(function(t){t.isLoading=!1,e.setState.apply(e,Object(At.a)(t))}).catch(function(t){e.setState({isLoading:!1}),console.error(t)})}}]),t}(g.a.Store),Bt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).store=Tt,e.state={},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){Ft.loadSummaryStatistics()}},{key:"render",value:function(){return this.state.isLoading?null:s.a.createElement("div",{"data-summary-stats":!0},s.a.createElement("p",null,"Summary Statistics"))}}]),t}(g.a.Component),Vt=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Lt,null),s.a.createElement(d.a,null,s.a.createElement(h.a,{path:"/about/",component:Et}),s.a.createElement(h.a,{path:"/statistics",component:Bt}),s.a.createElement(h.a,{path:"/login",component:Ut}),s.a.createElement(h.a,{path:"/map/:id",component:St}),s.a.createElement(h.a,{path:"/dashboard",component:Ct}),s.a.createElement(h.a,{path:"/",component:St})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var zt=a(902),qt=a(394),Wt=a.n(qt),Ht=Object(J.createMuiTheme)({palette:{primary:Wt.a,secondary:{main:"#FFEB3B"}},typography:{useNextVariants:!0}});l.a.render(s.a.createElement(zt.a,null,s.a.createElement(J.MuiThemeProvider,{theme:Ht},s.a.createElement(Vt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[396,2,1]]]);
//# sourceMappingURL=main.96b94efc.chunk.js.map