{"version":3,"sources":["map/MapActions.js","constants/ArcGISConstants.js","constants/DatabaseConstants.js","util/RestUtil.js","map/MapStore.js","map/SummaryMapView.jsx","sidewalk/SidewalkActions.js","sidewalk/SidewalkStore.js","util/DateUtilities.js","admin/AdminActions.js","admin/AdminStore.js","sidewalk/SidewalkCommentComponent.jsx","misc-components/LoaderComponent.jsx","misc-components/ConfirmationModal.jsx","sidewalk/CommentDeletionModal.jsx","sidewalk/CommentsListComponent.jsx","util/FileUtilities.js","images/ImageSelectorComponent.jsx","images/ImageUploadModal.jsx","sidewalk/images/UploadSidewalkImageComponent.jsx","sidewalk/images/PreviewSidewalkImagesComponent.jsx","sidewalk/images/SidewalkImageDetailsComponent.jsx","sidewalk/PedestrianDataComponent.jsx","constants/ThemeConstants.js","sidewalk/SidewalkDetailsView.jsx","images/ImageDisplayList.jsx","images/InfiniteImageGallery.jsx","sidewalk/images/ImageDeletionModal.jsx","sidewalk/images/SidewalkUploadedImagesGallery.jsx","misc-components/BaseAlertComponent.jsx","misc-components/ErrorAlertComponent.jsx","sidewalk/images/UploadedImageErrorComponent.jsx","misc-components/SuccessAlertComponent.jsx","sidewalk/images/UploadedImageSuccessComponent.jsx","sidewalk/CommentDeleteSuccessComponent.jsx","sidewalk/CommentDeleteErrorComponent.jsx","sidewalk/images/ImageDeleteErrorComponent.jsx","sidewalk/images/ImageDeleteSuccessComponent.jsx","map/AlertsContainer.jsx","map/MapDashboard.jsx","misc-components/AboutPageView.jsx","admin/AdminPanelView.jsx","misc-components/NavbarComponent.jsx","admin/AdminLogin.jsx","summary/SummaryStatisticsActions.js","summary/SummaryStatisticsStore.js","summary/SummaryStatisticsView.jsx","App.js","serviceWorker.js","index.js"],"names":["Actions","Reflux","createActions","esriURL","url","downtownLongitude","downtownLatitude","MAX_UPLOAD_SIZE","makeRequestURL","endpoint","concat","RestUtil","body","optionOverrides","arguments","length","undefined","options","Object","assign","uri","headers","Content-Type","json","method","rp","post","query","qs","get","MapStore","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","sidewalks","sidewalkSelected","longitude","latitude","listenables","_this2","sendGetRequest","then","res","setState","catch","err","console","error","open","_this3","esriLoader","loadModules","data","Map","MapView","map","basemap","view","container","center","zoom","FeatureLayer","Circle","Legend","featureLayer","renderer","type","field","defaultSymbol","uniqueValueInfos","value","symbol","width","color","style","highlightOptions","fillOpacity","when","legend","layerInfos","layer","title","ui","add","on","event","pxToMeters","extent","popupEnabled","popup","dockEnabled","visible","dockOptions","buttonEnabled","popupTemplate","content","c","mapPoint","radius","q","createQuery","geometry","queryFeatures","results","features","resultingFeatures","sidewalkID","parseInt","attributes","osm_id","sidewalk","Rating","find","s","id","goTo","animate","duration","easing","selectedSidewalkDetails","Store","SummaryMapView","store","loadMapDetails","react_default","a","createElement","Component","SidewalkStore","_getDefaultSidewalkState","loadedUserImages","hasNextImagesPage","currentSidewalk","uploadingSidewalkImage","uploadedImageError","uploadingComment","uploadCommentFailed","uploadImageSucceeded","newSidewalk","lastImage","accessibilityValue","accessibility","base64Image","sendPostRequest","image","startIndex","stopIndex","updateStateCallback","_this4","endIndex","hasMoreImages","slice","images","comment","_this5","text","currentSidewalkComments","comments","unshift","commentHint","comfort","connectivity","physicalSafety","senseOfSecurity","_this6","parseFloat","result","index","indexOf","newTotalComments","totalComments","splice","onLastImageDeleted","onNoImagesRemaining","newImagesCount","totalImages","newImages","sidewalkOverride","months","DateUtilities","date","getMonth","getDate","getFullYear","getHours","getMinutes","getTimeDisplay","AdminStore","isLoggedIn","isDeletingComment","successfullyDeletedComment","failedDeleteComment","username","password","credentialError","pendingImages","sidewalkId","commentId","onFinish","user","pass","successfullyLoggedIn","failedToLogIn","imageId","isDeletingImage","successfullyDeletedImage","failedDeleteImage","accepted","respondingToImage","successfullyRespondedToImage","failedToRespondToImage","String","filter","SidewalkCommentComponent","_handleDelete","props","onDelete","details","Card_default","className","Close_default","onClick","formatDateForDisplay","Date","LoaderComponent","CircularProgress_default","React","ConfirmationModal","_cancel","onCancel","_confirm","onConfirm","classes","Modal_default","onClose","paper","Modal","Header","Title","Footer","Button","bsStyle","disabled","disabledConfirm","withStyles","theme","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","unit","margin","position","top","transform","CommentDeletionModal","deleteComment","success","LoaderComponent_LoaderComponent","misc_components_ConfirmationModal","renderModalBody","CommentsListComponent","_handleChange","e","enteredComment","target","_handleSubmit","SidewalkActions","uploadComment","_openConfirmationModal","selectedComment","modalOpened","_closeConfirmationModal","deleted","removeLoadedComment","require","replaceRegex","addWords","isProfane","FormGroup","bsSize","controlId","validationState","_validateCommentState","FormControl","componentClass","placeholder","onChange","rows","Feedback","SidewalkCommentComponent_SidewalkCommentComponent","key","CommentDeletionModal_CommentDeletionModal","getFile","file","Promise","resolve","reject","reader","FileReader","onerror","abort","onload","readAsDataURL","ImageSelectorComponent","readOnly","fileName","fileInput","click","accept","onSelect","ref","ImageUploadModal","_selectImageToUpload","files","size","loadingSelectedImage","selectedImageSize","selectedImage","selectedFileName","name","_shouldDisplaySizeWarning","Boolean","_canUpload","_confirmUpload","Alert","Math","floor","ImageSelectorComponent_ImageSelectorComponent","alt","src","UploadSidewalkImageComponent","PreviewSidewalkImagesComponent","imageCount","SidewalkImageDetailsComponent","_viewImages","onOpenImages","_openImageModal","_closeImageModal","uploadedFile","uploadSidewalkImage","PreviewSidewalkImagesComponent_PreviewSidewalkImagesComponent","previewImage","UploadSidewalkImageComponent_UploadSidewalkImageComponent","images_ImageUploadModal","PedestrianDataComponent","Paper_default","root","Table_default","TableHead_default","TableRow_default","TableCell_default","tableCell","numeric","TableBody_default","activities","row","component","scope","distributionPercent","overflowX","fontSize","fontWeight","typography","fontWeightRegular","fontFamily","SidewalkDetailsView","_handleClose","_handleKeyDown","changeAccessibility","ChangeConnectivity","connectivityValue","changeComfort","comfortValue","changeSafety","safetyValue","changeSecurity","securityValue","handleClickOpen","handleClose","_handleSubmitRating","uploadRatings","selfRef","createRef","prevProps","loadSidewalkDetails","header","expanded","ExpansionPanel_default","defaultExpanded","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","data-sidewalk-header","Typography_default","heading","ExpansionPanelDetails_default","imageSection","address","averageVelocity","SidewalkImageDetailsComponent_SidewalkImageDetailsComponent","toFixed","Dialog_default","aria-labelledby","DialogTitle_default","DialogContent_default","Slider_default","slider","min","max","step","DialogActions_default","totalRatings","_formatRating","overallRating","CommentsListComponent_CommentsListComponent","mobilityTypeDistribution","sidewalk_PedestrianDataComponent","renderExpansionPanel","renderSummaryDetails","renderUploadImageComponent","renderRatings","renderComments","renderPedestrianData","tabIndex","onKeyDown","Drawer_default","anchor","variant","renderDrawerDetails","pxToRem","ImageDisplayList","listRef","current","forceUpdateGrid","loadedCount","hasNextPage","isNextPageLoading","loadedItemCount","InfiniteLoader_default","isRowLoaded","loadMoreRows","rowCount","_ref","onRowsRendered","List_default","height","rowHeight","rowRenderer","outline","PureComponent","InfiniteImageGallery","_onImageClicked","currentImageIndex","getImageIndex","_isRowLoaded","loadedImages","_loadMoreRows","_ref2","loadMoreData","_rowRenderer","_ref3","renderAboveImage","ImageDrawer","Drawer","SlideProps","unmountOnExit","renderSelectedImage","ImageDisplayList_ImageDisplayList","displayImageDrawer","ImageDeletionModal","deleteImage","SidewalkUploadedImagesGallery","_loadMoreImages","loadUploadedImages","setTimeout","_onDeleteImageClicked","_onModalClosed","removeLoadedImage","galleryRef","_renderDeleteButton","selected","stores","InfiniteImageGallery_InfiniteImageGallery","ImageDeletionModal_ImageDeletionModal","BaseAlertComponent","Snackbar_default","anchorOrigin","vertical","horizontal","autoHideDuration","SnackbarContent_default","alertContentClassName","aria-describedby","message","icon","action","IconButton_default","aria-label","ErrorAlertComponent","BaseAlertComponent_BaseAlertComponent","Error_default","UploadedImageErrorComponent","dismissImageErrorMessage","ErrorAlertComponent_ErrorAlertComponent","SuccessAlertComponent","CheckCircle_default","UploadedImageSuccessComponent","dismissImageSuccessMessage","SuccessAlertComponent_SuccessAlertComponent","CommentDeleteSuccessComponent","dismissCommentSuccessMessage","CommentDeleteErrorComponent","dismissCommentErrorMessage","ImageDeleteErrorComponent","ImageDeleteSuccessComponent","AlertsContainer","UploadedImageErrorComponent_UploadedImageErrorComponent","UploadedImageSuccessComponent_UploadedImageSuccessComponent","CommentDeleteSuccessComponent_CommentDeleteSuccessComponent","CommentDeleteErrorComponent_CommentDeleteErrorComponent","ImageDeleteErrorComponent_ImageDeleteErrorComponent","ImageDeleteSuccessComponent_ImageDeleteSuccessComponent","MapDashboard","MapActions","setDrawerOpened","viewingImages","_closeImages","_onCloseDrawer","loadAllSidewalks","SummaryMapView_SummaryMapView","sidewalk_SidewalkDetailsView","SidewalkUploadedImagesGallery_SidewalkUploadedImagesGallery","AlertsContainer_AlertsContainer","AboutPageView","renderCategory","AdminDrawerImageGallery","_dismissNotifications","AdminActions","dismissImageApprovalNotification","dismissImageRejectionNotification","loadMoreImages","getUnapprovedImages","_onAcceptImage","handlePendingImages","_onRejectImage","_renderResponseButtons","styles","flexGrow","menuButton","marginLeft","marginRight","button","&:hover","&:focus","titleButton","NavbarComponent","AppBar_default","Toolbar_default","Link","to","Button_default","AdminLogin","_handleUserChange","enteredName","_handlePassChange","enteredPassword","_validateCredentials","userLength","passLength","hashpass","md5","checkCredentials","dismissLoginSuccess","dismissLoginError","_validCredentialAdminPage","history","push","bind","assertThisInitialized","ControlLabel","autoFocus","SummaryStatisticsStore","totalSidewalks","totalReviews","averageReviews","totalImagesUploaded","contributionsByMonth","isLoading","apply","toConsumableArray","SummaryStatisticsView","loadSummaryStatistics","data-summary-stats","App","misc_components_NavbarComponent","Switch","Route","path","AdminPanelView","window","location","hostname","match","createMuiTheme","primary","purple","secondary","main","useNextVariants","ReactDOM","render","BrowserRouter","core_styles","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0853b968.chunk.js","sourcesContent":["import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"loadAllSidewalks\",\r\n\t\"loadMapDetails\",\r\n\t\"setDrawerOpened\"\r\n]);\r\n\r\nexport default Actions;","export const esriURL = { \r\n    url: \"https://js.arcgis.com/4.9\"\r\n};\r\n\r\nexport const layerURL = \"https://services9.arcgis.com/8ccGcFm2KpUhl0DB/arcgis/rest/services/edm_network_walkability/FeatureServer\";\r\n\r\nexport const downtownLongitude = -113.4990;\r\n\r\nexport const downtownLatitude = 53.5405;","export const DATABASE_BASE_URL = \"http://199.116.235.159:8000\",\r\n\tMAX_UPLOAD_SIZE = 3145728;\r\n","import rp from \"request-promise\";\r\nimport {DATABASE_BASE_URL} from \"../constants/DatabaseConstants\";\r\n\r\n/**\r\n * Gets the URL to send an HTTP request to\r\n * @param {String} endpoint - the endpoint to send the request to on the server (everything after the /api/ part of the URI)\r\n * @return the URL to send an HTTP request to\r\n */\r\nconst makeRequestURL = (endpoint) => {\r\n\treturn `${DATABASE_BASE_URL}/api/${endpoint}/`;\r\n};\r\n\r\nexport default class RestUtil {\r\n\r\n\t/**\r\n\t * Sends an HTTP POST request to the specified endpoint\r\n\t * @param {String} endpoint - the endpoint in the database to send the request to\r\n\t * @param {Object} body - the payload to send as part of the request\r\n\t * @param {Object?} optionOverrides - an object that defines overrides to the options sent with the request\r\n\t * @return {Promise} - a promise that resolves when the request is complete with the response as it's parameter\r\n\t */\r\n\tstatic sendPostRequest(endpoint, body, optionOverrides = {}) {\r\n\t\tconst options = Object.assign({\r\n\t\t\turi: makeRequestURL(endpoint),\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tjson: true,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: body\r\n\t\t}, optionOverrides);\r\n\t\treturn rp.post(options);\r\n\t}\r\n\r\n\t/**\r\n\t * Sends an HTTP GET request to the specified endpoint\r\n\t * @param {String} endpoint - the endpoint in the database to send the request to\r\n\t * @param {Object?} query - an optional parameter defining any query strings include in the request URL\r\n\t * @param {Object?} optionOverrides - an object that defines overrides to the options sent with the request\r\n\t * @return {Promise} - a promise that resolves when the request is complete with the response as it's parameter\r\n\t */\r\n\tstatic sendGetRequest(endpoint, query = {}, optionOverrides = {}) {\r\n\t\tconst options = Object.assign({\r\n\t\t\turi: makeRequestURL(endpoint),\r\n\t\t\tjson: true,\r\n\t\t\tqs: query\r\n\t\t}, optionOverrides);\r\n\t\treturn rp.get(options);\r\n\t}\r\n}","import Reflux from \"reflux\";\r\nimport esriLoader from \"esri-loader\";\r\n\r\nimport Actions from \"./MapActions\";\r\nimport {esriURL, layerURL, downtownLongitude, downtownLatitude} from \"../constants/ArcGISConstants\";\r\nimport RestUtil from \"../util/RestUtil\";\r\n\r\nexport default class MapStore extends Reflux.Store {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\tsidewalks: [],\r\n\t\t\tsidewalkSelected: false,\r\n\t\t\tlongitude: downtownLongitude,\r\n\t\t\tlatitude: downtownLatitude\r\n\t\t};\r\n\t\tthis.listenables = Actions;\r\n\r\n\t\tif (process.env.NODE_ENV === \"development\"){\r\n\t\t\twindow.DEV_MAP_STORE = this;\r\n\t\t}\r\n\t}\r\n\r\n\tonLoadAllSidewalks() {\r\n\t\tRestUtil.sendGetRequest(\"sidewalk\").then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsidewalks: res\r\n\t\t\t});\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\t\r\n\tonSetDrawerOpened(open) {\r\n\t\tthis.setState({\r\n\t\t\tsidewalkSelected: open\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Calls esriLoader which helps the react-app to communicate with the ArcGIS API for javascript\r\n\t */\r\n\r\n    onLoadMapDetails() {\r\n\t\tesriLoader.loadModules(['esri/Map', 'esri/views/MapView'], esriURL).then((data) => {\r\n\t\t\tconst Map = data[0],\r\n\t\t\t\tMapView = data[1];\r\n\t\t\t\r\n\t\t\tconst map = new Map({\r\n\t\t\t\tbasemap: \"dark-gray-vector\"\r\n\t\t\t\t//layers: [featureLayer],\r\n\t\t\t});\r\n\r\n\t\t\tconst view = new MapView({\r\n\t\t\t\tmap: map,\r\n\t\t\t\tcontainer: \"mapContainer\",\r\n\t\t\t\tcenter: [this.state.longitude, this.state.latitude],\r\n\t\t\t\tzoom: 15\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tmap,\r\n\t\t\t\tview\r\n\t\t\t });\r\n\t\t\treturn esriLoader.loadModules([\"esri/layers/FeatureLayer\", \"esri/PopupTemplate\", \"esri/geometry/Circle\", \"esri/Graphic\",\"esri/core/watchUtils\",\"esri/renderers/UniqueValueRenderer\",\"esri/symbols/SimpleFillSymbol\",\"esri/symbols/SimpleLineSymbol\",\"esri/layers/support/MapImage\", \"esri/widgets/Legend\", \"esri/widgets/Search\"], esriURL);\r\n\t\t}).then((data) => {\r\n\t\t\t\r\n\t\t\tconst FeatureLayer = data[0],\r\n\t\t\t\tPopupTemplate = data[1],\r\n\t\t\t\tCircle = data[2],\r\n\t\t\t\tGraphic = data[3],\r\n\t\t\t\twatchUtils = data[4],\r\n\t\t\t\tUniqueValueRenderer = data[5],\r\n\t\t\t\tSimpleFillSymbol = data[6],\r\n\t\t\t\tSimpleLineSymbol = data[7],\r\n\t\t\t\tMapImage = data[8],\r\n\t\t\t\tLegend = data[9],\r\n\t\t\t\tview = this.state.view;\r\n\t\t\t\r\n\t\t\tvar Rating = 4;\r\n\r\n\t\t\t// TODO: Confirm if it is impossible to pass a variable in the field parameter instead\r\n\t\t\tconst sidewalkColorMapRenderer = {\r\n\t\t\t\ttype: \"unique-value\",  // autocasts as new UniqueValueRenderer()\r\n\t\t\t\tfield: \"Rating\",\r\n\t\t\t\tdefaultSymbol: { type: \"simple-fill\" },  // autocasts as new SimpleFillSymbol()\r\n\t\t\t\tuniqueValueInfos: [{\r\n\t\t\t\t\t// All features with value of \"North\" will be blue\r\n\t\t\t\t\tvalue: 5,\r\n\t\t\t\t\tsymbol: {\r\n\t\t\t\t\t\ttype: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\tcolor: \"#00A300\",\r\n\t\t\t\t\t\tstyle: \"solid\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\t// All features with value of \"East\" will be green\r\n\t\t\t\t\tvalue: 4,\r\n\t\t\t\t\tsymbol: {\r\n\t\t\t\t\t\ttype: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\tcolor: \"#00A392\",\r\n\t\t\t\t\t\tstyle: \"solid\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\t// All features with value of \"East\" will be green\r\n\t\t\t\t\tvalue: 3,\r\n\t\t\t\t\tsymbol: {\r\n\t\t\t\t\t\ttype: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\tcolor: \"#FF7A00\",\r\n\t\t\t\t\t\tstyle: \"solid\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\t// All features with value of \"East\" will be green\r\n\t\t\t\t\tvalue: 2,\r\n\t\t\t\t\tsymbol: {\r\n\t\t\t\t\t\ttype: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\tcolor: \"#FFDF00\",\r\n\t\t\t\t\t\tstyle: \"solid\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\t// All features with value of \"East\" will be green\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tsymbol: {\r\n\t\t\t\t\t\ttype: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\tcolor: \"#FF0000\",\r\n\t\t\t\t\t\tstyle: \"solid\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\t// All features with value of \"East\" will be green\r\n\t\t\t\t\tvalue: \"\",\r\n\t\t\t\t\tsymbol: {\r\n\t\t\t\t\t\ttype: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\tcolor: \"#D2D3D1\",\r\n\t\t\t\t\t\tstyle: \"solid\"\r\n\t\t\t\t\t}\r\n\t\t\t\t  }],\r\n\t\t\t\t  highlightOptions: {\r\n\t\t\t\t\tcolor: [255, 241, 58],\r\n\t\t\t\t\tfillOpacity: 0.4\r\n\t\t\t\t  }\r\n\t\t\t  };\r\n\r\n\t\t\tconst featureLayer = new FeatureLayer({\r\n\t\t\t\turl: layerURL,\r\n\t\t\t\trenderer: sidewalkColorMapRenderer\r\n\t\t\t});\r\n\t \r\n\t\t\tview.when(function() {\r\n\t\t\t\t// get the first layer in the collection of operational layers in the WebMap\r\n\t\t\t\t// when the resources in the MapView have loaded.\r\n\t\t\t\t//var featureLayer = map.layers.getItemAt(0);\r\n\t\t\t\tvar legend = new Legend({\r\n\t\t\t\t  view: view,\r\n\t\t\t\t  layerInfos: [{\r\n\t\t\t\t\tlayer: featureLayer,\r\n\t\t\t\t\ttitle: \"Sidewalk Ratings\"\r\n\t\t\t\t  }]\r\n\t\t\t\t});\r\n\t  \r\n\t\t\t\t// Add widget to the bottom right corner of the view\r\n\t\t\t\tview.ui.add(legend, \"bottom-left\");\r\n\t\t\t  });\r\n\r\n\t\t\t// radius to search in\r\n\t\t\tconst pxRadius = 5;\r\n\t\t\tthis.state.map.add(featureLayer);\r\n\r\n\t\t\tthis.state.view.on(\"click\", (event) => {\r\n\t\t\t\t//let pxToMeters = view.extent.width / view.width;\r\n\r\n\t\t\t\tvar highlightSelect, highlightHover;\r\n\t\t\t\tlet pxToMeters = view.extent.width / view.width;\r\n\r\n\t\t\t\t// this may be removed later \r\n\t\t\t\tfeatureLayer.popupEnabled = false;\r\n\t\t\t\tview.popup.dockEnabled = true;\r\n\t\t\t\tview.popup.visible = false;\r\n\t\t\t\tview.popup.dockOptions = {\r\n\t\t\t\t\tbuttonEnabled: false\r\n\t\t\t\t}\r\n\t\t\t\tfeatureLayer.popupTemplate = {\r\n\t\t\t\t\ttitle: \"Street ID: {osm_id}\",\r\n\t\t\t\t\tcontent: \"Average Rating: {Rating}\"\r\n\t\t\t\t}  \r\n\t\t\t\t\t\t\r\n\t\t\t\tlet c = new Circle({\r\n\t\t\t\t\tcenter: event.mapPoint,\r\n\t\t\t\t\tradius: pxRadius * pxToMeters // meters by default\r\n\t\t\t\t  });\r\n\r\n\r\n\t\t\t\tlet q = featureLayer.createQuery();\r\n\t\t\t\tq.geometry = c;\r\n\t\t\t\tfeatureLayer.queryFeatures(q).then((results) => {\r\n\t\t\t\t\tif(results.features.length !== 0){\r\n\r\n\t\t\t\t\t\tlet resultingFeatures = results.features;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// TODO: fix some sidewalks osm_id being \" \" (NaN)\r\n\t\t\t\t\t\tlet sidewalkID = parseInt(resultingFeatures[0].attributes.osm_id)\r\n\t\t\t\t\t\tlet ratingValue = parseInt(resultingFeatures[0].attributes.Rating)\r\n\t\t\t\t\t\tconst sidewalk = this.state.sidewalks.find((s) => s.id === sidewalkID);\r\n\t\t\t\t\t\tif (!sidewalk) {\r\n\t\t\t\t\t\t\tconsole.error(\"No sidewalk with a matching ID was found\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//console.log(resultingFeatures)\r\n\t\t\t\t\t\t//Add graphic to the map graphics layer.\r\n\r\n\t\t\t\t\t\tview.goTo({\r\n\t\t\t\t\t\t\tcenter: [event.mapPoint.longitude, event.mapPoint.latitude],\r\n\t\t\t\t\t\t\tanimate: true,\r\n\t\t\t\t\t\t\tduration: 200,\r\n\t\t\t\t\t\t\teasing: \"easy-in\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tlongitude: event.mapPoint.longitude,\r\n\t\t\t\t\t\t\tlatitude: event.mapPoint.latitude,\r\n\t\t\t\t\t\t\tsidewalkSelected: true,\r\n\t\t\t\t\t\t\tselectedSidewalkDetails: sidewalk\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport { Component } from 'reflux';\r\n\r\nimport Actions from \"./MapActions\";\r\nimport Store from \"./MapStore\";\r\n\r\nexport default class SummaryMapView extends Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n  \tcomponentDidMount() {\r\n\t\tActions.loadMapDetails();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"mapContainer\"/>\r\n\t\t);\r\n\t}\r\n}\r\n","import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"uploadSidewalkImage\",\r\n\t\"loadUploadedImages\",\r\n\t\"loadSidewalkDetails\",\r\n\t\"uploadComment\",\r\n\t\"dismissImageErrorMessage\",\r\n\t\"dismissImageSuccessMessage\",\r\n\t\"uploadRatings\",\r\n\t\"removeLoadedComment\",\r\n\t\"removeLoadedImage\"\r\n]);\r\n\r\nexport default Actions;","import Reflux from \"reflux\";\r\n\r\nimport Actions from \"./SidewalkActions\";\r\nimport RestUtil from \"../util/RestUtil\";\r\n\r\n/**\r\n * This store keeps track of the state of components that deal with sidewalks\r\n */\r\nexport default class SidewalkStore extends Reflux.Store {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = this._getDefaultSidewalkState();\r\n\t\tthis.listenables = Actions;\r\n\r\n\t\tif (process.env.NODE_ENV === \"development\"){\r\n\t\t\twindow.DEV_SIDEWALK_STORE = this;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the default state of the store before a sidewalk is selected\r\n\t * @return {Object} - the default state of the store before a sidewalk is selected\r\n\t */\r\n\t_getDefaultSidewalkState() {\r\n\t\treturn {\r\n\t\t\tloadedUserImages: [],\r\n\t\t\thasNextImagesPage: true,\r\n\t\t\tcurrentSidewalk: null,\r\n\t\t\tuploadingSidewalkImage: false,\r\n\t\t\tuploadedImageError: false,\r\n\t\t\tuploadingComment: false,\r\n\t\t\tuploadCommentFailed: false,\r\n\t\t\tuploadImageSucceeded: false,\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Loads data about the specified sidewalk\r\n\t * @param {Object} sidewalk - a basic summary of the sidewalk to load, including it's id and average ratings\r\n\t */\r\n\tonLoadSidewalkDetails(sidewalk) {\r\n\t\tthis.setState(this._getDefaultSidewalkState());\r\n\t\tRestUtil.sendGetRequest(`sidewalk/${sidewalk.id}`).then((data) => {\r\n\t\t\t\r\n\t\t\tconst newSidewalk = Object.assign({}, sidewalk, data);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentSidewalk: newSidewalk,\r\n\t\t\t\thasNextImagesPage: newSidewalk.lastImage,\r\n\t\t\t\tloadedUserImages: [newSidewalk.lastImage],\r\n\t\t\t\taccessibilityValue: newSidewalk.accessibility\r\n\t\t\t});\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user selecting an image to upload to a sidewalk\r\n\t * @param {String} base64Image - the image as a base64 string\r\n\t */\r\n\tonUploadSidewalkImage(base64Image) {\r\n\t\tthis.setState({\r\n\t\t\tuploadingSidewalkImage: true,\r\n\t\t\tuploadedImageError: false,\r\n\t\t\tuploadImageSucceeded: false\r\n\t\t});\r\n\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${this.state.currentSidewalk.id}/image/create`, {\r\n\t\t\timage: base64Image\r\n\t\t}).then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuploadingSidewalkImage: false,\r\n\t\t\t\tuploadImageSucceeded: true\r\n\t\t\t});\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuploadingSidewalkImage: false,\r\n\t\t\t\tuploadedImageError: true\r\n\t\t\t});\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Loads user uploaded images from the database\r\n\t * @param {number} startIndex - the amount of images to skip before starting to return them\r\n\t * @param {number} startIndex - the index of the last item to load\r\n\t * @param {function} updateStateCallback - a callback function that will be invoked when the images are loaded\r\n\t */\r\n\tonLoadUploadedImages(startIndex, stopIndex, updateStateCallback) {\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${this.state.currentSidewalk.id}/image`, {\r\n\t\t\tstartIndex: startIndex,\r\n\t\t\tendIndex: stopIndex\r\n\t\t}).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\thasNextImagesPage: res.hasMoreImages,\r\n\t\t\t\tloadedUserImages: this.state.loadedUserImages.slice(0).concat(res.images)\r\n\t\t\t});\r\n\t\t\treturn updateStateCallback();\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Uploads a comment to the database for the current sidewalk\r\n\t * @param {String} comment - the comment to upload\r\n\t */\r\n\tonUploadComment(comment) {\r\n\t\tthis.setState({\r\n\t\t\tuploadingComment: true\r\n\t\t});\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${this.state.currentSidewalk.id}/comment/create`, {\r\n\t\t\ttext: comment\r\n\t\t}).then((res) => {\r\n\t\t\tconst currentSidewalkComments = this.state.currentSidewalk.comments.slice();\r\n\t\t\tcurrentSidewalkComments.unshift(res);\r\n\t\t\tthis.setState({\r\n\t\t\t\tuploadingComment: false,\r\n\t\t\t\tuploadCommentFailed: false,\r\n\t\t\t\tcommentHint: \"Comment Successfully Uploaded!\",\r\n\t\t\t\tcurrentSidewalk: Object.assign(this.state.currentSidewalk, { comments: currentSidewalkComments })\r\n\t\t\t});\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuploadingComment: false,\r\n\t\t\t\tuploadCommentFailed: true\r\n\t\t\t});\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Dismisses the message notifying the user that an error happened when uploading an image\r\n\t */\r\n\tonDismissImageErrorMessage() {\r\n\t\tthis.setState({\r\n\t\t\tuploadedImageError: false\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Dismisses the message notifying the user that their image was successfully uploaded\r\n\t */\r\n\tonDismissImageSuccessMessage() {\r\n\t\tthis.setState({\r\n\t\t\tuploadImageSucceeded: false\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user uploading the ratings\r\n\t */\r\n\r\n\tonUploadRatings(accessibility, comfort, connectivity, physicalSafety, senseOfSecurity) {\r\n\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${this.state.currentSidewalk.id}/rate`, {\r\n\t\t\taccessibility: parseFloat(accessibility),\r\n\t\t\tcomfort: parseFloat(comfort),\r\n\t\t\tconnectivity: parseFloat(connectivity),\r\n\t\t\tsenseOfSecurity: parseFloat(senseOfSecurity),\r\n\t\t\tphysicalSafety: parseFloat(physicalSafety)\r\n\t\t\t\r\n\t\t}).then((result) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\taccessibility: 3,\r\n\t\t\t\tcomfort: 3,\r\n\t\t\t\tconnectivity: 3,\r\n\t\t\t\tphysicalSafety: 3,\r\n\t\t\t\tsenseOfSecurity: 3\r\n\t\t\t});\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the specified comment from the currently loaded sidewalk\r\n\t * @param {Object} comment - the comment to remove\r\n\t */\r\n\tonRemoveLoadedComment(comment) {\r\n\t\tconst currentSidewalkComments = this.state.currentSidewalk.comments.slice(),\r\n\t\t\tindex = currentSidewalkComments.indexOf(comment);\r\n\t\tif (index !== -1) {\r\n\t\t\tconst newTotalComments = this.state.currentSidewalk.totalComments - 1;\r\n\t\t\tcurrentSidewalkComments.splice(index, 1);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentSidewalk: Object.assign(this.state.currentSidewalk, {comments: currentSidewalkComments, totalComments: newTotalComments})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes the specified image from the currently loaded sidewalk\r\n\t * @param {Object} image - the image to remove\r\n\t * @param {function} onLastImageDeleted - a callback function that will be called if the deleted image is the last loaded one\r\n\t * @param {function} onNoImagesRemaining - a callback function that will be called if there are no images remaining\r\n\t */\r\n\tonRemoveLoadedImage(image, onLastImageDeleted, onNoImagesRemaining) {\r\n\t\tconst index = this.state.loadedUserImages.indexOf(image);\r\n\t\tif (index !== -1) {\r\n\t\t\tconst newImagesCount = this.state.currentSidewalk.totalImages - 1,\r\n\t\t\t\tnewImages = this.state.loadedUserImages.slice(),\r\n\t\t\t\tsidewalkOverride = {totalImages: newImagesCount};\t\t\t\r\n\t\t\tnewImages.splice(index, 1);\r\n\t\t\tif (this.state.currentSidewalk.lastImage === image) {\r\n\t\t\t\tsidewalkOverride.lastImage = newImages[0] || null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentSidewalk: Object.assign(this.state.currentSidewalk, sidewalkOverride),\r\n\t\t\t\tloadedUserImages: newImages\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (index === newImages.length && index > 0) {\r\n\t\t\t\tonLastImageDeleted(index);\r\n\t\t\t}\r\n\t\t\tif (newImages.length === 0) {\r\n\t\t\t\treturn onNoImagesRemaining();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n/**\r\n * Gets the time component of the specified date in HH:MM format\r\n * @param {Date} date - the date to format\r\n * @return {String} - the outputted time of the date in HH:MM format\r\n */\r\nconst getTimeDisplay = (date) => {\r\n\tconst hours = (\"0\" + date.getHours()).slice(-2);\r\n\tconst minutes = (\"0\" + date.getMinutes()).slice(-2);\r\n\treturn hours + \":\" + minutes;\r\n};\r\n\r\n/**\r\n * Provides utility functions for working with dates\r\n */\r\nexport default class DateUtilities {\r\n\r\n\t/**\r\n\t * Formates a date object for display on the UI\r\n\t * @param {Date} date - the date to format\r\n\t * @return {String} - the formatted date to display\r\n\t */\r\n\tstatic formatDateForDisplay(date) {\r\n\t\treturn months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear() + \" - \" + getTimeDisplay(date);\r\n\t}\r\n\r\n}","import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"deleteComment\",\r\n\t\"dismissCommentSuccessMessage\",\r\n\t\"dismissCommentErrorMessage\",\r\n\t\"checkCredentials\",\r\n\t\"deleteImage\",\r\n\t\"dismissImageSuccessMessage\",\r\n\t\"dismissImageErrorMessage\",\r\n\t\"dismissLoginSuccess\", \r\n\t\"dismissLoginError\",\r\n\t\"getUnapprovedImages\",\r\n\t\"handlePendingImages\",\r\n\t\"dismissImageApprovalNotification\",\r\n\t\"dismissImageRejectionNotification\"\r\n]);\r\n\r\nexport default Actions;","import Reflux from \"reflux\";\r\n\r\nimport Actions from \"./AdminActions\";\r\nimport RestUtil from \"../util/RestUtil\";\r\n\r\n/**\r\n * This store keeps track of the state of components that deal with administrator actions\r\n */\r\nexport default class AdminStore extends Reflux.Store {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\tisLoggedIn: false,\r\n\t\t\tisDeletingComment: false,\r\n\t\t\tsuccessfullyDeletedComment: false,\r\n\t\t\tfailedDeleteComment: false,\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tcredentialError: false,\r\n\t\t\tpendingImages: []\r\n\t\t};\r\n        this.listenables = Actions;\r\n\r\n\t\tif (process.env.NODE_ENV === \"development\"){\r\n\t\t\twindow.DEV_ADMIN_STORE = this;\r\n\t\t}\r\n    }\r\n\r\n\t/**\r\n\t * Handles attempting to delete a comment\r\n\t * @param {String} sidewalkId - the ID of the sidewalk the comment is linked to\r\n\t * @param {String} commentId - the ID of the comment to delete\r\n\t * @param {function} onFinish - callback function that is called once the request has been resolved. \r\n\t *\t\t\t\t\t The first parameter indicates whether the request was succesful or not\r\n\t */\r\n\tonDeleteComment(sidewalkId, commentId, onFinish) {\r\n\t\tthis.setState({\r\n\t\t\tisDeletingComment: true,\r\n\t\t\tsuccessfullyDeletedComment: false,\r\n\t\t\tfailedDeleteComment: false\r\n\t\t});\r\n\t\t\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${sidewalkId}/comment/delete`, {\r\n\t\t\tid: commentId,\r\n\t\t\tusername: this.state.username,\r\n\t\t\tpassword: this.state.password\r\n\t\t}).then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDeletingComment: false,\r\n\t\t\t\tsuccessfullyDeletedComment: true\r\n\t\t\t});\r\n\t\t\tonFinish(true);\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDeletingComment: false,\r\n\t\t\t\tfailedDeleteComment: true\r\n\t\t\t});\r\n\t\t\tonFinish(false);\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Dismisses the message that notifies the user that they have successfully deleted a comment\r\n\t */\r\n\tonDismissCommentSuccessMessage() {\r\n\t\tthis.setState({\r\n\t\t\tsuccessfullyDeletedComment: false\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Dismisses the message that notifies the user that they have failed to deleted a comment\r\n\t */\r\n\tonDismissCommentErrorMessage() {\r\n\t\tthis.setState({\r\n\t\t\tfailedDeleteComment: false\r\n\t\t});\r\n\t}\r\n\r\n\tonCheckCredentials(user, pass) {\r\n\t\tRestUtil.sendPostRequest('adminAccount/login',{\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass\r\n\t\t}).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoggedIn: true,\r\n\t\t\t\tsuccessfullyLoggedIn: true,\r\n\t\t\t\tusername: user,\r\n\t\t\t\tpassword: pass\r\n\t\t\t});\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoggedIn: false,\r\n\t\t\t\tfailedToLogIn: true\r\n\r\n\t\t\t});\r\n\t\t\tconsole.error(err)\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Handles attempting to delete an image\r\n\t * @param {String} sidewalkId - the ID of the sidewalk the image is linked to\r\n\t * @param {String} imageId - the ID of the image to delete\r\n\t * @param {function} onFinish - callback function that is called once the request has been resolved. \r\n\t *\t\t\t\t\t The first parameter indicates whether the request was succesful or not\r\n\t */\r\n\tonDeleteImage(sidewalkId, imageId, onFinish){\r\n\t\tthis.setState({\r\n\t\t\tisDeletingImage: true,\r\n\t\t\tsuccessfullyDeletedImage: false,\r\n\t\t\tfailedDeleteImage: false\r\n\t\t});\r\n\t\t\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${sidewalkId}/image/delete`, {\r\n\t\t\timageId: imageId,\r\n\t\t\tusername: this.state.username,\r\n\t\t\tpassword: this.state.password\r\n\t\t}).then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDeletingImage: false,\r\n\t\t\t\tsuccessfullyDeletedImage: true\r\n\t\t\t});\r\n\t\t\treturn onFinish(true);\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDeletingImage: false,\r\n\t\t\t\tfailedDeleteImage: true\r\n\t\t\t});\r\n\t\t\tconsole.error(err);\r\n\t\t\treturn onFinish(false);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Dismisses the message that notifies the user that they have successfully deleted an image\r\n\t */\r\n\tonDismissImageSuccessMessage() {\r\n\t\tthis.setState({\r\n\t\t\tsuccessfullyDeletedImage: false\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Dismisses the message that notifies the user that they have failed to deleted an image\r\n\t */\r\n\tonDismissImageErrorMessage(){\r\n\t\tthis.setState({\r\n\t\t\tfailedDeleteImage: false\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Dismisses the message that notifies the user that they have successfully deleted a comment\r\n\t */\r\n\tonDismissLoginSuccess() {\r\n\t\tthis.setState({\r\n\t\t\tsuccessfullyLoggedIn: false\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Dismisses the message that notifies the user that they have successfully deleted a comment\r\n\t */\r\n\tonDismissLoginError() {\r\n\t\tthis.setState({\r\n\t\t\tfailedToLogIn: false\r\n\t\t});\r\n\t}\r\n\t\r\n\t// TODO: remove hardcoded sidewalkId value\r\n\tonHandlePendingImages(accepted, imageId, sidewalkId = \"2\") {\r\n\t\tthis.setState({\r\n\t\t\trespondingToImage: true,\r\n\t\t\tsuccessfullyRespondedToImage: false,\r\n\t\t\tfailedToRespondToImage: false\r\n\t\t});\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${sidewalkId}/image/respond`, {\r\n\t\t\tusername: this.state.username,\r\n\t\t\tpassword: this.state.password,\r\n\t\t\taccepted: accepted,\r\n\t\t\timageId: String(imageId)\r\n\t\t}).then((result) => {\r\n\t\t\tconst newImages = this.state.pendingImages.filter((image) => image.id !== imageId);\r\n\t\t\tthis.setState({\r\n\t\t\t\trespondingToImage: false,\r\n\t\t\t\tsuccessfullyRespondedToImage: true,\r\n\t\t\t\tpendingImages: newImages\r\n\t\t\t});\r\n\t\t}).catch((error) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\trespondingToImage: false,\r\n\t\t\t\tfailedToRespondToImage: true\r\n\t\t\t});\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tonGetUnapprovedImages(startIndex, endIndex) {\r\n\t\tRestUtil.sendPostRequest(`sidewalk/unapprovedImages`, { \r\n\t\t\tusername: this.state.username,\r\n\t\t\tpassword: this.state.password,\r\n\t\t\tstartIndex: startIndex,\r\n\t\t\tendIndex: endIndex\r\n\t\t}).then((result) => {\r\n\t\t\tconst newImages = this.state.pendingImages.slice().concat(result.images);\r\n\t\t\tthis.setState({\r\n\t\t\t\thasMoreImages: result.hasMoreImages,\r\n\t\t\t\tpendingImages: newImages\r\n\t\t\t});\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t})\r\n\t}\r\n\t\r\n\tonDismissImageApprovalNotification() {\r\n\t\tthis.setState({\r\n\t\t\tsuccessfullyRespondedToImage: false,\r\n\t\t});\r\n\t}\r\n\t\r\n\tonDismissImageRejectionNotification() {\r\n\t\tthis.setState({\r\n\t\t\tfailedToRespondToImage: false,\r\n\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport DateUtilities from \"../util/DateUtilities\";\r\nimport Store from \"../admin/AdminStore\";\r\n\r\n/**\r\n * This class renders details about a comment left on a sidewalk\r\n */\r\nexport default class SidewalkCommentComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\t_handleDelete = () => {\r\n\t\tthis.props.onDelete(this.props.details);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Card className=\"commentDisplayBox\">\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isLoggedIn && (\r\n\t\t\t\t\t\t<CloseIcon onClick={this._handleDelete} className=\"closeButton\" />\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t<h5>{this.props.details.text}</h5>\r\n\t\t\t\t<h6>{DateUtilities.formatDateForDisplay(new Date(this.props.details.date))}</h6>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}","import React from \"react\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\n/**\r\n * This component represents the loading spinner that is displayed when an asynchronous action is performed\r\n */\r\nexport default class LoaderComponent extends React.Component {\r\n\t\r\n\trender() {\r\n\t\treturn <CircularProgress />;\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport {Modal, Button} from \"react-bootstrap\";\r\n\r\nimport MaterialModal from '@material-ui/core/Modal';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    width: \"50%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing.unit * 4,\r\n\tmargin: \"auto\",\r\n\tposition: \"relative\",\r\n\ttop: \"50%\",\r\n\ttransform: \"translateY(-50%)\"\r\n  },\r\n});\r\n\r\n/**\r\n * This component renders a modal that allows the user to select an image from their local files,\r\n * and then upload that image to the database. The user's selected image will be previewed in this modal.\r\n */\r\nclass ConfirmationModal extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user closing the modal\r\n\t */\r\n\t_cancel = () => {\r\n\t\tthis.props.onCancel();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user selecting the confirm button\r\n\t */\r\n\t_confirm = () => {\r\n\t\tthis.props.onConfirm();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<MaterialModal\r\n\t\t\t  open={this.props.visible}\r\n\t\t\t  onClose={this._cancel}\r\n\t\t\t>\r\n\t\t\t\t<div className={classes.paper}>\r\n\t\t\t\t\t<Modal.Header>\r\n\t\t\t\t\t\t<Modal.Title>{this.props.title}</Modal.Title>\r\n\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t<div className=\"marginUpDown15\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.body\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t<Button onClick={this._cancel}>Cancel</Button>\r\n\t\t\t\t\t\t<Button bsStyle=\"primary\" onClick={this._confirm} disabled={this.props.disabledConfirm}>Confirm</Button>\r\n\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</div>\r\n\t\t\t</MaterialModal>\r\n\t\t)\r\n\t}\r\n\r\n}\r\n\r\nexport default withStyles(styles)(ConfirmationModal)","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport LoaderComponent from \"../misc-components/LoaderComponent\";\r\nimport ConfirmationModal from \"../misc-components/ConfirmationModal\";\r\n\r\nimport Store from \"../admin/AdminStore\";\r\nimport Actions from \"../admin/AdminActions\";\r\n\r\n/**\r\n * This component renders a modal that allows an administrator to delete a user's comment on a sidewalk\r\n */\r\nexport default class CommentDeletionModal extends Reflux.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = Store;\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user closing the modal\r\n\t */\r\n\t_cancel = () => {\r\n\t\tthis.props.onClose();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user selecting the confirm button\r\n\t */\r\n\t_confirm = () => {\r\n\t\tActions.deleteComment(this.props.sidewalkId, this.props.comment.id, (success) => {\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.props.onClose(true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n\trenderModalBody() {\r\n\t\tif (!this.props.visible) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<p className=\"wrapText\">{this.props.comment.text}</p>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isDeletingComment && <LoaderComponent />\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ConfirmationModal title=\"Are you sure you want to delete this comment?\"\r\n\t\t\t\t\t\t\t   body={this.renderModalBody()}\r\n\t\t\t\t\t\t\t   onCancel={this._cancel}\r\n\t\t\t\t\t\t\t   onConfirm={this._confirm}\r\n\t\t\t\t\t\t\t   visible={this.props.visible}\r\n\t\t\t\t\t\t\t   disabledConfirm={this.state.isDeletingComment}\r\n\t\t    />\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\nimport { Button, FormGroup, FormControl } from \"react-bootstrap\";\r\n\r\nimport SidewalkStore from \"./SidewalkStore\";\r\nimport SidewalkActions from \"./SidewalkActions\";\r\nimport SidewalkCommentComponent from \"./SidewalkCommentComponent\";\r\nimport CommentDeletionModal from \"./CommentDeletionModal\";\r\n\r\n/**\r\n * This class renders the list of all comments left on a sidewalk, as well as the form for\r\n * posting new comments\r\n */\r\nexport default class CommentsListComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = SidewalkStore;\r\n\t\tthis.state = {\r\n\t\t\tenteredComment: \"\",\r\n\t\t\tmodalOpened: false\r\n\t\t};\r\n\t}\r\n\t\r\n\t/**\r\n\t * Determines whether the current input text is valid or not\r\n\t * @return {String} - a representation whether the current comment text can be posted or not (\"error\" or \"success\")\r\n\t */\r\n\t_validateCommentState() {\r\n\t\tlet Filter = require('bad-words'),\r\n\t\t// eslint-disable-next-line\r\n\t\tfilter = new Filter({ replaceRegex: /^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/im});\r\n\t\tfilter.addWords('@','587','780')\r\n\t\tconst length = this.state.enteredComment.length;\r\n\t\t//console.log(filter.isProfane(this.state.enteredComment));\r\n\t\tif(filter.isProfane(this.state.enteredComment)){\r\n\t\t\treturn \"error\";\r\n\t\t}\r\n\t\tif (length === 0) {\r\n\t\t\treturn \"error\";\r\n\t\t} else if (length <= 300) {\r\n\t\t\treturn \"success\";\r\n\t\t}\r\n\t\treturn \"error\";\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user changing their comment text value\r\n\t */\r\n\t_handleChange = (e) => {\r\n\t\tthis.setState({ \r\n\t\t\tenteredComment: e.target.value \r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user submitting their entered comment text\r\n\t */\r\n\t_handleSubmit = (e) => {\r\n\t\tSidewalkActions.uploadComment(this.state.enteredComment);\r\n\t\tthis.setState({\r\n\t\t\tenteredComment: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\t_openConfirmationModal = (selectedComment) => {\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: true,\r\n\t\t\tselectedComment: selectedComment\r\n\t\t});\r\n\t};\r\n\t\r\n\t_closeConfirmationModal = (deleted) => {\r\n\t\tif (deleted) {\r\n\t\t\tSidewalkActions.removeLoadedComment(this.state.selectedComment);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: false,\r\n\t\t\tselectedComment: null\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tif (!this.state.currentSidewalk) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst comments = this.state.currentSidewalk.comments;\r\n\t\treturn (\r\n\t\t\t<div className=\"comments\">\r\n\t\t\t\t<div className=\"commentBox\">\r\n\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\tbsSize=\"small\"\r\n\t\t\t\t\t\t\tcontrolId=\"formBasicText\"\r\n\t\t\t\t\t\t\tvalidationState={this._validateCommentState()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\tcomponentClass=\"textarea\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.enteredComment}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter a comment\"\r\n\t\t\t\t\t\t\t\tonChange={this._handleChange}\r\n\t\t\t\t\t\t\t\trows={4}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControl.Feedback />\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button bsStyle=\"primary\" onClick={this._handleSubmit} disabled={this._validateCommentState() === \"error\"} >\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</Button>\r\n\t\t\t\t<hr />\r\n\r\n\t\t\t\t<div className=\"commentDisplaySection\">\r\n\t\t\t\t\t{comments.map((details, index) =>\r\n\t\t\t\t\t\t<SidewalkCommentComponent details={details} key={index} onDelete={this._openConfirmationModal} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<CommentDeletionModal comment={this.state.selectedComment}\r\n\t\t\t\t\t\t\t\t\t  sidewalkId={this.state.currentSidewalk.id}\r\n\t\t\t\t\t\t\t\t\t  onClose={this._closeConfirmationModal}\r\n\t\t\t\t\t\t\t\t\t  visible={this.state.modalOpened} />\r\n\t\t\t</div >\r\n\r\n\t\t);\r\n\t}\r\n}","export const\r\n\t/**\r\n\t * Converts bytes into megabytes\r\n\t * @param {number} bytes - the amount in bytes to convert\r\n\t * @return {number} - the input bytes value represented in megabytes form\r\n\t */\r\n\tbytesToMB = (bytes) => {\r\n\t\treturn bytes / 1048576;\r\n\t},\r\n\t/**\r\n\t * Gets a base64 encoded string of a file that a user has selected to upload\r\n\t * @param {Object} file - the file that the user has selected\r\n\t * @return {Promise} - a promise that resolves with the base64 string\r\n\t */\r\n\tgetFile = (file) => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.onerror = (err) => {\r\n\t\t\t\treader.abort();\r\n\t\t\t\treject(err);\r\n\t\t\t};\r\n\t\t\treader.onload = function() {\r\n\t\t\t\tresolve(this.result);\r\n\t\t\t};\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t});\r\n\t};","import React from \"react\";\r\nimport {Button, FormControl} from \"react-bootstrap\";\r\n\r\n/**\r\n * This component allows the user to select an image to upload, and it displays the name of the current\r\n * selected image.\r\n */\r\nexport default class ImageSelectorComponent extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<FormControl\r\n\t\t\t\t   readOnly\r\n\t\t\t\t   type=\"text\"\r\n\t\t\t\t   placeholder={this.props.fileName || \"No file selected\"}\r\n\t\t\t\t />\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={() => this.fileInput.click()}\r\n\t\t\t\t\tbsStyle=\"primary\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tonChange={this.props.onSelect}\r\n\t\t\t\t\t\t\tclassName=\"uploadImageInput\"\r\n\t\t\t\t\t\t\tref={(fileInput) => {this.fileInput = fileInput;}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span className=\"imageComponentButtonText\">\r\n\t\t\t\t\t\t\tChoose File\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React from \"react\";\r\nimport {Modal, Button, Alert} from \"react-bootstrap\";\r\n\r\nimport MaterialModal from '@material-ui/core/Modal';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport {getFile, bytesToMB} from \"../util/FileUtilities\";\r\nimport ImageSelectorComponent from \"./ImageSelectorComponent\";\r\nimport LoaderComponent from \"../misc-components/LoaderComponent\";\r\nimport {MAX_UPLOAD_SIZE} from \"../constants/DatabaseConstants\";\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    width: \"50%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing.unit * 4,\r\n\tmargin: \"auto\",\r\n\tposition: \"relative\",\r\n\ttop: \"50%\",\r\n\ttransform: \"translateY(-50%)\"\r\n  },\r\n});\r\n\r\n/**\r\n * This component renders a modal that allows the user to select an image from their local files,\r\n * and then upload that image to the database. The user's selected image will be previewed in this modal.\r\n */\r\nclass ImageUploadModal extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user making a selection in the file selection dialog\r\n\t * @param {Object} event - the event representing the file selection interaction\r\n\t */\r\n\t_selectImageToUpload = (event) => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tif (file && file.size <= MAX_UPLOAD_SIZE) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tloadingSelectedImage: true,\r\n\t\t\t\tselectedImageSize: null,\r\n\t\t\t\tselectedImage: null,\r\n\t\t\t\tselectedFileName: file.name\r\n\t\t\t});\r\n\t\t\tgetFile(file).then((res) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedImage: res,\r\n\t\t\t\t\tselectedImageSize: file.size,\r\n\t\t\t\t\tloadingSelectedImage: false\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else if (!this.state.selectedImage || (file && file.size > MAX_UPLOAD_SIZE)) {\r\n\t\t\t// don't overwrite any existing selected image\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedImageSize: file && file.size,\r\n\t\t\t\tselectedImage: null,\r\n\t\t\t\tselectedFileName: file && file.name,\r\n\t\t\t\tloadingSelectedImage: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Gets whether the large image size warnings should be rendered or not\r\n\t * @return {boolean} - whether the large image size warnings should be rendered or not\r\n\t */\r\n\t_shouldDisplaySizeWarning = () => {\r\n\t\treturn Boolean(this.state.selectedImageSize && this.state.selectedImageSize > MAX_UPLOAD_SIZE);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets whether the upload image should be active or not\r\n\t * @return {boolean} - whether the upload image should be active or not\r\n\t */\r\n\t_canUpload = () => {\r\n\t\treturn Boolean(this.state.selectedImage && this.state.selectedImageSize <= MAX_UPLOAD_SIZE);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user closing the modal without uploading the image\r\n\t */\r\n\t_cancel = () => {\r\n\t\tthis.setState({\r\n\t\t\tselectedImage: null,\r\n\t\t\tselectedImageSize: null,\r\n\t\t\tselectedFileName: null,\r\n\t\t\tloadingSelectedImage: false\r\n\t\t});\r\n\t\tthis.props.onClose();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user selecting the upload button\r\n\t */\r\n\t_confirmUpload = () => {\r\n\t\tthis.props.onClose(this.state.selectedImage);\r\n\t\tthis.setState({\r\n\t\t\tselectedImage: null,\r\n\t\t\tselectedImageSize: null,\r\n\t\t\tselectedFileName: null,\r\n\t\t\tloadingSelectedImage: false\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<MaterialModal\r\n\t\t\t  open={this.props.visible}\r\n\t\t\t  onClose={this._cancel}\r\n\t\t\t>\r\n\t\t\t\t<div className={classes.paper}>\r\n\t\t\t\t\t<Modal.Header>\r\n\t\t\t\t\t\t<Modal.Title>Upload Image</Modal.Title>\r\n\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t<div className=\"marginUpDown15\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._shouldDisplaySizeWarning() && (\r\n\t\t\t\t\t\t\t\t<Alert bsStyle=\"danger\">\r\n\t\t\t\t\t\t\t\t\tThat image is too large. The selected image should be no more than {Math.floor(bytesToMB(MAX_UPLOAD_SIZE))} megabytes.\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<ImageSelectorComponent onSelect={this._selectImageToUpload} fileName={this.state.selectedFileName} />\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.selectedImage && (\r\n\t\t\t\t\t\t\t\t<div className=\"selectedImagePreview\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"img-responsive\" alt=\"selected\" src={this.state.selectedImage} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.loadingSelectedImage && <LoaderComponent />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t<Button onClick={this._cancel}>Cancel</Button>\r\n\t\t\t\t\t\t<Button bsStyle=\"primary\" onClick={this._confirmUpload} disabled={!this._canUpload()}>Upload</Button>\r\n\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</div>\r\n\t\t\t</MaterialModal>\r\n\t\t)\r\n\t}\r\n\r\n}\r\n\r\nexport default withStyles(styles)(ImageUploadModal)","import React from \"react\";\r\nimport {Button} from \"react-bootstrap\";\r\n\r\n/**\r\n * This component represents the \"Upload Image\" button that is visible on a Sidewalk's details\r\n */\r\nexport default class UploadSidewalkImageComponent extends React.Component {\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Button bsStyle=\"primary\" onClick={this.props.onClick}>\r\n\t\t\t\t<span className=\"glyphicon glyphicon-camera\" />\r\n\t\t\t\t<span className=\"uploadSidewalkImageText\">\r\n\t\t\t\t\tUpload Image\r\n\t\t\t\t</span>\r\n\t\t\t</Button>\r\n\t\t);\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport {Button} from \"react-bootstrap\";\r\n\r\n/**\r\n * This component represents the view where the user can select to see all images uploaded to a sidewalk\r\n */\r\nexport default class PreviewSidewalkImagesComponent extends React.Component {\r\n\t\r\n\trender() {\r\n\t\tif (this.props.imageCount === 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<h5>Nobody has uploaded images yet for this sidewalk.</h5>\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"previewSidewalkImages\">\r\n\t\t\t\t<Button bsStyle=\"primary\" onClick={this.props.onClick}>\r\n\t\t\t\t\t\tView {this.props.imageCount} images\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../SidewalkStore\";\r\nimport Actions from \"../SidewalkActions\";\r\n\r\nimport ImageUploadModal from \"../../images/ImageUploadModal\";\r\nimport UploadSidewalkImageComponent from \"./UploadSidewalkImageComponent\";\r\nimport PreviewSidewalkImagesComponent from \"./PreviewSidewalkImagesComponent\";\r\nimport LoaderComponent from \"../../misc-components/LoaderComponent\";\r\n\r\n/**\r\n * This component renders the image section of the sidewalk drawer\r\n */\r\nexport default class SidewalkImageDetailsComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t\tthis.state = {\r\n\t\t\tmodalOpened: false\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Opens up the uploaded images view\r\n\t */\r\n\t_viewImages = () => {\r\n\t\tthis.props.onOpenImages();\r\n\t};\r\n\r\n\t/**\r\n\t * Opens the modal allowing the user to upload images\r\n\t */\r\n\t_openImageModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: true\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Closes the image upload modal\r\n\t * @param {String?} - the base64 encoded string representing the image the user uploaded if valid, or undefined otherwise\r\n\t */\r\n\t_closeImageModal = (uploadedFile) => {\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: false\r\n\t\t});\r\n\t\tif (uploadedFile) {\r\n\t\t\tActions.uploadSidewalkImage(uploadedFile);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (!this.state.currentSidewalk) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<PreviewSidewalkImagesComponent imageCount={this.state.currentSidewalk.totalImages} previewImage={this.state.currentSidewalk.lastImage} onClick={this._viewImages} />\r\n\t\t\t\t<UploadSidewalkImageComponent onClick={this._openImageModal} />\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.uploadingSidewalkImage && (\r\n\t\t\t\t\t\t<div className=\"marginTop10\">\r\n\t\t\t\t\t\t\t<span className=\"marginRight10\">Uploading...</span>\r\n\t\t\t\t\t\t\t<LoaderComponent />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t<ImageUploadModal visible={this.state.modalOpened} onClose={this._closeImageModal} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { FONT_FAMILY } from \"../constants/ThemeConstants\";\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: \"100%\",\r\n    overflowX: \"auto\",\r\n  },\r\n  tableCell: {\r\n\t  fontSize: \"14px\",\r\n\t  fontWeight: theme.typography.fontWeightRegular,\r\n\t  fontFamily: FONT_FAMILY\r\n  }\r\n});\r\n\r\n/**\r\n * This component renders a table displaying details about the distribution of each activity that pedestrians\r\n * were tracked doing on a sidewalk\r\n */\r\nclass PedestrianDataComponent extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {classes} = this.props;\r\n\t\treturn (\r\n\t\t\t<Paper className={classes.root}>\r\n\t\t\t  <Table>\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t  <TableRow>\r\n\t\t\t\t\t<TableCell className={classes.tableCell}>Activity</TableCell>\r\n\t\t\t\t\t<TableCell className={classes.tableCell} numeric>Percentage</TableCell>\r\n\t\t\t\t  </TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t  {this.props.activities.map((row, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t  <TableRow key={index}>\r\n\t\t\t\t\t\t<TableCell className={classes.tableCell} component=\"th\" scope=\"row\">\r\n\t\t\t\t\t\t  {row.type}\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t<TableCell className={classes.tableCell} numeric>{row.distributionPercent * 100}</TableCell>\r\n\t\t\t\t\t  </TableRow>\r\n\t\t\t\t\t);\r\n\t\t\t\t  })}\r\n\t\t\t\t</TableBody>\r\n\t\t\t  </Table>\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(PedestrianDataComponent);","export const SECONDARY_COLOUR = \"#FFEB3B\",\r\n\tFONT_FAMILY = \"Proza Libre\";","import React from \"react\";\r\nimport { Component } from \"reflux\";\r\nimport Store from \"./SidewalkStore\";\r\nimport Actions from \"./SidewalkActions\";\r\nimport CommentsListComponent from \"./CommentsListComponent\";\r\nimport SidewalkImageDetailsComponent from \"./images/SidewalkImageDetailsComponent\";\r\nimport PedestrianDataComponent from \"./PedestrianDataComponent\";\r\n\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport Slider from '@material-ui/lab/Slider';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { FONT_FAMILY } from \"../constants/ThemeConstants\";\r\nimport { Button } from \"react-bootstrap\";\r\n// import Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { AssertionError } from \"assert\";\r\n\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\twidth: '90%',\r\n\t},\r\n\tslider: {\r\n        padding: '22px 0px',\r\n\t},\r\n\t\r\n\theading: {\r\n\t\tfontSize: theme.typography.pxToRem(30),\r\n\t\tfontWeight: theme.typography.fontWeightRegular,\r\n\t\tfontFamily: FONT_FAMILY\r\n\t},\r\n});\r\n\r\n\r\n\r\n/**\r\n * This component handles rendering details about a selected sidewalk\r\n */\r\nclass SidewalkDetailsView extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { \r\n\t\t\taccessibilityValue: 3, \r\n\t\t\tconnectivityValue: 3,\r\n\t\t\tcomfortValue: 3,\r\n\t\t\tsafetyValue: 3,\r\n\t\t\tsecurityValue: 3,\r\n\t\t\topen: false };\r\n\t\tthis.store = Store;\r\n\t\tthis.selfRef = React.createRef();\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.visible && !prevProps.visible && this.props.selectedSidewalkDetails) {\r\n\t\t\tActions.loadSidewalkDetails(this.props.selectedSidewalkDetails);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * handles closing of the drawer\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tthis.props.onClose();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles a key being pressed\r\n\t * @param {Object} event - the event representing the key press\r\n\t */\r\n\t_handleKeyDown = (event) => {\r\n\t\tif (event.key === \"Escape\") {\r\n\t\t\tthis._handleClose();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\trenderExpansionPanel(header, component, expanded = false) {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<ExpansionPanel defaultExpanded={expanded}>\r\n\t\t\t\t<ExpansionPanelSummary expandIcon={<ExpandMoreIcon />} data-sidewalk-header={header}>\r\n\t\t\t\t\t<Typography className={classes.heading}>{header}</Typography>\r\n\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t{component}\r\n\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t</ExpansionPanel>\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Handles rendering summary details about this sidewalk\r\n\t */\r\n\trenderSummaryDetails() {\r\n\t\tlet imageSection = null;\r\n\t\tif (this.state.currentSidewalk.lastImage) {\r\n\t\t\timageSection = (\r\n\t\t\t\t<div className=\"drawerImageSection\">\r\n\t\t\t\t\t<img className=\"img-responsive\" alt=\"sidewalk-preview\" src={this.state.currentSidewalk.lastImage.url} />\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\timageSection = <h4>There are no uploaded images for this sidewalk.</h4>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h3 className=\"streetNameSection\">\r\n\t\t\t\t\t{this.state.currentSidewalk.address}\r\n\t\t\t\t</h3>\r\n\t\t\t\t<hr />\r\n\t\t\t\t{imageSection}\r\n\t\t\t\t<hr />\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tThe average pedestrian velocity on this sidewalk is {this.state.currentSidewalk.averageVelocity} metres per second.\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderUploadImageComponent() {\r\n\t\treturn <SidewalkImageDetailsComponent onOpenImages={this.props.onOpenImages} />;\r\n\t}\r\n\r\n\t_formatRating(value) {\r\n\t\treturn value && value.toFixed(2);\r\n\t}\r\n\r\n\t/**\r\n\t * Hendles change of user rating\r\n\t */\r\n\tchangeAccessibility = (event, accessibilityValue) => {\r\n\t\tthis.setState({ accessibilityValue });\r\n\t};\r\n\t\r\n\tChangeConnectivity = (event, connectivityValue) => {\r\n\t\tthis.setState({ connectivityValue });\r\n\t};\r\n\r\n\tchangeComfort = (event, comfortValue) => {\r\n\t\tthis.setState({ comfortValue });\r\n\t};\r\n\r\n\tchangeSafety = (event, safetyValue ) => {\r\n\t\tthis.setState({ safetyValue });\r\n\t};\r\n\r\n\tchangeSecurity = (event, securityValue) => {\r\n\t\tthis.setState({ securityValue });\r\n\t};\r\n\r\n\t/**\r\n\t * Handles changes when rating button is clicked\r\n\t */\r\n\r\n\thandleClickOpen = () => {\r\n\t\tthis.setState({ open: true });\r\n\t  };\r\n\r\n\t/**\r\n\t * Handles changes when close rating button is clicked\r\n\t */\r\n\thandleClose = () => {\r\n\t\tthis.setState({ open: false });\r\n\t};\r\n\r\n\t/**\r\n\t * Handles changes when submit rating button is clicked\r\n\t */\r\n\t_handleSubmitRating = (e) => {\r\n\t\tActions.uploadRatings(\r\n\t\t\tthis.state.accessibilityValue,\r\n\t\t\tthis.state.comfortValue,\r\n\t\t\tthis.state.connectivityValue,\r\n\t\t\tthis.state.safetyValue,\r\n\t\t\tthis.state.securityValue);\r\n\t\tthis.setState({\r\n\t\t\taccessibilityValue: 3, \r\n\t\t\tconnectivityValue: 3,\r\n\t\t\tcomfortValue: 3,\r\n\t\t\tsafetyValue: 3,\r\n\t\t\tsecurityValue: 3,\r\n\t\t\topen: false \r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * handles rendering the ratings on the drawer\r\n\t */\r\n\trenderRatings() {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst { accessibilityValue } = this.state;\r\n\t\tconst { connectivityValue } = this.state;\r\n\t\tconst { comfortValue } = this.state;\r\n\t\tconst { safetyValue } = this.state;\r\n\t\tconst { securityValue } = this.state;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div >\r\n\t\t\t\t<Button bsStyle=\"primary\" onClick={this.handleClickOpen}>Rate this sidewalk</Button>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\t//className=\"dialogFormat\"\r\n\t\t\t\t\topen={this.state.open}\r\n\t\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\t\taria-labelledby=\"form-dialog-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Rate Sidewalk</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<h5> Accessibility </h5>\r\n\t\t\t\t\t\t<div className=\"ratingSlider\">\r\n\t\t\t\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\t\t\tclasses={{ container: classes.slider }}\r\n\t\t\t\t\t\t\t\t\tvalue={accessibilityValue}\r\n\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\tmax={5}\r\n\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\tonChange={this.changeAccessibility}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{accessibilityValue}/5\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<h5> Connectivity </h5>\r\n\t\t\t\t\t\t<div className=\"ratingSlider\">\r\n\t\t\t\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\t\t\tclasses={{ container: classes.slider }}\r\n\t\t\t\t\t\t\t\t\tvalue={connectivityValue}\r\n\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\tmax={5}\r\n\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\tonChange={this.ChangeConnectivity}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{connectivityValue}/5\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<h5> Comfort </h5>\r\n\t\t\t\t\t\t<div className=\"ratingSlider\">\r\n\t\t\t\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\t\t\tclasses={{ container: classes.slider }}\r\n\t\t\t\t\t\t\t\t\tvalue={comfortValue}\r\n\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\tmax={5}\r\n\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\tonChange={this.changeComfort}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{comfortValue}/5\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<h5> Physical Safety </h5>\r\n\t\t\t\t\t\t<div className=\"ratingSlider\">\r\n\t\t\t\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\t\t\tclasses={{ container: classes.slider }}\r\n\t\t\t\t\t\t\t\t\tvalue={safetyValue}\r\n\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\tmax={5}\r\n\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\tonChange={this.changeSafety}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{safetyValue}/5\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<h5> Sense of Security </h5>\r\n\t\t\t\t\t\t<div className=\"ratingSlider\">\r\n\t\t\t\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\t\t\tclasses={{ container: classes.slider }}\r\n\t\t\t\t\t\t\t\t\tvalue={securityValue}\r\n\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\tmax={5}\r\n\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\tonChange={this.changeSecurity}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{securityValue}/5\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.handleClose}>\r\n\t\t\t\t\t\t\tCancel\r\n            \t\t\t</Button>\r\n\t\t\t\t\t\t<Button bsStyle=\"primary\" onClick={this._handleSubmitRating}>\r\n\t\t\t\t\t\t\tSubmit\r\n            \t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\r\n\r\n\t\t\t\t<h4>{this.state.currentSidewalk.totalRatings} people have rated this sidewalk.</h4>\r\n\t\t\t\t\r\n\t\t\t\t<hr />\r\n\t\t\t\t<h4>Overall: {this._formatRating(this.state.currentSidewalk.overallRating)}</h4>\r\n\t\t\t\t<h4>Accessibility: {this._formatRating(this.state.currentSidewalk.accessibility)}</h4>\r\n\t\t\t\t<h4>Connectivity: {this._formatRating(this.state.currentSidewalk.connectivity)}</h4>\r\n\t\t\t\t<h4>Comfort: {this._formatRating(this.state.currentSidewalk.comfort)}</h4>\r\n\t\t\t\t<h4>Physical Safety: {this._formatRating(this.state.currentSidewalk.physicalSafety)}</h4>\r\n\t\t\t\t<h4>Sense of Security: {this._formatRating(this.state.currentSidewalk.senseOfSecurity)}</h4>\r\n\t\t\t</div >\r\n\t\t);\r\n\t}\r\n\r\n\trenderComments() {\r\n\t\treturn <CommentsListComponent />;\r\n\t}\r\n\r\n\r\n\trenderPedestrianData() {\r\n\t\tif (this.state.currentSidewalk.mobilityTypeDistribution.length === 0) {\r\n\t\t\treturn <h4>No pedestrian data has been recorded for this sidewalk</h4>;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<PedestrianDataComponent activities={this.state.currentSidewalk.mobilityTypeDistribution} />\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * handles rendering the components on the drawer\r\n\t */\r\n\trenderDrawerDetails() {\r\n\t\tif (!this.state.currentSidewalk) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"sidewalkDrawer\">\r\n\t\t\t\t{this.renderExpansionPanel(\"Summary\", this.renderSummaryDetails(), true)}\r\n\t\t\t\t{this.renderExpansionPanel(\"Images\", this.renderUploadImageComponent())}\r\n\t\t\t\t{this.renderExpansionPanel(\"Ratings\", this.renderRatings())}\r\n\t\t\t\t{this.renderExpansionPanel(\"Comments\", this.renderComments())}\r\n\t\t\t\t{this.renderExpansionPanel(\"Pedestrian Data\", this.renderPedestrianData())}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div tabIndex={0} onKeyDown={this._handleKeyDown} ref={this.selfRef} className=\"noOutlineDiv\">\r\n\t\t\t\t<Drawer open={this.props.visible} anchor=\"right\" variant=\"temporary\">\r\n\t\t\t\t\t<CloseIcon onClick={this._handleClose} className=\"closeButton\" />\r\n\t\t\t\t\t{this.renderDrawerDetails()}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport default withStyles(styles)(SidewalkDetailsView);","import React from \"react\";\r\nimport InfiniteLoader from \"react-virtualized/dist/commonjs/InfiniteLoader\";\r\nimport List from \"react-virtualized/dist/commonjs/List\";\r\n\r\nexport default class ImageDisplayList extends React.PureComponent {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.listRef = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentWillReceiveProps(){\r\n\t\tthis.listRef.current.forceUpdateGrid();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst loadedCount = (this.props.hasNextPage && !this.props.isNextPageLoading) ? this.props.loadedItemCount + 1 : this.props.loadedItemCount;\r\n\t\treturn (\r\n\t\t\t<InfiniteLoader\r\n\t\t\t  isRowLoaded={this.props.isRowLoaded}\r\n\t\t\t  loadMoreRows={this.props.loadMoreRows}\r\n\t\t\t  rowCount={loadedCount}>\r\n\t\t\t  {({onRowsRendered}) => (\r\n\t\t\t\t\t<List\r\n\t\t\t\t\t  ref={this.listRef}\r\n\t\t\t\t\t  height={1000}\r\n\t\t\t\t\t  onRowsRendered={onRowsRendered}\r\n\t\t\t\t\t  rowCount={loadedCount}\r\n\t\t\t\t\t  rowHeight={200}\r\n\t\t\t\t\t  rowRenderer={this.props.rowRenderer}\r\n\t\t\t\t\t  width={250}\r\n\t\t\t\t\t  style={{outline: \"none\"}}\r\n\t\t\t\t\t/>\r\n\t\t\t  )}\r\n\t\t\t</InfiniteLoader>\r\n\t\t);\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport LoaderComponent from \"../misc-components/LoaderComponent\";\r\nimport ImageDisplayList from \"./ImageDisplayList\";\r\nimport MasonryInfiniteScroller from \"react-masonry-infinite\";\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n/**\r\n * This component handles the view where the user can see all of the images posted to a sidewalk\r\n */\r\nexport default class InfiniteImageGallery extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentImageIndex: 0\r\n\t\t};\r\n\t\t//this.selfRef = React.createRef();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Handles an image being clicked\r\n\t * @param {number} index - the index of the image that was just clicked\r\n\t */\r\n\t_onImageClicked = (index) => {\r\n\t\tthis.setState({\r\n\t\t\tcurrentImageIndex: index\r\n\t\t});\r\n\t\tif(this.props.getImageIndex !== undefined){\r\n\t\t\tthis.props.getImageIndex(index);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets whether the specified item is loaded\r\n\t * @param {number} index - the index of the item in the list of all loaded items\r\n\t * @return {boolean} - whether the specified item is loaded\r\n\t */\r\n\t_isRowLoaded = ({index}) => {\r\n\t\treturn Boolean(this.props.loadedImages[index]);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Loads more items\r\n\t * @param {number} startIndex - the starting index of new items to load\r\n\t * @param {number} stopIndex - the ending index of new items to load\r\n\t */\r\n\t_loadMoreRows = ({startIndex, stopIndex}) => {\r\n\t\t// TODO: remove this if statement if using drawer\r\n\t\tif (!startIndex) {\r\n\t\t\tstartIndex = this.props.loadedImages.length;\r\n\t\t\tstopIndex = startIndex + 1;\r\n\t\t}\r\n\t\tthis.props.loadMoreData(startIndex, stopIndex + 4);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Renders the specified item\r\n\t * @param {number} index - the index of the item in the list of loaded items\r\n\t * @param {*} key - the unique key of this item\r\n\t * @param {Object} style - the object's div style to render\r\n\t * @return {JSX} - the item to render\r\n\t */\r\n\t_rowRenderer = ({index, key, style}) => {\r\n\t\tlet content;\r\n\t\tif (this._isRowLoaded({index})) {\r\n\t\t\tcontent = (\r\n\t\t\t\t<div className={this.state.currentImageIndex === index ? \"infiniteImageRowSelected\" : \"infiniteImageRowUnselected\"}>\r\n\t\t\t\t\t<Card className=\"clickableItem\">\r\n\t\t\t\t\t\t{this.props.renderAboveImage && this.props.renderAboveImage(this.state.currentImageIndex === index, this.props.loadedImages[index])}\r\n\t\t\t\t\t\t<img onClick={() => {this._onImageClicked(index)}} className=\"img-responsive fillAvailable\" alt=\"uploaded\" src={this.props.loadedImages[index].url} />\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tcontent = <LoaderComponent />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"infiniteImageListRow\" key={key} style={style}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles a key being pressed\r\n\t * @param {Object} event - the event representing the key press\r\n\t */\r\n\t_handleKeyDown = (event) => {\r\n\t\tif (!this.props.visible) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n\t\t\tif (this.state.currentImageIndex === this.props.loadedImages.length - 1) {\r\n\t\t\t\tif (!this.props.hasNextPage) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._loadMoreRows({\r\n\t\t\t\t\tstartIndex: this.state.currentImageIndex + 1,\r\n\t\t\t\t\tstopIndex: this.state.currentImageIndex + 1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentImageIndex: this.state.currentImageIndex + 1\r\n\t\t\t});\r\n\t\t} else if ((event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") && this.state.currentImageIndex > 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentImageIndex: this.state.currentImageIndex - 1\r\n\t\t\t});\r\n\t\t} else if (event.key === \"Escape\") {\r\n\t\t\tthis.props.onClose();\r\n\t\t}\r\n\t};\r\n\t\r\n\trenderSelectedImage() {\r\n\t\t/*if (this.props.loadedImages[this.state.currentImageIndex]) {\r\n\t\t\treturn (\r\n\t\t\t\t<img className=\"backgroundImage\"\r\n\t\t\t\t\talt=\"selected\"\r\n\t\t\t\t\tsrc={this.props.loadedImages[this.state.currentImageIndex].url} />\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn <LoaderComponent />;*/\r\n\t\t\r\n\t\tlet content;\r\n\t\tif (this.props.loadedImages[this.state.currentImageIndex]) {\r\n\t\t\tcontent = (\r\n\t\t\t\t<img className=\"backgroundImage\"\r\n\t\t\t\t\talt=\"selected\"\r\n\t\t\t\t\tsrc={this.props.loadedImages[this.state.currentImageIndex].url} />\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tcontent = <LoaderComponent />;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"selectedImageWrapper\">\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tdisplayImageDrawer() {\r\n\r\n\t\t\tconst ImageDrawer = withStyles(this.props.classes)(Drawer);\r\n\r\n\t\t\treturn(\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ImageDrawer open={this.props.visible}\r\n\t\t\t\t\t\tvariant=\"persistent\"\r\n\t\t\t\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\t\t\t\tanchor=\"left\"\r\n\t\t\t\t\t\t\tSlideProps={{\r\n\t\t\t\t\t\t\t\tunmountOnExit: true\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.renderSelectedImage()}\r\n\t\t\t\t\t</ImageDrawer>\r\n\t\t\t\t\t<ImageDrawer open={this.props.visible}\r\n\t\t\t\t\t\t\tvariant=\"persistent\"\r\n\t\t\t\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\t\t\t\tanchor=\"right\"\r\n\t\t\t\t\t\t\tSlideProps={{\r\n\t\t\t\t\t\t\t\tunmountOnExit: true\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<CloseIcon className=\"closeButton\" onClick={this.props.onClose} />\r\n\t\t\t\t\t\t<ImageDisplayList isRowLoaded={this._isRowLoaded}\r\n\t\t\t\t\t\t\tloadMoreRows={this.props.isNextPageLoading ? () => {} : this._loadMoreRows}\r\n\t\t\t\t\t\t\trowRenderer={this._rowRenderer}\r\n\t\t\t\t\t\t\thasNextPage={this.props.hasNextPage}\r\n\t\t\t\t\t\t\tloadedItemCount={this.props.loadedImages.length}\r\n\t\t\t\t\t\t\tisNextPageLoading={this.props.isNextPageLoading}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ImageDrawer>\r\n\t\t\t\t</div> \r\n\t\t\t);\r\n\t\t}\r\n\t\r\n\trender() {\r\n\t\t// TODO: decide which design to use\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"noOutlineDiv\" tabIndex={0} onKeyDown={this._handleKeyDown}>\r\n\t\t\t\t{this.displayImageDrawer()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t// TODO: set rendered image width to 200 for this\r\n\t\t/*return (\r\n\t\t\t<div tabIndex={0} onKeyDown={this._handleKeyDown} ref={this.selfRef} className=\"noOutlineDiv\" >\r\n\t\t\t\t{this.renderSelectedImage()}\r\n\t\t\t\t<MasonryInfiniteScroller\r\n\t\t\t\t\thasMore={this.props.hasNextPage}\r\n\t\t\t\t\tloadMore={this.props.isNextPageLoading ? () => {} : this._loadMoreRows}\r\n\t\t\t\t\tsizes={[{ columns: 3, gutter: 0 },\r\n\t\t\t\t\t{ mq: '768px', columns: 4, gutter: 0 },\r\n\t\t\t\t\t{ mq: '1024px', columns: 5, gutter: 0 }]}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.loadedImages.map((id, index) =>\r\n\t\t\t\t\t\t\tthis._rowRenderer({index: index, key: index, style: {height: 200, width: 200}})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</MasonryInfiniteScroller>\r\n\t\t\t\t{this.props.isNextPageLoading && <LoaderComponent />}\r\n\t\t\t</div>\r\n\t\t);*/\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport LoaderComponent from \"../../misc-components/LoaderComponent\";\r\nimport ConfirmationModal from \"../../misc-components/ConfirmationModal\";\r\n\r\nimport Store from \"../../admin/AdminStore\";\r\nimport Actions from \"../../admin/AdminActions\";\r\n\r\n/**\r\n * This component renders a modal that allows an administrator to delete a user's image on a sidewalk\r\n */\r\nexport default class ImageDeletionModal extends Reflux.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = Store;\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user closing the modal\r\n\t */\r\n\t_cancel = () => {\r\n\t\tthis.props.onClose();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user selecting the confirm button\r\n\t */\r\n\t_confirm = () => {\r\n\t\tActions.deleteImage(this.props.sidewalkId, this.props.image.id, (success) => {\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.props.onClose(true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n\trenderModalBody() {\r\n\t\tif (!this.props.visible) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isDeletingImage && <LoaderComponent />\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"selectedImagePreview\">\r\n\t\t\t\t\t<img className=\"img-responsive\"\r\n\t\t\t\t\t\talt=\"selected\"\r\n\t\t\t\t\t\tsrc={this.props.image.url} />\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ConfirmationModal title=\"Are you sure you want to delete this image?\"\r\n\t\t\t\t\t\t\t   body={this.renderModalBody()}\r\n\t\t\t\t\t\t\t   onCancel={this._cancel}\r\n\t\t\t\t\t\t\t   onConfirm={this._confirm}\r\n\t\t\t\t\t\t\t   visible={this.props.visible}\r\n\t\t\t\t\t\t\t   disabledConfirm={this.state.isDeletingImage}\r\n\t\t    />\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport InfiniteImageGallery from \"../../images/InfiniteImageGallery\";\r\nimport SidewalkStore from \"../SidewalkStore\";\r\nimport SidewalkActions from \"../SidewalkActions\";\r\nimport AdminStore from \"../../admin/AdminStore\";\r\nimport ImageDeletionModal from \"./ImageDeletionModal\";\r\n\r\n/**\r\n * This component handles the view where the user can see all of the images posted to a sidewalk\r\n */\r\nexport default class SidewalkUploadedImagesGallery extends Reflux.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.stores = [SidewalkStore, AdminStore];\r\n\t\tthis.state = {\r\n\t\t\tisNextPageLoading: false,\r\n\t\t\tmodalOpened: false\r\n\t\t};\r\n\t\tthis.galleryRef = React.createRef();\r\n\t}\r\n\r\n\t/**\r\n\t * Loads more images to display\r\n\t * @param {number} startIndex - the starting index of new items to load\r\n\t * @param {number} stopIndex - the ending index of new items to load\r\n\t */\r\n\t_loadMoreImages = (startIndex, stopIndex) => {\r\n\t\tthis.setState({\r\n\t\t\tisNextPageLoading: true\r\n\t\t});\r\n\t\tSidewalkActions.loadUploadedImages(startIndex, stopIndex, () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisNextPageLoading: false\r\n\t\t\t\t});\r\n\t\t\t}, 50);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the delete image button being clicked\r\n\t */\r\n\t_onDeleteImageClicked = (image) => {\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: true,\r\n\t\t\tselectedImage: image\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the modal asking the user to confirm their deletion attempt being closed\r\n\t * @param {boolean} deleted - whether the image was successfully deleted or not\r\n\t */\r\n\t_onModalClosed = (deleted) => {\r\n\t\tif (deleted) {\r\n\t\t\tSidewalkActions.removeLoadedImage(this.state.selectedImage, (index) => {\r\n\t\t\t\tthis.galleryRef.current._onImageClicked(index - 1);\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.onClose();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: false,\r\n\t\t\tselectedImage: null\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Renders the button allowing the user to delete the currently selected image\r\n\t * @param {boolean} selected - whether the image to render the button over is selected or not\r\n\t * @param {Object} image - details about the image object\r\n\t * @return - null if the image is not selected, or the close button if the image is selected\r\n\t */\r\n\t_renderDeleteButton = (selected, image) => {\r\n\t\tif (!selected || !this.state.isLoggedIn) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\treturn <CloseIcon className=\"closeButton\" onClick={() => {this._onDeleteImageClicked(image)}} />\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tif (!this.state.currentSidewalk) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<InfiniteImageGallery \r\n\t\t\t\t\tclasses={{}}\r\n\t\t\t\t\tloadedImages={this.state.loadedUserImages}\r\n\t\t\t\t\thasNextPage={this.state.hasNextImagesPage}\r\n\t\t\t\t\tloadMoreData={this._loadMoreImages}\r\n\t\t\t\t\tvisible={this.props.visible}\r\n\t\t\t\t\tisNextPageLoading={this.state.isNextPageLoading}\r\n\t\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\t\trenderAboveImage={this._renderDeleteButton}\r\n\t\t\t\t\tref={this.galleryRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<ImageDeletionModal visible={this.props.visible && this.state.modalOpened}\r\n\t\t\t\t\t\t\t\t\tonClose={this._onModalClosed}\r\n\t\t\t\t\t\t\t\t\tsidewalkId={this.state.currentSidewalk.id}\r\n\t\t\t\t\t\t\t\t\timage={this.state.selectedImage} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\n\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\n/**\r\n * This component renders a temporary message to the user that will disappear after a few seconds\r\n */\r\nexport default class BaseAlertComponent extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {}\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tthis.props.onClose();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Snackbar\r\n\t\t\t  anchorOrigin={{\r\n\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\thorizontal: \"left\",\r\n\t\t\t  }}\r\n\t\t\t  open={this.props.visible}\r\n\t\t\t  autoHideDuration={4000}\r\n\t\t\t  onClose={this._handleClose}\r\n\t\t\t>\r\n\t\t\t\t<SnackbarContent\r\n\t\t\t\t  className={this.props.alertContentClassName}\r\n\t\t\t\t  aria-describedby=\"client-snackbar\"\r\n\t\t\t\t  message={\r\n\t\t\t\t\t<div id=\"client-snackbar\" className=\"alertBody\">\r\n\t\t\t\t\t\t{this.props.icon}\r\n\t\t\t\t\t  <span className=\"alertMessage\">\r\n\t\t\t\t\t\t  {this.props.message}\r\n\t\t\t\t\t  </span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t  }\r\n\t\t\t\t  action={[\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t  key=\"close\"\r\n\t\t\t\t\t  aria-label=\"Close\"\r\n\t\t\t\t\t  color=\"inherit\"\r\n\t\t\t\t\t  onClick={this._handleClose}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t  <CloseIcon />\r\n\t\t\t\t\t</IconButton>,\r\n\t\t\t\t  ]}\r\n\t\t\t\t/>\r\n\t\t\t</Snackbar>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ErrorIcon from \"@material-ui/icons/Error\";\r\n\r\nimport BaseAlertComponent from \"./BaseAlertComponent\";\r\n\r\n/**\r\n * This component renders an error message to the user that will disappear after a few seconds\r\n */\r\nexport default class ErrorAlertComponent extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<BaseAlertComponent onClose={this.props.onClose}\r\n\t\t\t\t\t\t\t\tvisible={this.props.visible}\r\n\t\t\t\t\t\t\t\tmessage={this.props.message}\r\n\t\t\t\t\t\t\t\talertContentClassName=\"errorAlert\"\r\n\t\t\t\t\t\t\t\ticon={<ErrorIcon className=\"alertIcon\" />}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../SidewalkStore\";\r\nimport Actions from \"../SidewalkActions\";\r\nimport ErrorAlertComponent from \"../../misc-components/ErrorAlertComponent\";\r\n\r\n/**\r\n * This component renders the error message that is displayed when an image upload fails\r\n */\r\nexport default class UploadedImageErrorComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tActions.dismissImageErrorMessage();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.uploadedImageError}\r\n\t\t\t\t\t\t\t\t message=\"An error occurred while uploading the image.\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\n\r\nimport BaseAlertComponent from \"./BaseAlertComponent\";\r\n\r\n/**\r\n * This component renders a successful action message to the user that will disappear after a few seconds\r\n */\r\nexport default class SuccessAlertComponent extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<BaseAlertComponent onClose={this.props.onClose}\r\n\t\t\t\t\t\t\t\tvisible={this.props.visible}\r\n\t\t\t\t\t\t\t\tmessage={this.props.message}\r\n\t\t\t\t\t\t\t\talertContentClassName=\"successAlert\"\r\n\t\t\t\t\t\t\t\ticon={<CheckCircleIcon className=\"alertIcon\" />}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../SidewalkStore\";\r\nimport Actions from \"../SidewalkActions\";\r\nimport SuccessAlertComponent from \"../../misc-components/SuccessAlertComponent\";\r\n\r\n/**\r\n * This component renders the error message that is displayed when an image upload succeeds\r\n */\r\nexport default class UploadedImageSuccessComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tActions.dismissImageSuccessMessage();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<SuccessAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.uploadImageSucceeded}\r\n\t\t\t\t\t\t\t\t message=\"Your image was uploaded. It must be approved before it is visible.\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../admin/AdminStore\";\r\nimport Actions from \"../admin/AdminActions\";\r\nimport SuccessAlertComponent from \"../misc-components/SuccessAlertComponent\";\r\n\r\n/**\r\n * This component renders the error message that is displayed when a comment delete attempt succeeds\r\n */\r\nexport default class CommentDeleteSuccessComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tActions.dismissCommentSuccessMessage();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<SuccessAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.successfullyDeletedComment}\r\n\t\t\t\t\t\t\t\t message=\"The comment was successfully deleted.\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../admin/AdminStore\";\r\nimport Actions from \"../admin/AdminActions\";\r\nimport ErrorAlertComponent from \"../misc-components/ErrorAlertComponent\";\r\n\r\n/**\r\n * This component renders the error message that is displayed when a comment delete attempt fails\r\n */\r\nexport default class CommentDeleteErrorComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tActions.dismissCommentErrorMessage();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.failedDeleteComment}\r\n\t\t\t\t\t\t\t\t message=\"An error occurred while deleting the comment.\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../../admin/AdminStore\";\r\nimport Actions from \"../../admin/AdminActions\";\r\nimport ErrorAlertComponent from \"../../misc-components/ErrorAlertComponent\";\r\n\r\n/**\r\n * This component renders the error message that is displayed when an image deletion fails\r\n */\r\nexport default class ImageDeleteErrorComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tActions.dismissImageErrorMessage();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.failedDeleteImage}\r\n\t\t\t\t\t\t\t\t message=\"An error occurred while deleting the image.\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"../../admin/AdminStore\";\r\nimport Actions from \"../../admin/AdminActions\";\r\nimport SuccessAlertComponent from \"../../misc-components/SuccessAlertComponent\";\r\n\r\n/**\r\n * This component renders the error message that is displayed when an image deletion succeeds\r\n */\r\nexport default class ImageDeleteSuccessComponent extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n\t\tActions.dismissImageSuccessMessage();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<SuccessAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.successfullyDeletedImage}\r\n\t\t\t\t\t\t\t\t message=\"The image has been successfully deleted.\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\n\r\nimport UploadedImageErrorComponent from \"../sidewalk/images/UploadedImageErrorComponent\";\r\nimport UploadedImageSuccessComponent from \"../sidewalk/images/UploadedImageSuccessComponent\";\r\nimport CommentDeleteSuccessComponent from \"../sidewalk/CommentDeleteSuccessComponent\";\r\nimport CommentDeleteErrorComponent from \"../sidewalk/CommentDeleteErrorComponent\";\r\nimport ImageDeleteErrorComponent from \"../sidewalk/images/ImageDeleteErrorComponent\";\r\nimport ImageDeleteSuccessComponent from \"../sidewalk/images/ImageDeleteSuccessComponent\";\r\n\r\n/**\r\n * Renders any alerts that the user may see\r\n */\r\nexport default class AlertsContainer extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<UploadedImageErrorComponent />\r\n\t\t\t\t<UploadedImageSuccessComponent />\r\n\t\t\t\t<CommentDeleteSuccessComponent />\r\n\t\t\t\t<CommentDeleteErrorComponent />\r\n\t\t\t\t<ImageDeleteErrorComponent />\r\n\t\t\t\t<ImageDeleteSuccessComponent />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n}","import React from \"react\";\r\nimport { Component } from 'reflux';\r\n\r\nimport SummaryMapView from \"./SummaryMapView\";\r\nimport SidewalkDetailsView from \"../sidewalk/SidewalkDetailsView\";\r\nimport SidewalkUploadedImagesGallery from \"../sidewalk/images/SidewalkUploadedImagesGallery\";\r\nimport AlertsContainer from \"./AlertsContainer\";\r\n\r\nimport MapStore from \"./MapStore\";\r\nimport MapActions from \"./MapActions\";\r\n\r\nexport default class MapDashboard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tviewingImages: false\r\n\t\t};\r\n\t\tthis.store = MapStore;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (!this.state.sidewalks || this.state.sidewalks.length === 0) {\r\n\t\t\tMapActions.loadAllSidewalks();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Opens up the uploaded images view\r\n\t */\r\n\t_viewImages = () => {\r\n\t\tMapActions.setDrawerOpened(false);\r\n\t\tthis.setState({\r\n\t\t\tviewingImages: true\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Closes the uploaded images view\r\n\t * @param {boolean} reopenDrawer - whether the drawer should be reopened or not\r\n\t */\r\n\t_closeImages = (reopenDrawer = true) => {\r\n\t\tif (reopenDrawer) {\r\n\t\t\tMapActions.setDrawerOpened(true);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tviewingImages: false\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Handles the user closing the drawer\r\n\t */\r\n\t_onCloseDrawer = () => {\r\n\t\tthis._closeImages(false);\r\n\t\tMapActions.setDrawerOpened(false);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<SummaryMapView />\r\n\t\t\t\t<SidewalkDetailsView\r\n\t\t\t\t\tvisible={this.state.sidewalkSelected}\r\n\t\t\t\t\tonClose={this._onCloseDrawer}\r\n\t\t\t\t\tselectedSidewalkDetails={this.state.selectedSidewalkDetails}\r\n\t\t\t\t\tonOpenImages={this._viewImages}\r\n\t\t\t\t/>\r\n\t\t\t\t<SidewalkUploadedImagesGallery onClose={this._closeImages} visible={this.state.viewingImages} />\r\n\t\t\t\t<AlertsContainer />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React from \"react\";\r\n\r\n/**\r\n * This component renders the page that details what the site is about\r\n */\r\nexport default class AboutPageView extends React.Component {\r\n\r\n\t/**\r\n\t * Renders a topic in the about page\r\n\t * @param {String} title - the title of the topic\r\n\t * @param {String} content - the content describing the topic\r\n\t */\r\n\trenderCategory(title, content) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h3>{title}</h3>\r\n\t\t\t\t<p>{content}</p>\r\n\t\t\t\t<hr />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"padding25\">\r\n\t\t\t\t{this.renderCategory(\"What is this website about?\", \r\n\t\t\t\t\t`This website was made for the purpose of allowing the citizens of Edmonton to discuss \r\n\t\t\t\t\ttheir experiences on sidewalks across the city with other people. As a user of this site, you are able to select any\r\n\t\t\t\t\tsidewalk in the city from the map displayed on the home page. By selecting a sidewalk, you will be\r\n\t\t\t\t\tshown what other people think about that particular sidewalk, through ratings, images, and comments.\r\n\t\t\t\t\tYou can leave your own ratings and comments on the sidewalk, as well as upload any image that you\r\n\t\t\t\t\tfeel is relevant to the sidewalk.`)}\r\n\t\t\t\t{this.renderCategory(\"Who will use the results?\", `\r\n\t\t\t\tThe results will primarily be used by two parties. The first one is government officials, so they can see\r\n\t\t\t\twhat sidewalks in the city are in need of improvement the most. STEPS researchers will also use the data collected\r\n\t\t\t\tfrom this website so that they can analyze it to get a bigger picture of the overall state of sidewalks\r\n\t\t\t\tin Edmonton.\r\n\t\t\t\t`)}\r\n\t\t\t\t{this.renderCategory(\"How can I get involved?\", `\r\n\t\t\t\tAll you need to do to be involved with the STEPS application is to leave your feelings and thoughts\r\n\t\t\t\tabout particular sidewalks. You can rate any sidewalk you want, comment on it, or even upload an image to it.\r\n\t\t\t\t`)}\r\n\t\t\t\t{this.renderCategory(\"Privacy Policy\", `\r\n\t\t\t\tAll of the data collected on this site will be used purely for research purposes. We will never sell any of the\r\n\t\t\t\tdata we collect to third parties, and nothing that you upload to the site will be directly linked back to you.\r\n\t\t\t\tAll of your interactions with the site will be anonymous.\r\n\t\t\t\t`)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\n\r\nimport InfiniteImageGallery from \"../images/InfiniteImageGallery\";\r\nimport AdminStore from \"./AdminStore\";\r\nimport AdminActions from \"./AdminActions\";\r\n\r\nimport SuccessAlertComponent from \"../misc-components/SuccessAlertComponent\";\r\nimport ErrorAlertComponent from \"../misc-components/ErrorAlertComponent\";\r\n\r\n/**\r\n * This component renders the gallery of all uploaded images that have yet to be approved or rejected\r\n */\r\nexport default class AdminDrawerImageGallery extends Reflux.Component {\r\n\t\r\n    constructor(props) {\r\n        super(props);\r\n        this.store = AdminStore;\r\n        this.state = {\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n\t\tAdminActions.getUnapprovedImages(0, 5);\r\n    }\r\n    \r\n\t_dismissNotifications = () => {\r\n\t\tAdminActions.dismissImageApprovalNotification();\r\n\t\tAdminActions.dismissImageRejectionNotification();\r\n\t};\r\n\t\r\n\tloadMoreImages = (startIndex, stopIndex) => {\r\n\t\tthis.setState({\r\n\t\t\tisNextPageLoading: true\r\n\t\t});\r\n        AdminActions.getUnapprovedImages(startIndex, stopIndex, () => {\r\n            setTimeout(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisNextPageLoading: false\r\n\t\t\t\t});\r\n\t\t\t}, 50);\r\n        });\r\n    };\r\n\r\n\t/**\r\n\t * Handles the user approving an image\r\n\t * @param {Object} image - the image to approve\r\n\t */\r\n    _onAcceptImage = (image) => {\r\n        AdminActions.handlePendingImages(true, image.id);\r\n    }\r\n\r\n\t/**\r\n\t * Handles the user rejecting an image\r\n\t * @param {Object} image - the image to reject\r\n\t */\r\n    _onRejectImage = (image) => {\r\n        AdminActions.handlePendingImages(false, image.id);\r\n    }\r\n\r\n\t/**\r\n\t * Renders the approve and reject buttons for the selected image\r\n\t * @param {boolean} selected - whether the image to render the button over is selected or not\r\n\t * @param {Object} image - details about the image object\r\n\t * @return - null if the image is not selected, or the buttons if the image is selected\r\n\t */\r\n\t_renderResponseButtons = (selected, image) => {\r\n\t\tif (!selected || !this.state.isLoggedIn) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<CloseIcon className=\"closeButton\" onClick={() => {this._onRejectImage(image)}} />\r\n\t\t\t\t<CheckCircleIcon className=\"acceptButton\" onClick={() => {this._onAcceptImage(image)}} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\t\r\n\trender() {\r\n        if (!this.state.pendingImages) {\r\n\t\t\treturn <h1>No images uploaded</h1>;\r\n\t\t}\r\n\t\t\r\n\t\tconst styles = {\r\n\t\t\tpaper: {\r\n\t\t\t\tmargin: \"65px 0px 0px 0px\"\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn (   \r\n\t\t\t<div>       \r\n\t\t\t\t<InfiniteImageGallery\r\n\t\t\t\t\tclasses={styles}\r\n\t\t\t\t\tloadedImages={this.state.pendingImages}\r\n\t\t\t\t\thasNextPage={this.state.hasMoreImages}\r\n\t\t\t\t\tloadMoreData={this.loadMoreImages}\r\n\t\t\t\t\tvisible={true}\r\n\t\t\t\t\tisNextPageLoading={this.state.isNextPageLoading}\r\n\t\t\t\t\trenderAboveImage={this._renderResponseButtons}\r\n\t\t\t\t>\r\n\t\t\t\t</InfiniteImageGallery>\r\n\t\t\t\t<SuccessAlertComponent onClose={this._dismissNotifications}\r\n\t\t\t\t\t\t visible={this.state.successfullyRespondedToImage}\r\n\t\t\t\t\t\t message=\"Your response has been recorded.\"\r\n\t\t\t\t/>\r\n\t\t\t\t<ErrorAlertComponent onClose={this._dismissNotifications}\r\n\t\t\t\t\t\t visible={this.state.failedToRespondToImage}\r\n\t\t\t\t\t\t message=\"An error occurred while recording your response.\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n    }\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {Link} from \"react-router-dom\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {SECONDARY_COLOUR, FONT_FAMILY} from \"../constants/ThemeConstants\";\r\n\r\nimport AdminStore from \"../admin/AdminStore\";\r\n\r\nconst styles = {\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginLeft: -12,\r\n\t\tmarginRight: 20,\r\n\t},\r\n\tbutton: {\r\n\t\tfontSize: 14,\r\n\t\t\"&:hover\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\t\"&:focus\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\tcolor: \"white\"\r\n\t},\r\n\ttitleButton: {\r\n\t\tfontSize: 18,\r\n\t\t\"&:hover\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\t\"&:focus\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\tcolor: \"white\",\r\n\t\tfontFamily: FONT_FAMILY\r\n\t}\r\n};\r\n\r\n/**\r\n * This component renders the global navigation bar at the top of the page\r\n */\r\nclass NavbarComponent extends Reflux.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = AdminStore;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<AppBar position=\"static\">\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Link to=\"/\"><Button color=\"inherit\" className={classes.titleButton}>STEPS </Button> </Link>\r\n\t\t\t\t\t\t<Link to=\"/about/\"><Button color=\"inherit\" className={classes.button}>  About </Button></Link>\r\n\t\t\t\t\t\t<Link to=\"/statistics/\"><Button color=\"inherit\" className={classes.button}> <Link to=\"/statistics/\"/> Statistics </Button></Link>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!this.state.isLoggedIn && <Link to=\"/login\"><Button color=\"inherit\" className={classes.button}> Login </Button> </Link>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.isLoggedIn && <Link to=\"/dashboard\"><Button color=\"inherit\" className={classes.button}>  Dashboard</Button></Link>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(NavbarComponent);","// import Reflux from \"reflux\";\r\nimport React from \"react\";\r\nimport { Component } from \"reflux\";\r\nimport md5 from \"md5\";\r\nimport { Button, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\r\nimport AdminActions from \"./AdminActions\";\r\nimport Store from \"./AdminStore\";\r\nimport SuccessAlertComponent from \"../misc-components/SuccessAlertComponent\";\r\nimport ErrorAlertComponent from \"../misc-components/ErrorAlertComponent\";\r\n\r\n/**\r\n * This component renders the page for admin Login\r\n */\r\nexport default class AdminLogin extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.store = Store;\r\n        this._validCredentialAdminPage = this._validCredentialAdminPage.bind(this)\r\n\t\tthis.state = {\r\n            enteredName: \"\",\r\n            enteredPassword: \"\"\r\n        };\r\n    }\r\n    \r\n    /**\r\n\t * Handles the user changing their email text value\r\n\t */\r\n\t_handleUserChange = (e) => {\r\n\t\tthis.setState({ \r\n            enteredName: e.target.value,\r\n\t\t});\r\n    }\r\n    \r\n    /**\r\n\t * Handles the user changing their email text value\r\n\t */\r\n    _handlePassChange = (e) => {\r\n\t\tthis.setState({ \r\n            enteredPassword: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n    _validateCredentials = (e) => {  \r\n        const userLength = this.state.enteredName.length\r\n        const passLength = this.state.enteredPassword.length\r\n        if (userLength === 0 || passLength === 0){\r\n            return \"error\"\r\n        } else {\r\n            return \"success\"\r\n        }\r\n    }\r\n\r\n    _handleSubmit = (e) => {\r\n        const hashpass = md5(String(this.state.enteredPassword))       \r\n        AdminActions.checkCredentials(String(this.state.enteredName), hashpass);\r\n\t\tthis.setState({\r\n            enteredName: \"\",\r\n            enteredPassword: \"\"\r\n        });\r\n    }\r\n    /**\r\n\t * Handles the component being closed\r\n\t */\r\n\t_handleClose = () => {\r\n        AdminActions.dismissLoginSuccess();\r\n        AdminActions.dismissLoginError();\r\n\t};\r\n\r\n    _validCredentialAdminPage = (e) => {\r\n        if(this.state.isLoggedIn){\r\n            return(\r\n                this.props.history.push('/dashboard')\r\n            )\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"loginContainer col-lg-4 col-md-6\">\r\n                <h3 className=\"adminTitleLogin\">Admin Login</h3>\r\n                <form>\r\n                <FormGroup \r\n                    controlId=\"username\" \r\n                    bsSize=\"small\">\r\n                <ControlLabel>Username</ControlLabel>\r\n                \r\n                <FormControl \r\n                    autoFocus type=\"username\" \r\n                    value={this.state.enteredName}\r\n                    onChange={this._handleUserChange}\r\n                    placeholder=\"Username\"/>\r\n                </FormGroup>\r\n                \r\n                <FormGroup \r\n                    controlId=\"password\" \r\n                    bsSize=\"small\">\r\n                \r\n                <ControlLabel>Password</ControlLabel>\r\n                <FormControl \r\n                    value={this.state.enteredPassword} \r\n                    onChange={this._handlePassChange}\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"/>\r\n                </FormGroup> \r\n                \r\n                {this._validCredentialAdminPage()}\r\n                <Button bsStyle=\"primary\" type=\"submit\" onClick = {this._handleSubmit} disabled={this._validateCredentials() === \"error\"}>Login</Button>\r\n                </form>\r\n                <SuccessAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.successfullyLoggedIn}\r\n\t\t\t\t\t\t\t\t message=\"Successfully Loggedin.\"/>\r\n                <ErrorAlertComponent onClose={this._handleClose}\r\n\t\t\t\t\t\t\t\t visible={this.state.failedToLogIn}\r\n\t\t\t\t\t\t\t\t message=\"Invalid Credentials\"/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"loadSummaryStatistics\"\r\n]);\r\n\r\nexport default Actions;","import Reflux from \"reflux\";\r\n\r\nimport Actions from \"./SummaryStatisticsActions\";\r\nimport RestUtil from \"../util/RestUtil\";\r\n\r\n/**\r\n * This store keeps track of the state of components that render information related to sidewalk summary statistics\r\n */\r\nexport default class SummaryStatisticsStore extends Reflux.Store {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\ttotalSidewalks: 0,\r\n\t\t\ttotalReviews: 0,\r\n\t\t\ttotalComments: 0,\r\n\t\t\taverageReviews: {},\r\n\t\t\ttotalImagesUploaded: 0,\r\n\t\t\tcontributionsByMonth: [],\r\n\t\t\tisLoading: false\r\n\t\t};\r\n\t\tthis.listenables = Actions;\r\n\t}\r\n\r\n\tonLoadSummaryStatistics() {\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\t\t// TODO: set correct endpoint\r\n\t\tRestUtil.sendGetRequest(\"sidewalk/2\").then((res) => {\r\n\t\t\tres.isLoading = false;\r\n\t\t\tthis.setState(...res);\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoading: false\r\n\t\t\t});\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\t\r\n}\r\n","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport Store from \"./SummaryStatisticsStore\";\r\nimport Actions from \"./SummaryStatisticsActions\";\r\n\r\nexport default class SummaryStatisticsView extends Reflux.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = Store;\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tActions.loadSummaryStatistics();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tif (this.state.isLoading) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div data-summary-stats>\r\n\t\t\t\t<p>Summary Statistics</p>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { Switch, Route, Router } from 'react-router-dom';\r\nimport './style/App.scss';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nimport MapDashboard from \"./map/MapDashboard\";\r\nimport AboutPageView from \"./misc-components/AboutPageView\";\r\nimport AdminPanelView from \"./admin/AdminPanelView\";\r\nimport NavbarComponent from \"./misc-components/NavbarComponent\";\r\nimport AdminLogin from \"./admin/AdminLogin\";\r\nimport SummaryStatisticsView from \"./summary/SummaryStatisticsView\";\r\n\r\nclass App extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <NavbarComponent />\r\n        <Switch>\r\n          <Route path=\"/about/\" component={AboutPageView} />\r\n          <Route path=\"/statistics\" component={SummaryStatisticsView} />\r\n          <Route path=\"/login\" component={AdminLogin} />\r\n          <Route path=\"/map/:id\" component={MapDashboard} />\r\n          <Route path=\"/dashboard\" component={AdminPanelView} />\r\n          <Route path=\"/\" component={MapDashboard} />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./style/index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport purple from \"@material-ui/core/colors/purple\";\r\nimport {SECONDARY_COLOUR} from \"./constants/ThemeConstants\";\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: purple,\r\n\t\tsecondary: {\r\n\t\t\tmain: SECONDARY_COLOUR,\r\n\t\t}\r\n\t},\r\n\ttypography: {\r\n\t\tuseNextVariants: true\r\n\t}\r\n});\r\n\r\nReactDOM.render(\r\n\t<BrowserRouter>\r\n\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t<App />\r\n\t\t</MuiThemeProvider>\r\n\t</BrowserRouter>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}