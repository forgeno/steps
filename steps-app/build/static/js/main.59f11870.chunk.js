(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{395:function(e,t,a){e.exports=a(892)},400:function(e,t,a){},402:function(e,t,a){},442:function(e,t){},444:function(e,t){},475:function(e,t){},476:function(e,t){},524:function(e,t){},526:function(e,t){},547:function(e,t){},892:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(37),l=a.n(i),o=(a(400),a(3)),r=a(4),c=a(7),u=a(5),m=a(6),d=a(901),h=a(900),p=(a(402),a(10)),g=a.n(p),f=g.a.createActions(["loadAllSidewalks","loadMapDetails","setDrawerOpened"]),b=a(76),v=a(229),y=a.n(v),w={url:"https://js.arcgis.com/4.9"},I=-113.499,S=53.5405,C=a(230),E=a.n(C),k=3145728,O=function(e){return"".concat("http://199.116.235.159:8000","/api/").concat(e,"/")},j=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"sendPostRequest",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({uri:O(e),headers:{"Content-Type":"application/json"},json:!0,method:"POST",body:t},a);return E.a.post(n)}},{key:"sendGetRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({uri:O(e),json:!0,qs:t},a);return E.a.get(n)}}]),e}(),_=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={sidewalks:[],sidewalkSelected:!1,longitude:I,latitude:S},e.listenables=f,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onLoadAllSidewalks",value:function(){var e=this;j.sendGetRequest("sidewalk").then(function(t){e.setState({sidewalks:t})}).catch(function(e){console.error(e)})}},{key:"onSetDrawerOpened",value:function(e){this.setState({sidewalkSelected:e})}},{key:"onLoadMapDetails",value:function(){var e=this;y.a.loadModules(["esri/Map","esri/views/MapView"],w).then(function(t){var a=t[0],n=t[1],s=new a({basemap:"dark-gray-vector"}),i=new n({map:s,container:"mapContainer",center:[e.state.longitude,e.state.latitude],zoom:15});return e.setState({map:s,view:i}),y.a.loadModules(["esri/layers/FeatureLayer","esri/PopupTemplate","esri/geometry/Circle","esri/Graphic","esri/core/watchUtils","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/layers/support/MapImage","esri/widgets/Legend","esri/widgets/Search"],w)}).then(function(t){var a=t[0],n=(t[1],t[2]),s=(t[3],t[4],t[5],t[6],t[7],t[8],t[9]),i=e.state.view,l=new a({url:"https://services9.arcgis.com/8ccGcFm2KpUhl0DB/arcgis/rest/services/edm_network_walkability/FeatureServer",renderer:{type:"unique-value",field:"Rating",defaultSymbol:{type:"simple-fill"},uniqueValueInfos:[{value:5,symbol:{type:"simple-line",width:3,color:"#00A300",style:"solid"}},{value:4,symbol:{type:"simple-line",width:3,color:"#00A392",style:"solid"}},{value:3,symbol:{type:"simple-line",width:3,color:"#FF7A00",style:"solid"}},{value:2,symbol:{type:"simple-line",width:3,color:"#FFDF00",style:"solid"}},{value:1,symbol:{type:"simple-line",width:3,color:"#FF0000",style:"solid"}},{value:"",symbol:{type:"simple-line",width:3,color:"#D2D3D1",style:"solid"}}],highlightOptions:{color:[255,241,58],fillOpacity:.4}}});i.when(function(){var e=new s({view:i,layerInfos:[{layer:l,title:"Sidewalk Ratings"}]});i.ui.add(e,"bottom-left")});e.state.map.add(l),e.state.view.on("click",function(t){var a=i.extent.width/i.width;l.popupEnabled=!1,i.popup.dockEnabled=!0,i.popup.visible=!1,i.popup.dockOptions={buttonEnabled:!1},l.popupTemplate={title:"Street ID: {osm_id}",content:"Average Rating: {Rating}"};var s=new n({center:t.mapPoint,radius:5*a}),o=l.createQuery();o.geometry=s,l.queryFeatures(o).then(function(a){if(0!==a.features.length){var n=a.features,s=parseInt(n[0].attributes.osm_id),l=(parseInt(n[0].attributes.Rating),e.state.sidewalks.find(function(e){return e.id===s}));if(!l)return void console.error("No sidewalk with a matching ID was found");i.goTo({center:[t.mapPoint.longitude,t.mapPoint.latitude],animate:!0,duration:200,easing:"easy-in"}),e.setState({longitude:t.mapPoint.longitude,latitude:t.mapPoint.latitude,sidewalkSelected:!0,selectedSidewalkDetails:l})}})})})}}]),t}(g.a.Store),N=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).store=_,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){f.loadMapDetails()}},{key:"render",value:function(){return s.a.createElement("div",{id:"mapContainer"})}}]),t}(p.Component),D=g.a.createActions(["uploadSidewalkImage","loadUploadedImages","loadSidewalkDetails","uploadComment","dismissImageErrorMessage","dismissImageSuccessMessage","uploadRatings","removeLoadedComment","removeLoadedImage"]),R=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state=e._getDefaultSidewalkState(),e.listenables=D,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"_getDefaultSidewalkState",value:function(){return{loadedUserImages:[],hasNextImagesPage:!0,currentSidewalk:null,uploadingSidewalkImage:!1,uploadedImageError:!1,uploadingComment:!1,uploadCommentFailed:!1,uploadImageSucceeded:!1}}},{key:"onLoadSidewalkDetails",value:function(e){var t=this;this.setState(this._getDefaultSidewalkState()),j.sendGetRequest("sidewalk/".concat(e.id)).then(function(a){var n=Object.assign({},e,a);t.setState({currentSidewalk:n,hasNextImagesPage:n.lastImage,loadedUserImages:[n.lastImage],accessibilityValue:n.accessibility})}).catch(function(e){console.error(e)})}},{key:"onUploadSidewalkImage",value:function(e){var t=this;this.setState({uploadingSidewalkImage:!0,uploadedImageError:!1,uploadImageSucceeded:!1}),j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/image/create"),{image:e}).then(function(){t.setState({uploadingSidewalkImage:!1,uploadImageSucceeded:!0})}).catch(function(e){t.setState({uploadingSidewalkImage:!1,uploadedImageError:!0}),console.error(e)})}},{key:"onLoadUploadedImages",value:function(e,t,a){var n=this;j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/image"),{startIndex:e,endIndex:t}).then(function(e){return n.setState({hasNextImagesPage:e.hasMoreImages,loadedUserImages:n.state.loadedUserImages.slice(0).concat(e.images)}),a()}).catch(function(e){console.error(e)})}},{key:"onUploadComment",value:function(e){var t=this;this.setState({uploadingComment:!0}),j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/comment/create"),{text:e}).then(function(e){var a=t.state.currentSidewalk.comments.slice();a.unshift(e),t.setState({uploadingComment:!1,uploadCommentFailed:!1,commentHint:"Comment Successfully Uploaded!",currentSidewalk:Object.assign(t.state.currentSidewalk,{comments:a})})}).catch(function(e){t.setState({uploadingComment:!1,uploadCommentFailed:!0}),console.error(e)})}},{key:"onDismissImageErrorMessage",value:function(){this.setState({uploadedImageError:!1})}},{key:"onDismissImageSuccessMessage",value:function(){this.setState({uploadImageSucceeded:!1})}},{key:"onUploadRatings",value:function(e,t,a,n,s){var i=this;j.sendPostRequest("sidewalk/".concat(this.state.currentSidewalk.id,"/rate"),{accessibility:parseFloat(e),comfort:parseFloat(t),connectivity:parseFloat(a),senseOfSecurity:parseFloat(s),physicalSafety:parseFloat(n)}).then(function(e){i.setState({accessibility:3,comfort:3,connectivity:3,physicalSafety:3,senseOfSecurity:3})}).catch(function(e){console.error(e)})}},{key:"onRemoveLoadedComment",value:function(e){var t=this.state.currentSidewalk.comments.slice(),a=t.indexOf(e);if(-1!==a){var n=this.state.currentSidewalk.totalComments-1;t.splice(a,1),this.setState({currentSidewalk:Object.assign(this.state.currentSidewalk,{comments:t,totalComments:n})})}}},{key:"onRemoveLoadedImage",value:function(e,t,a){var n=this.state.loadedUserImages.indexOf(e);if(-1!==n){var s=this.state.currentSidewalk.totalImages-1,i=this.state.loadedUserImages.slice(),l={totalImages:s};if(i.splice(n,1),this.state.currentSidewalk.lastImage===e&&(l.lastImage=i[0]||null),this.setState({currentSidewalk:Object.assign(this.state.currentSidewalk,l),loadedUserImages:i}),n===i.length&&n>0&&t(n),0===i.length)return a()}}}]),t}(g.a.Store),x=a(903),P=a(898),L=a(902),M=a(150),A=a.n(M),T=a(51),F=a.n(T),U=["January","February","March","April","May","June","July","August","September","October","November","December"],B=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"formatDateForDisplay",value:function(e){return U[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()+" - "+function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}(e)}}]),e}(),V=g.a.createActions(["deleteComment","dismissCommentSuccessMessage","dismissCommentErrorMessage","checkCredentials","deleteImage","dismissImageSuccessMessage","dismissImageErrorMessage","dismissLoginSuccess","dismissLoginError","getUnapprovedImages","handlePendingImages","dismissImageApprovalNotification","dismissImageRejectionNotification"]),z=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={isLoggedIn:!1,isDeletingComment:!1,successfullyDeletedComment:!1,failedDeleteComment:!1,username:"",password:"",credentialError:!1},e.listenables=V,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onDeleteComment",value:function(e,t,a){var n=this;this.setState({isDeletingComment:!0,successfullyDeletedComment:!1,failedDeleteComment:!1}),j.sendPostRequest("sidewalk/".concat(e,"/comment/delete"),{id:t,username:this.state.username,password:this.state.password}).then(function(){n.setState({isDeletingComment:!1,successfullyDeletedComment:!0}),a(!0)}).catch(function(e){n.setState({isDeletingComment:!1,failedDeleteComment:!0}),a(!1),console.error(e)})}},{key:"onDismissCommentSuccessMessage",value:function(){this.setState({successfullyDeletedComment:!1})}},{key:"onDismissCommentErrorMessage",value:function(){this.setState({failedDeleteComment:!1})}},{key:"onCheckCredentials",value:function(e,t){var a=this;j.sendPostRequest("adminAccount/login",{username:e,password:t}).then(function(n){a.setState({isLoggedIn:!0,successfullyLoggedIn:!0,username:e,password:t})}).catch(function(e){a.setState({isLoggedIn:!1,failedToLogIn:!0}),console.error(e)})}},{key:"onDeleteImage",value:function(e,t,a){var n=this;this.setState({isDeletingImage:!0,successfullyDeletedImage:!1,failedDeleteImage:!1}),j.sendPostRequest("sidewalk/".concat(e,"/image/delete"),{imageId:t,username:this.state.username,password:this.state.password}).then(function(){return n.setState({isDeletingImage:!1,successfullyDeletedImage:!0}),a(!0)}).catch(function(e){return n.setState({isDeletingImage:!1,failedDeleteImage:!0}),console.error(e),a(!1)})}},{key:"onDismissImageSuccessMessage",value:function(){this.setState({successfullyDeletedImage:!1})}},{key:"onDismissImageErrorMessage",value:function(){this.setState({failedDeleteImage:!1})}},{key:"onDismissLoginSuccess",value:function(){this.setState({successfullyLoggedIn:!1})}},{key:"onDismissLoginError",value:function(){this.setState({failedToLogIn:!1})}},{key:"onHandlePendingImages",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2";this.setState({respondingToImage:!0,successfullyRespondedToImage:!1,failedToRespondToImage:!1}),j.sendPostRequest("sidewalk/".concat(n,"/image/respond"),{username:this.state.username,password:this.state.password,accepted:e,imageId:String(t)}).then(function(e){a.setState({respondingToImage:!1,successfullyRespondedToImage:!0})}).catch(function(e){a.setState({respondingToImage:!1,failedToRespondToImage:!0}),console.error(e)})}},{key:"onGetUnapprovedImages",value:function(e,t){var a=this;j.sendPostRequest("sidewalk/unapprovedImages",{username:this.state.username,password:this.state.password,startIndex:e,endIndex:t}).then(function(e){a.setState({hasMoreImages:e.hasMoreImages,pendingImages:e.images})}).catch(function(e){console.error(e)})}},{key:"onDismissImageApprovalNotification",value:function(){this.setState({successfullyRespondedToImage:!1})}},{key:"onDismissImageRejectionNotification",value:function(){this.setState({failedToRespondToImage:!1})}}]),t}(g.a.Store),q=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleDelete=function(){e.props.onDelete(e.props.details)},e.store=z,e.state={},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(A.a,{className:"commentDisplayBox"},this.state.isLoggedIn&&s.a.createElement(F.a,{onClick:this._handleDelete,className:"closeButton"}),s.a.createElement("h5",null,this.props.details.text),s.a.createElement("h6",null,B.formatDateForDisplay(new Date(this.props.details.date))))}}]),t}(g.a.Component),W=a(370),G=a.n(W),H=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(G.a,null)}}]),t}(s.a.Component),K=a(897),Y=a(99),J=a.n(Y),$=a(45),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._cancel=function(){a.props.onCancel()},a._confirm=function(){a.props.onConfirm()},a.state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(J.a,{open:this.props.visible,onClose:this._cancel},s.a.createElement("div",{className:e.paper},s.a.createElement(K.a.Header,null,s.a.createElement(K.a.Title,null,this.props.title)),s.a.createElement("div",{className:"marginUpDown15"},this.props.body),s.a.createElement(K.a.Footer,null,s.a.createElement(L.a,{onClick:this._cancel},"Cancel"),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._confirm,disabled:this.props.disabledConfirm},"Confirm"))))}}]),t}(s.a.Component),X=Object($.withStyles)(function(e){return{paper:{width:"50%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,margin:"auto",position:"relative",top:"50%",transform:"translateY(-50%)"}}})(Q),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._cancel=function(){a.props.onClose()},a._confirm=function(){V.deleteComment(a.props.sidewalkId,a.props.comment.id,function(e){e&&a.props.onClose(!0)})},a.store=z,a.state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"renderModalBody",value:function(){return this.props.visible?s.a.createElement("div",null,s.a.createElement("p",{className:"wrapText"},this.props.comment.text),this.state.isDeletingComment&&s.a.createElement(H,null)):null}},{key:"render",value:function(){return s.a.createElement(X,{title:"Are you sure you want to delete this comment?",body:this.renderModalBody(),onCancel:this._cancel,onConfirm:this._confirm,visible:this.props.visible,disabledConfirm:this.state.isDeletingComment})}}]),t}(g.a.Component),ee=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleChange=function(t){e.setState({enteredComment:t.target.value})},e._handleSubmit=function(t){D.uploadComment(e.state.enteredComment),e.setState({enteredComment:""})},e._openConfirmationModal=function(t){e.setState({modalOpened:!0,selectedComment:t})},e._closeConfirmationModal=function(t){t&&D.removeLoadedComment(e.state.selectedComment),e.setState({modalOpened:!1,selectedComment:null})},e.store=R,e.state={enteredComment:"",modalOpened:!1},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"_validateCommentState",value:function(){var e=new(a(758))({replaceRegex:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im});e.addWords("@","587","780");var t=this.state.enteredComment.length;return e.isProfane(this.state.enteredComment)?"error":0===t?"error":t<=300?"success":"error"}},{key:"render",value:function(){var e=this;if(!this.state.currentSidewalk)return null;var t=this.state.currentSidewalk.comments;return s.a.createElement("div",{className:"comments"},s.a.createElement("div",{className:"commentBox"},s.a.createElement(x.a,{bsSize:"small",controlId:"formBasicText",validationState:this._validateCommentState()},s.a.createElement(P.a,{componentClass:"textarea",value:this.state.enteredComment,placeholder:"Enter a comment",onChange:this._handleChange,rows:4}),s.a.createElement(P.a.Feedback,null))),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._handleSubmit,disabled:"error"===this._validateCommentState()},"Submit"),s.a.createElement("hr",null),s.a.createElement("div",{className:"commentDisplaySection"},t.map(function(t,a){return s.a.createElement(q,{details:t,key:a,onDelete:e._openConfirmationModal})})),s.a.createElement(Z,{comment:this.state.selectedComment,sidewalkId:this.state.currentSidewalk.id,onClose:this._closeConfirmationModal,visible:this.state.modalOpened}))}}]),t}(g.a.Component),te=a(894),ae=function(e){return new Promise(function(t,a){var n=new FileReader;n.onerror=function(e){n.abort(),a(e)},n.onload=function(){t(this.result)},n.readAsDataURL(e)})},ne=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row"},s.a.createElement(P.a,{readOnly:!0,type:"text",placeholder:this.props.fileName||"No file selected"}),s.a.createElement(L.a,{onClick:function(){return e.fileInput.click()},bsStyle:"primary"},s.a.createElement("div",null,s.a.createElement("input",{type:"file",accept:"image/*",onChange:this.props.onSelect,className:"uploadImageInput",ref:function(t){e.fileInput=t}}),s.a.createElement("span",{className:"imageComponentButtonText"},"Choose File"))))}}]),t}(s.a.Component),se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._selectImageToUpload=function(e){var t=e.target.files[0];t&&t.size<=k?(a.setState({loadingSelectedImage:!0,selectedImageSize:null,selectedImage:null,selectedFileName:t.name}),ae(t).then(function(e){a.setState({selectedImage:e,selectedImageSize:t.size,loadingSelectedImage:!1})})):(!a.state.selectedImage||t&&t.size>k)&&a.setState({selectedImageSize:t&&t.size,selectedImage:null,selectedFileName:t&&t.name,loadingSelectedImage:!1})},a._shouldDisplaySizeWarning=function(){return Boolean(a.state.selectedImageSize&&a.state.selectedImageSize>k)},a._canUpload=function(){return Boolean(a.state.selectedImage&&a.state.selectedImageSize<=k)},a._cancel=function(){a.setState({selectedImage:null,selectedImageSize:null,selectedFileName:null,loadingSelectedImage:!1}),a.props.onClose()},a._confirmUpload=function(){a.props.onClose(a.state.selectedImage),a.setState({selectedImage:null,selectedImageSize:null,selectedFileName:null,loadingSelectedImage:!1})},a.state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(J.a,{open:this.props.visible,onClose:this._cancel},s.a.createElement("div",{className:e.paper},s.a.createElement(K.a.Header,null,s.a.createElement(K.a.Title,null,"Upload Image")),s.a.createElement("div",{className:"marginUpDown15"},this._shouldDisplaySizeWarning()&&s.a.createElement(te.a,{bsStyle:"danger"},"That image is too large. The selected image should be no more than ",Math.floor(k/1048576)," megabytes."),s.a.createElement(ne,{onSelect:this._selectImageToUpload,fileName:this.state.selectedFileName}),this.state.selectedImage&&s.a.createElement("div",{className:"selectedImagePreview"},s.a.createElement("img",{className:"img-responsive",alt:"selected",src:this.state.selectedImage})),this.state.loadingSelectedImage&&s.a.createElement(H,null)),s.a.createElement(K.a.Footer,null,s.a.createElement(L.a,{onClick:this._cancel},"Cancel"),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._confirmUpload,disabled:!this._canUpload()},"Upload"))))}}]),t}(s.a.Component),ie=Object($.withStyles)(function(e){return{paper:{width:"50%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,margin:"auto",position:"relative",top:"50%",transform:"translateY(-50%)"}}})(se),le=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(L.a,{bsStyle:"primary",onClick:this.props.onClick},s.a.createElement("span",{className:"glyphicon glyphicon-camera"}),s.a.createElement("span",{className:"uploadSidewalkImageText"},"Upload Image"))}}]),t}(s.a.Component),oe=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return 0===this.props.imageCount?s.a.createElement("h5",null,"Nobody has uploaded images yet for this sidewalk."):s.a.createElement("div",{className:"previewSidewalkImages"},s.a.createElement(L.a,{bsStyle:"primary",onClick:this.props.onClick},"View ",this.props.imageCount," images"))}}]),t}(s.a.Component),re=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._viewImages=function(){e.props.onOpenImages()},e._openImageModal=function(){e.setState({modalOpened:!0})},e._closeImageModal=function(t){e.setState({modalOpened:!1}),t&&D.uploadSidewalkImage(t)},e.store=R,e.state={modalOpened:!1},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.currentSidewalk?s.a.createElement("div",null,s.a.createElement(oe,{imageCount:this.state.currentSidewalk.totalImages,previewImage:this.state.currentSidewalk.lastImage,onClick:this._viewImages}),s.a.createElement(le,{onClick:this._openImageModal}),this.state.uploadingSidewalkImage&&s.a.createElement("div",{className:"marginTop10"},s.a.createElement("span",{className:"marginRight10"},"Uploading..."),s.a.createElement(H,null)),s.a.createElement(ie,{visible:this.state.modalOpened,onClose:this._closeImageModal})):null}}]),t}(g.a.Component),ce=a(374),ue=a.n(ce),me=a(376),de=a.n(me),he=a(127),pe=a.n(he),ge=a(375),fe=a.n(ge),be=a(232),ve=a.n(be),ye=a(75),we=a.n(ye),Ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(we.a,{className:e.root},s.a.createElement(ue.a,null,s.a.createElement(fe.a,null,s.a.createElement(ve.a,null,s.a.createElement(pe.a,{className:e.tableCell},"Activity"),s.a.createElement(pe.a,{className:e.tableCell,numeric:!0},"Percentage"))),s.a.createElement(de.a,null,this.props.activities.map(function(t,a){return s.a.createElement(ve.a,{key:a},s.a.createElement(pe.a,{className:e.tableCell,component:"th",scope:"row"},t.type),s.a.createElement(pe.a,{className:e.tableCell,numeric:!0},100*t.distributionPercent))}))))}}]),t}(s.a.Component),Se=Object($.withStyles)(function(e){return{root:{width:"100%",overflowX:"auto"},tableCell:{fontSize:"14px",fontWeight:e.typography.fontWeightRegular,fontFamily:"Proza Libre"}}})(Ie),Ce=a(153),Ee=a.n(Ce),ke=a(377),Oe=a.n(ke),je=a(149),_e=a.n(je),Ne=a(379),De=a.n(Ne),Re=a(378),xe=a.n(Re),Pe=a(380),Le=a.n(Pe),Me=a(102),Ae=a.n(Me),Te=a(381),Fe=a.n(Te),Ue=a(384),Be=a.n(Ue),Ve=a(383),ze=a.n(Ve),qe=a(382),We=a.n(qe),Ge=(a(67),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._handleClose=function(){a.props.onClose()},a._handleKeyDown=function(e){"Escape"===e.key&&a._handleClose()},a.changeAccessibility=function(e,t){a.setState({accessibilityValue:t})},a.ChangeConnectivity=function(e,t){a.setState({connectivityValue:t})},a.changeComfort=function(e,t){a.setState({comfortValue:t})},a.changeSafety=function(e,t){a.setState({safetyValue:t})},a.changeSecurity=function(e,t){a.setState({securityValue:t})},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a._handleSubmitRating=function(e){D.uploadRatings(a.state.accessibilityValue,a.state.comfortValue,a.state.connectivityValue,a.state.safetyValue,a.state.securityValue),a.setState({accessibilityValue:3,connectivityValue:3,comfortValue:3,safetyValue:3,securityValue:3,open:!1})},a.state={accessibilityValue:3,connectivityValue:3,comfortValue:3,safetyValue:3,securityValue:3,open:!1},a.store=R,a.selfRef=s.a.createRef(),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&this.props.selectedSidewalkDetails&&D.loadSidewalkDetails(this.props.selectedSidewalkDetails)}},{key:"renderExpansionPanel",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.props.classes;return s.a.createElement(Oe.a,{defaultExpanded:a},s.a.createElement(xe.a,{expandIcon:s.a.createElement(De.a,null),"data-sidewalk-header":e},s.a.createElement(_e.a,{className:n.heading},e)),s.a.createElement(Le.a,null,t))}},{key:"renderSummaryDetails",value:function(){var e=null;return e=this.state.currentSidewalk.lastImage?s.a.createElement("div",{className:"drawerImageSection"},s.a.createElement("img",{className:"img-responsive",alt:"sidewalk-preview",src:this.state.currentSidewalk.lastImage.url})):s.a.createElement("h4",null,"There are no uploaded images for this sidewalk."),s.a.createElement("div",null,s.a.createElement("h3",{className:"streetNameSection"},this.state.currentSidewalk.address),s.a.createElement("hr",null),e,s.a.createElement("hr",null),s.a.createElement("h5",null,"The average pedestrian velocity on this sidewalk is ",this.state.currentSidewalk.averageVelocity," metres per second."))}},{key:"renderUploadImageComponent",value:function(){return s.a.createElement(re,{onOpenImages:this.props.onOpenImages})}},{key:"_formatRating",value:function(e){return e&&e.toFixed(2)}},{key:"renderRatings",value:function(){var e=this.props.classes,t=this.state.accessibilityValue,a=this.state.connectivityValue,n=this.state.comfortValue,i=this.state.safetyValue,l=this.state.securityValue;return s.a.createElement("div",null,s.a.createElement(L.a,{bsStyle:"primary",onClick:this.handleClickOpen},"Rate this sidewalk"),s.a.createElement(Fe.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(We.a,{id:"form-dialog-title"},"Rate Sidewalk"),s.a.createElement(ze.a,null,s.a.createElement("h5",null," Accessibility "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:t,min:1,max:5,step:1,onChange:this.changeAccessibility})),t,"/5"),s.a.createElement("h5",null," Connectivity "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:a,min:1,max:5,step:1,onChange:this.ChangeConnectivity})),a,"/5"),s.a.createElement("h5",null," Comfort "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:n,min:1,max:5,step:1,onChange:this.changeComfort})),n,"/5"),s.a.createElement("h5",null," Physical Safety "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:i,min:1,max:5,step:1,onChange:this.changeSafety})),i,"/5"),s.a.createElement("h5",null," Sense of Security "),s.a.createElement("div",{className:"ratingSlider"},s.a.createElement("div",{className:e.root},s.a.createElement(Ae.a,{classes:{container:e.slider},value:l,min:1,max:5,step:1,onChange:this.changeSecurity})),l,"/5")),s.a.createElement(Be.a,null,s.a.createElement(L.a,{onClick:this.handleClose},"Cancel"),s.a.createElement(L.a,{bsStyle:"primary",onClick:this._handleSubmitRating},"Submit"))),s.a.createElement("h4",null,this.state.currentSidewalk.totalRatings," people have rated this sidewalk."),s.a.createElement("hr",null),s.a.createElement("h4",null,"Overall: ",this._formatRating(this.state.currentSidewalk.overallRating)),s.a.createElement("h4",null,"Accessibility: ",this._formatRating(this.state.currentSidewalk.accessibility)),s.a.createElement("h4",null,"Connectivity: ",this._formatRating(this.state.currentSidewalk.connectivity)),s.a.createElement("h4",null,"Comfort: ",this._formatRating(this.state.currentSidewalk.comfort)),s.a.createElement("h4",null,"Physical Safety: ",this._formatRating(this.state.currentSidewalk.physicalSafety)),s.a.createElement("h4",null,"Sense of Security: ",this._formatRating(this.state.currentSidewalk.senseOfSecurity)))}},{key:"renderComments",value:function(){return s.a.createElement(ee,null)}},{key:"renderPedestrianData",value:function(){return 0===this.state.currentSidewalk.mobilityTypeDistribution.length?s.a.createElement("h4",null,"No pedestrian data has been recorded for this sidewalk"):s.a.createElement(Se,{activities:this.state.currentSidewalk.mobilityTypeDistribution})}},{key:"renderDrawerDetails",value:function(){return this.state.currentSidewalk?s.a.createElement("div",{className:"sidewalkDrawer"},this.renderExpansionPanel("Summary",this.renderSummaryDetails(),!0),this.renderExpansionPanel("Images",this.renderUploadImageComponent()),this.renderExpansionPanel("Ratings",this.renderRatings()),this.renderExpansionPanel("Comments",this.renderComments()),this.renderExpansionPanel("Pedestrian Data",this.renderPedestrianData())):null}},{key:"render",value:function(){return s.a.createElement("div",{tabIndex:0,onKeyDown:this._handleKeyDown,ref:this.selfRef,className:"noOutlineDiv"},s.a.createElement(Ee.a,{open:this.props.visible,anchor:"right",variant:"temporary"},s.a.createElement(F.a,{onClick:this._handleClose,className:"closeButton"}),this.renderDrawerDetails()))}}]),t}(p.Component)),He=Object($.withStyles)(function(e){return{root:{width:"90%"},slider:{padding:"22px 0px"},heading:{fontSize:e.typography.pxToRem(30),fontWeight:e.typography.fontWeightRegular,fontFamily:"Proza Libre"}}})(Ge),Ke=a(385),Ye=a.n(Ke),Je=a(386),$e=a.n(Je),Qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).listRef=s.a.createRef(),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(){this.listRef.current.forceUpdateGrid()}},{key:"render",value:function(){var e=this,t=this.props.hasNextPage&&!this.props.isNextPageLoading?this.props.loadedItemCount+1:this.props.loadedItemCount;return s.a.createElement(Ye.a,{isRowLoaded:this.props.isRowLoaded,loadMoreRows:this.props.loadMoreRows,rowCount:t},function(a){var n=a.onRowsRendered;return s.a.createElement($e.a,{ref:e.listRef,height:1e3,onRowsRendered:n,rowCount:t,rowHeight:200,rowRenderer:e.props.rowRenderer,width:250,style:{outline:"none"}})})}}]),t}(s.a.PureComponent),Xe=(a(879),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._onImageClicked=function(e){a.setState({currentImageIndex:e}),void 0!==a.props.getImageIndex&&a.props.getImageIndex(e)},a._isRowLoaded=function(e){var t=e.index;return Boolean(a.props.loadedImages[t])},a._loadMoreRows=function(e){var t=e.startIndex,n=e.stopIndex;t||(n=(t=a.props.loadedImages.length)+1),a.props.loadMoreData(t,n+4)},a._rowRenderer=function(e){var t,n=e.index,i=e.key,l=e.style;return t=a._isRowLoaded({index:n})?s.a.createElement("div",{className:a.state.currentImageIndex===n?"infiniteImageRowSelected":"infiniteImageRowUnselected"},s.a.createElement(A.a,{className:"clickableItem"},a.props.renderAboveImage&&a.props.renderAboveImage(a.state.currentImageIndex===n,a.props.loadedImages[n]),s.a.createElement("img",{onClick:function(){a._onImageClicked(n)},className:"img-responsive fillAvailable",alt:"uploaded",src:a.props.loadedImages[n].url}))):s.a.createElement(H,null),s.a.createElement("div",{className:"infiniteImageListRow",key:i,style:l},t)},a._handleKeyDown=function(e){if(a.props.visible)if("ArrowRight"===e.key||"ArrowDown"===e.key){if(a.state.currentImageIndex===a.props.loadedImages.length-1){if(!a.props.hasNextPage)return;a._loadMoreRows({startIndex:a.state.currentImageIndex+1,stopIndex:a.state.currentImageIndex+1})}a.setState({currentImageIndex:a.state.currentImageIndex+1})}else("ArrowLeft"===e.key||"ArrowUp"===e.key)&&a.state.currentImageIndex>0?a.setState({currentImageIndex:a.state.currentImageIndex-1}):"Escape"===e.key&&a.props.onClose()},a.state={currentImageIndex:0},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"renderSelectedImage",value:function(){var e;return e=this.props.loadedImages[this.state.currentImageIndex]?s.a.createElement("img",{className:"backgroundImage",alt:"selected",src:this.props.loadedImages[this.state.currentImageIndex].url}):s.a.createElement(H,null),s.a.createElement("div",{className:"selectedImageWrapper"},e)}},{key:"displayImageDrawer",value:function(){var e=Object($.withStyles)(this.props.classes)(Ee.a);return s.a.createElement("div",null,s.a.createElement(e,{open:this.props.visible,variant:"persistent",onClose:this.props.onClose,anchor:"left",SlideProps:{unmountOnExit:!0}},this.renderSelectedImage()),s.a.createElement(e,{open:this.props.visible,variant:"persistent",onClose:this.props.onClose,anchor:"right",SlideProps:{unmountOnExit:!0}},s.a.createElement(F.a,{className:"closeButton",onClick:this.props.onClose}),s.a.createElement(Qe,{isRowLoaded:this._isRowLoaded,loadMoreRows:this.props.isNextPageLoading?function(){}:this._loadMoreRows,rowRenderer:this._rowRenderer,hasNextPage:this.props.hasNextPage,loadedItemCount:this.props.loadedImages.length,isNextPageLoading:this.props.isNextPageLoading})))}},{key:"render",value:function(){return s.a.createElement("div",{className:"noOutlineDiv",tabIndex:0,onKeyDown:this._handleKeyDown},this.displayImageDrawer())}}]),t}(s.a.Component)),Ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._cancel=function(){a.props.onClose()},a._confirm=function(){V.deleteImage(a.props.sidewalkId,a.props.image.id,function(e){e&&a.props.onClose(!0)})},a.store=z,a.state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"renderModalBody",value:function(){return this.props.visible?s.a.createElement("div",null,this.state.isDeletingImage&&s.a.createElement(H,null),s.a.createElement("div",{className:"selectedImagePreview"},s.a.createElement("img",{className:"img-responsive",alt:"selected",src:this.props.image.url}))):null}},{key:"render",value:function(){return s.a.createElement(X,{title:"Are you sure you want to delete this image?",body:this.renderModalBody(),onCancel:this._cancel,onConfirm:this._confirm,visible:this.props.visible,disabledConfirm:this.state.isDeletingImage})}}]),t}(g.a.Component),et=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._loadMoreImages=function(e,t){a.setState({isNextPageLoading:!0}),D.loadUploadedImages(e,t,function(){setTimeout(function(){a.setState({isNextPageLoading:!1})},50)})},a._onDeleteImageClicked=function(e){a.setState({modalOpened:!0,selectedImage:e})},a._onModalClosed=function(e){e&&D.removeLoadedImage(a.state.selectedImage,function(e){a.galleryRef.current._onImageClicked(e-1)},function(){a.props.onClose()}),a.setState({modalOpened:!1,selectedImage:null})},a._renderDeleteButton=function(e,t){return e&&a.state.isLoggedIn?s.a.createElement(F.a,{className:"closeButton",onClick:function(){a._onDeleteImageClicked(t)}}):null},a.stores=[R,z],a.state={isNextPageLoading:!1,modalOpened:!1},a.galleryRef=s.a.createRef(),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.currentSidewalk?s.a.createElement("div",null,s.a.createElement(Xe,{classes:{},loadedImages:this.state.loadedUserImages,hasNextPage:this.state.hasNextImagesPage,loadMoreData:this._loadMoreImages,visible:this.props.visible,isNextPageLoading:this.state.isNextPageLoading,onClose:this.props.onClose,renderAboveImage:this._renderDeleteButton,ref:this.galleryRef}),s.a.createElement(Ze,{visible:this.props.visible&&this.state.modalOpened,onClose:this._onModalClosed,sidewalkId:this.state.currentSidewalk.id,image:this.state.selectedImage})):null}}]),t}(g.a.Component),tt=a(388),at=a.n(tt),nt=a(387),st=a.n(nt),it=a(228),lt=a.n(it),ot=a(227),rt=a.n(ot),ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._handleClose=function(){a.props.onClose()},a.state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(st.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.props.visible,autoHideDuration:4e3,onClose:this._handleClose},s.a.createElement(lt.a,{className:this.props.alertContentClassName,"aria-describedby":"client-snackbar",message:s.a.createElement("div",{id:"client-snackbar",className:"alertBody"},this.props.icon,s.a.createElement("span",{className:"alertMessage"},this.props.message)),action:[s.a.createElement(rt.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this._handleClose},s.a.createElement(F.a,null))]}))}}]),t}(s.a.Component),ut=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ct,{onClose:this.props.onClose,visible:this.props.visible,message:this.props.message,alertContentClassName:"errorAlert",icon:s.a.createElement(at.a,{className:"alertIcon"})})}}]),t}(s.a.Component),mt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleClose=function(){D.dismissImageErrorMessage()},e.store=R,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.uploadedImageError,message:"An error occurred while uploading the image."})}}]),t}(g.a.Component),dt=a(154),ht=a.n(dt),pt=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ct,{onClose:this.props.onClose,visible:this.props.visible,message:this.props.message,alertContentClassName:"successAlert",icon:s.a.createElement(ht.a,{className:"alertIcon"})})}}]),t}(s.a.Component),gt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleClose=function(){D.dismissImageSuccessMessage()},e.store=R,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(pt,{onClose:this._handleClose,visible:this.state.uploadImageSucceeded,message:"Your image was uploaded. It must be approved before it is visible."})}}]),t}(g.a.Component),ft=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleClose=function(){V.dismissCommentSuccessMessage()},e.store=z,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(pt,{onClose:this._handleClose,visible:this.state.successfullyDeletedComment,message:"The comment was successfully deleted."})}}]),t}(g.a.Component),bt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleClose=function(){V.dismissCommentErrorMessage()},e.store=z,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.failedDeleteComment,message:"An error occurred while deleting the comment."})}}]),t}(g.a.Component),vt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleClose=function(){V.dismissImageErrorMessage()},e.store=z,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.failedDeleteImage,message:"An error occurred while deleting the image."})}}]),t}(g.a.Component),yt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleClose=function(){V.dismissImageSuccessMessage()},e.store=z,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(pt,{onClose:this._handleClose,visible:this.state.successfullyDeletedImage,message:"The image has been successfully deleted."})}}]),t}(g.a.Component),wt=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(mt,null),s.a.createElement(gt,null),s.a.createElement(ft,null),s.a.createElement(bt,null),s.a.createElement(vt,null),s.a.createElement(yt,null))}}]),t}(s.a.Component),It=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._viewImages=function(){f.setDrawerOpened(!1),a.setState({viewingImages:!0})},a._closeImages=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&f.setDrawerOpened(!0),a.setState({viewingImages:!1})},a._onCloseDrawer=function(){a._closeImages(!1),f.setDrawerOpened(!1)},a.state={viewingImages:!1},a.store=_,a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.state.sidewalks&&0!==this.state.sidewalks.length||f.loadAllSidewalks()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(N,null),s.a.createElement(He,{visible:this.state.sidewalkSelected,onClose:this._onCloseDrawer,selectedSidewalkDetails:this.state.selectedSidewalkDetails,onOpenImages:this._viewImages}),s.a.createElement(et,{onClose:this._closeImages,visible:this.state.viewingImages}),s.a.createElement(wt,null))}}]),t}(p.Component),St=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"renderCategory",value:function(e,t){return s.a.createElement("div",null,s.a.createElement("h3",null,e),s.a.createElement("p",null,t),s.a.createElement("hr",null))}},{key:"render",value:function(){return s.a.createElement("div",{className:"padding25"},this.renderCategory("What is this website about?","This website was made for the purpose of allowing the citizens of Edmonton to discuss \n\t\t\t\t\ttheir experiences on sidewalks across the city with other people. As a user of this site, you are able to select any\n\t\t\t\t\tsidewalk in the city from the map displayed on the home page. By selecting a sidewalk, you will be\n\t\t\t\t\tshown what other people think about that particular sidewalk, through ratings, images, and comments.\n\t\t\t\t\tYou can leave your own ratings and comments on the sidewalk, as well as upload any image that you\n\t\t\t\t\tfeel is relevant to the sidewalk."),this.renderCategory("Who will use the results?","\n\t\t\t\tThe results will primarily be used by two parties. The first one is government officials, so they can see\n\t\t\t\twhat sidewalks in the city are in need of improvement the most. STEPS researchers will also use the data collected\n\t\t\t\tfrom this website so that they can analyze it to get a bigger picture of the overall state of sidewalks\n\t\t\t\tin Edmonton.\n\t\t\t\t"),this.renderCategory("How can I get involved?","\n\t\t\t\tAll you need to do to be involved with the STEPS application is to leave your feelings and thoughts\n\t\t\t\tabout particular sidewalks. You can rate any sidewalk you want, comment on it, or even upload an image to it.\n\t\t\t\t"),this.renderCategory("Privacy Policy","\n\t\t\t\tAll of the data collected on this site will be used purely for research purposes. We will never sell any of the\n\t\t\t\tdata we collect to third parties, and nothing that you upload to the site will be directly linked back to you.\n\t\t\t\tAll of your interactions with the site will be anonymous.\n\t\t\t\t"))}}]),t}(s.a.Component),Ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._dismissNotifications=function(){V.dismissImageApprovalNotification(),V.dismissImageRejectionNotification()},a.loadMoreImages=function(e,t){a.setState({isNextPageLoading:!0}),V.getUnapprovedImages(e,t,function(){setTimeout(function(){a.setState({isNextPageLoading:!1})},50)})},a._onAcceptImage=function(e){V.handlePendingImages(!0,e.id)},a._onRejectImage=function(e){V.handlePendingImages(!1,e.id)},a._renderResponseButtons=function(e,t){return e&&a.state.isLoggedIn?s.a.createElement("div",null,s.a.createElement(F.a,{className:"closeButton",onClick:function(){a._onRejectImage(t)}}),s.a.createElement(ht.a,{className:"acceptButton",onClick:function(){a._onAcceptImage(t)}})):null},a.store=z,a.state={},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){V.getUnapprovedImages(0,5)}},{key:"render",value:function(){if(!this.state.pendingImages)return s.a.createElement("h1",null,"No images uploaded");return s.a.createElement("div",null,s.a.createElement(Xe,{classes:{paper:{margin:"65px 0px 0px 0px"}},loadedImages:this.state.pendingImages,hasNextPage:this.state.hasMoreImages,loadMoreData:this.loadMoreImages,visible:!0,isNextPageLoading:this.state.isNextPageLoading,renderAboveImage:this._renderResponseButtons}),s.a.createElement(pt,{onClose:this._dismissNotifications,visible:this.state.successfullyRespondedToImage,message:"Your response has been recorded."}),s.a.createElement(ut,{onClose:this._dismissNotifications,visible:this.state.failedToRespondToImage,message:"An error occurred while recording your response."}))}}]),t}(g.a.Component),Et=a(895),kt=a(389),Ot=a.n(kt),jt=a(390),_t=a.n(jt),Nt=a(87),Dt=a.n(Nt),Rt={root:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},button:{fontSize:14,"&:hover":{color:"#FFEB3B"},"&:focus":{color:"#FFEB3B"},color:"white"},titleButton:{fontSize:18,"&:hover":{color:"#FFEB3B"},"&:focus":{color:"#FFEB3B"},color:"white",fontFamily:"Proza Libre"}},xt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).store=z,a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(Ot.a,{position:"static"},s.a.createElement(_t.a,null,s.a.createElement(Et.a,{to:"/"},s.a.createElement(Dt.a,{color:"inherit",className:e.titleButton},"STEPS ")," "),s.a.createElement(Et.a,{to:"/about/"},s.a.createElement(Dt.a,{color:"inherit",className:e.button},"  About ")),s.a.createElement(Et.a,{to:"/statistics/"},s.a.createElement(Dt.a,{color:"inherit",className:e.button}," ",s.a.createElement(Et.a,{to:"/statistics/"})," Statistics ")),!this.state.isLoggedIn&&s.a.createElement(Et.a,{to:"/login"},s.a.createElement(Dt.a,{color:"inherit",className:e.button}," Login ")," "),this.state.isLoggedIn&&s.a.createElement(Et.a,{to:"/dashboard"},s.a.createElement(Dt.a,{color:"inherit",className:e.button},"  Dashboard")))))}}]),t}(g.a.Component),Pt=Object($.withStyles)(Rt)(xt),Lt=a(391),Mt=a.n(Lt),At=a(896),Tt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._handleUserChange=function(t){e.setState({enteredName:t.target.value})},e._handlePassChange=function(t){e.setState({enteredPassword:t.target.value})},e._validateCredentials=function(t){var a=e.state.enteredName.length,n=e.state.enteredPassword.length;return 0===a||0===n?"error":"success"},e._handleSubmit=function(t){var a=Mt()(String(e.state.enteredPassword));V.checkCredentials(String(e.state.enteredName),a),e.setState({enteredName:"",enteredPassword:""})},e._handleClose=function(){V.dismissLoginSuccess(),V.dismissLoginError()},e._validCredentialAdminPage=function(t){if(e.state.isLoggedIn)return e.props.history.push("/dashboard")},e.store=z,e._validCredentialAdminPage=e._validCredentialAdminPage.bind(Object(b.a)(Object(b.a)(e))),e.state={enteredName:"",enteredPassword:""},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loginContainer col-lg-4 col-md-6"},s.a.createElement("h3",{className:"adminTitleLogin"},"Admin Login"),s.a.createElement("form",null,s.a.createElement(x.a,{controlId:"username",bsSize:"small"},s.a.createElement(At.a,null,"Username"),s.a.createElement(P.a,{autoFocus:!0,type:"username",value:this.state.enteredName,onChange:this._handleUserChange,placeholder:"Username"})),s.a.createElement(x.a,{controlId:"password",bsSize:"small"},s.a.createElement(At.a,null,"Password"),s.a.createElement(P.a,{value:this.state.enteredPassword,onChange:this._handlePassChange,type:"password",placeholder:"Password"})),this._validCredentialAdminPage(),s.a.createElement(L.a,{bsStyle:"primary",type:"submit",onClick:this._handleSubmit,disabled:"error"===this._validateCredentials()},"Login")),s.a.createElement(pt,{onClose:this._handleClose,visible:this.state.successfullyLoggedIn,message:"Successfully Loggedin."}),s.a.createElement(ut,{onClose:this._handleClose,visible:this.state.failedToLogIn,message:"Invalid Credentials"}))}}]),t}(p.Component),Ft=a(394),Ut=g.a.createActions(["loadSummaryStatistics"]),Bt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={totalSidewalks:0,totalReviews:0,totalComments:0,averageReviews:{},totalImagesUploaded:0,contributionsByMonth:[],isLoading:!1},e.listenables=Ut,e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onLoadSummaryStatistics",value:function(){var e=this;this.setState({isLoading:!0}),j.sendGetRequest("sidewalk/2").then(function(t){t.isLoading=!1,e.setState.apply(e,Object(Ft.a)(t))}).catch(function(t){e.setState({isLoading:!1}),console.error(t)})}}]),t}(g.a.Store),Vt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).store=Bt,e.state={},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){Ut.loadSummaryStatistics()}},{key:"render",value:function(){return this.state.isLoading?null:s.a.createElement("div",{"data-summary-stats":!0},s.a.createElement("p",null,"Summary Statistics"))}}]),t}(g.a.Component),zt=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Pt,null),s.a.createElement(d.a,null,s.a.createElement(h.a,{path:"/about/",component:St}),s.a.createElement(h.a,{path:"/statistics",component:Vt}),s.a.createElement(h.a,{path:"/login",component:Tt}),s.a.createElement(h.a,{path:"/map/:id",component:It}),s.a.createElement(h.a,{path:"/dashboard",component:Ct}),s.a.createElement(h.a,{path:"/",component:It})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qt=a(899),Wt=a(393),Gt=a.n(Wt),Ht=Object($.createMuiTheme)({palette:{primary:Gt.a,secondary:{main:"#FFEB3B"}},typography:{useNextVariants:!0}});l.a.render(s.a.createElement(qt.a,null,s.a.createElement($.MuiThemeProvider,{theme:Ht},s.a.createElement(zt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[395,2,1]]]);
//# sourceMappingURL=main.59f11870.chunk.js.map