{"version":3,"sources":["map/LoadMapActions.js","map/SummaryMapStore.js","constants/ArcGISConstants.js","map/SummaryMapView.jsx","sidewalk/SidewalkActions.js","constants/DatabaseConstants.js","util/RestUtil.js","sidewalk/SidewalkStore.js","util/FileUtilities.js","images/ImageSelectorComponent.jsx","misc-components/LoaderComponent.jsx","images/ImageUploadModal.jsx","sidewalk/UploadSidewalkImageComponent.jsx","sidewalk/PreviewSidewalkImagesComponent.jsx","images/ImageDisplayList.jsx","images/InfiniteImageGallery.jsx","sidewalk/SidewalkImagesView.jsx","sidewalk/SidewalkDetailsView.jsx","map/MapDashboard.jsx","misc-components/AboutPageView.jsx","admin/AdminActions.js","admin/AdminStore.js","misc-components/NavbarComponent.jsx","constants/ThemeConstants.js","App.js","serviceWorker.js","index.js"],"names":["Actions","Reflux","createActions","SummaryMapStore","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","listenables","_ref2","slicedToArray","_ref","Map","MapView","map","basemap","view","container","center","zoom","setState","Store","esriURL","url","SummaryMapView","store","loadOSMBaseMap","esriLoader","loadModules","then","displayOSMBaseMap","catch","err","console","error","react_default","a","createElement","id","Component","MAX_UPLOAD_SIZE","makeRequestURL","endpoint","concat","RestUtil","body","optionOverrides","arguments","length","undefined","options","assign","uri","headers","Content-Type","json","method","rp","post","query","qs","get","SidewalkStore","loadedUserImages","hasNextImagesPage","currentSidewalk","uploadingSidewalkImage","uploadedImageError","base64Image","_this2","sendPostRequest","image","startIndex","stopIndex","updateStateCallback","_this3","endIndex","res","hasMoreImages","slice","images","getFile","file","Promise","resolve","reject","reader","FileReader","onerror","abort","onload","result","readAsDataURL","ImageSelectorComponent","className","FormControl","readOnly","type","placeholder","props","fileName","Button","onClick","fileInput","click","bsStyle","accept","onChange","onSelect","ref","React","LoaderComponent","CircularProgress_default","ImageUploadModal","_selectImageToUpload","event","target","files","size","loadingSelectedImage","selectedImageSize","selectedImage","selectedFileName","name","_shouldDisplaySizeWarning","Boolean","_canUpload","_cancel","onClose","_confirmUpload","split","Modal","show","visible","onHide","Header","Title","Body","Alert","Math","floor","ImageSelectorComponent_ImageSelectorComponent","alt","src","LoaderComponent_LoaderComponent","Footer","disabled","UploadSidewalkImageComponent","PreviewSidewalkImagesComponent","previewImage","ImageDisplayList","listRef","createRef","current","forceUpdateGrid","loadedCount","hasNextPage","loadedItemCount","InfiniteLoader_default","isRowLoaded","loadMoreRows","rowCount","onRowsRendered","List_default","height","rowHeight","rowRenderer","width","PureComponent","InfiniteImageGallery","_onResize","forceUpdate","_onImageClicked","index","currentImageIndex","_isRowLoaded","loadedImages","_loadMoreRows","loadMoreData","_rowRenderer","_ref3","content","key","style","_handleKeyDown","selfRef","window","addEventListener","prevProps","focus","removeEventListener","innerWidth","tabIndex","onKeyDown","Drawer_default","open","variant","anchor","renderSelectedImage","Close_default","ImageDisplayList_ImageDisplayList","isNextPageLoading","SidewalkImagesView","_loadMoreImages","SidewalkActions","loadUploadedImages","InfiniteImageGallery_InfiniteImageGallery","SidewalkDetailsView","_openImageModal","modalOpened","_closeImageModal","uploadedFile","uploadSidewalkImage","_viewImages","viewingImages","_closeImages","UploadSidewalkImageComponent_UploadSidewalkImageComponent","PreviewSidewalkImagesComponent_PreviewSidewalkImagesComponent","ImageUploadModal_ImageUploadModal","SidewalkImagesView_SidewalkImagesView","MapDashboard","sidewalkOpened","SummaryMapView_SummaryMapView","SidewalkDetailsView_SidewalkDetailsView","AboutPageView","title","renderCategory","AdminStore","isLoggedIn","styles","root","flexGrow","menuButton","marginLeft","marginRight","button","fontSize","&:hover","color","&:focus","titleButton","fontFamily","NavbarComponent","classes","AppBar_default","position","Toolbar_default","Button_default","href","withStyles","App","misc_components_NavbarComponent","Switch","Route","path","component","location","hostname","match","theme","createMuiTheme","palette","primary","purple","secondary","main","ReactDOM","render","BrowserRouter","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6dfdda49.chunk.js","sourcesContent":["import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"displayOSMBaseMap\"\r\n]);\r\n\r\nexport default Actions;","import Reflux from \"reflux\";\r\nimport Actions from \"./LoadMapActions\";\r\n\r\nexport default class SummaryMapStore extends Reflux.Store {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {};\r\n\t\tthis.listenables = Actions;\r\n\t}\r\n\r\n    onDisplayOSMBaseMap([Map, MapView]) {\r\n\t\tconst map = new Map({\r\n\t\t\tbasemap: \"osm\"\r\n\t\t});\r\n\r\n\t\tconst view = new MapView({\r\n\t\t\tmap: map,\r\n\t\t\tcontainer: \"mapContainer\",\r\n\t\t\tbasemap: 'osm',\r\n\t\t\tcenter: [-113.4990, 53.5405],\r\n\t\t\tzoom: 15\r\n        });\r\n        \r\n        this.setState({\r\n\t\t\tmap,\r\n\t\t\tview });\r\n\t}\r\n}\r\n","export const esriURL = {\r\n    url: \"https://js.arcgis.com/4.9\"\r\n}","import React from \"react\";\r\nimport { Component } from 'reflux';\r\nimport Actions from \"./LoadMapActions\";\r\nimport Store from \"./SummaryMapStore\";\r\nimport esriLoader from \"esri-loader\";\r\nimport {esriURL} from \"../constants/ArcGISConstants\";\r\n\r\nexport default class SummaryMapView extends Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {}\r\n\t\tthis.store = Store;\r\n  }\r\n\r\n  \tcomponentDidMount() {\r\n\t\tthis.loadOSMBaseMap();\r\n\t  }\r\n\r\n\tloadOSMBaseMap() {\r\n\t\tesriLoader.loadModules(['esri/Map', 'esri/views/MapView'], esriURL).then((Actions.displayOSMBaseMap))\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"mapContainer\"/>\r\n\t\t);\r\n\t}\r\n}","import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"uploadSidewalkImage\",\r\n\t\"loadUploadedImages\",\r\n\t\"loadSidewalkDetails\"\r\n]);\r\n\r\nexport default Actions;","export const DATABASE_BASE_URL = \"http://199.116.235.159:8000\",\r\n\tMAX_UPLOAD_SIZE = 6291456;\r\n","import rp from \"request-promise\";\r\nimport {DATABASE_BASE_URL} from \"../constants/DatabaseConstants\";\r\n\r\n/**\r\n * Gets the URL to send an HTTP request to\r\n * @param {String} endpoint - the endpoint to send the request to on the server (everything after the /api/ part of the URI)\r\n * @return the URL to send an HTTP request to\r\n */\r\nconst makeRequestURL = (endpoint) => {\r\n\treturn `${DATABASE_BASE_URL}/api/${endpoint}/`;\r\n};\r\n\r\nexport default class RestUtil {\r\n\r\n\t/**\r\n\t * Sends an HTTP POST request to the specified endpoint\r\n\t * @param {String} endpoint - the endpoint in the database to send the request to\r\n\t * @param {Object} body - the payload to send as part of the request\r\n\t * @param {Object?} optionOverrides - an object that defines overrides to the options sent with the request\r\n\t * @return {Promise} - a promise that resolves when the request is complete with the response as it's parameter\r\n\t */\r\n\tstatic sendPostRequest(endpoint, body, optionOverrides = {}) {\r\n\t\tconst options = Object.assign({\r\n\t\t\turi: makeRequestURL(endpoint),\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tjson: true,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: body\r\n\t\t}, optionOverrides);\r\n\t\treturn rp.post(options);\r\n\t}\r\n\r\n\t/**\r\n\t * Sends an HTTP GET request to the specified endpoint\r\n\t * @param {String} endpoint - the endpoint in the database to send the request to\r\n\t * @param {Object?} query - an optional parameter defining any query strings include in the request URL\r\n\t * @param {Object?} optionOverrides - an object that defines overrides to the options sent with the request\r\n\t * @return {Promise} - a promise that resolves when the request is complete with the response as it's parameter\r\n\t */\r\n\tstatic sendGetRequest(endpoint, query = {}, optionOverrides = {}) {\r\n\t\tconst options = Object.assign({\r\n\t\t\turi: makeRequestURL(endpoint),\r\n\t\t\tjson: true,\r\n\t\t\tqs: query\r\n\t\t}, optionOverrides);\r\n\t\treturn rp.get(options);\r\n\t}\r\n}","import Reflux from \"reflux\";\r\n\r\nimport Actions from \"./SidewalkActions\";\r\nimport RestUtil from \"../util/RestUtil\";\r\n\r\n/**\r\n * This store keeps track of the state of components that deal with sidewalks\r\n */\r\nexport default class SidewalkStore extends Reflux.Store {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\tloadedUserImages: [],\r\n\t\t\thasNextImagesPage: true,\r\n\t\t\tcurrentSidewalk: null,\r\n\t\t\tuploadingSidewalkImage: false,\r\n\t\t\tuploadedImageError: false\r\n\t\t};\r\n        this.listenables = Actions;\r\n    }\r\n\r\n\t/**\r\n\t * Loads the specified sidewalk\r\n\t * @param {String} id - the id of the sidewalk\r\n\t */\r\n\tonLoadSidewalkDetails(id) {\r\n\t\t// TODO: load actual sidewalk details\r\n\t\tthis.setState({\r\n\t\t\tcurrentSidewalk: id\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Handles the user selecting an image to upload to a sidewalk\r\n\t * @param {String} base64Image - the image as a base64 string\r\n\t */\r\n\tonUploadSidewalkImage(base64Image) {\r\n\t\tthis.setState({\r\n\t\t\tuploadingSidewalkImage: true,\r\n\t\t\tuploadedImageError: false\r\n\t\t});\r\n\t\t\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${this.state.currentSidewalk}/image/create`, {\r\n\t\t\timage: base64Image\r\n\t\t}).then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuploadingSidewalkImage: false,\r\n\t\t\t\tuploadedImageError: false\r\n\t\t\t});\r\n\t\t}).catch((err) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuploadingSidewalkImage: false,\r\n\t\t\t\tuploadedImageError: true\r\n\t\t\t});\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads user uploaded images from the database\r\n\t * @param {number} startIndex - the amount of images to skip before starting to return them\r\n\t * @param {number} startIndex - the index of the last item to load\r\n\t * @param {function} updateStateCallback - a callback function that will be invoked when the images are loaded\r\n\t */\r\n\tonLoadUploadedImages(startIndex, stopIndex, updateStateCallback) {\r\n\t\tRestUtil.sendPostRequest(`sidewalk/${this.state.currentSidewalk}/image`, {\r\n\t\t\tstartIndex: startIndex,\r\n\t\t\tendIndex: stopIndex\r\n\t\t}).then((res) => {\r\n\t\t\t// TODO: potentially fetch data for each new loaded image and assign to data attribute\r\n\t\t\tthis.setState({\r\n\t\t\t\thasNextImagesPage: res.hasMoreImages,\r\n\t\t\t\tloadedUserImages: this.state.loadedUserImages.slice(0).concat(res.images)\r\n\t\t\t});\r\n\t\t\tupdateStateCallback();\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}\r\n}","export const\r\n\t/**\r\n\t * Converts bytes into megabytes\r\n\t * @param {number} bytes - the amount in bytes to convert\r\n\t * @return {number} - the input bytes value represented in megabytes form\r\n\t */\r\n\tbytesToMB = (bytes) => {\r\n\t\treturn bytes / 1048576;\r\n\t},\r\n\t/**\r\n\t * Gets a base64 encoded string of a file that a user has selected to upload\r\n\t * @param {Object} file - the file that the user has selected\r\n\t * @return {Promise} - a promise that resolves with the base64 string\r\n\t */\r\n\tgetFile = (file) => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.onerror = (err) => {\r\n\t\t\t\treader.abort();\r\n\t\t\t\treject(err);\r\n\t\t\t};\r\n\t\t\treader.onload = function() {\r\n\t\t\t\tresolve(this.result);\r\n\t\t\t};\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t});\r\n\t};","import React from \"react\";\r\nimport {Button, FormControl} from \"react-bootstrap\";\r\n\r\n/**\r\n * This component allows the user to select an image to upload, and it displays the name of the current\r\n * selected image.\r\n */\r\nexport default class ImageSelectorComponent extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<FormControl\r\n\t\t\t\t   readOnly\r\n\t\t\t\t   type=\"text\"\r\n\t\t\t\t   placeholder={this.props.fileName || \"No file selected\"}\r\n\t\t\t\t />\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={() => this.fileInput.click()}\r\n\t\t\t\t\tbsStyle=\"primary\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tonChange={this.props.onSelect}\r\n\t\t\t\t\t\t\tclassName=\"uploadImageInput\"\r\n\t\t\t\t\t\t\tref={(fileInput) => {this.fileInput = fileInput;}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span className=\"imageComponentButtonText\">\r\n\t\t\t\t\t\t\tChoose File\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React from \"react\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\n/**\r\n * This component represents the loading spinner that is displayed when an asynchronous action is performed\r\n */\r\nexport default class LoaderComponent extends React.Component {\r\n\t\r\n\trender() {\r\n\t\treturn <CircularProgress />;\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport {Modal, Button, Alert} from \"react-bootstrap\";\r\n\r\nimport {getFile, bytesToMB} from \"../util/FileUtilities\";\r\nimport ImageSelectorComponent from \"./ImageSelectorComponent\";\r\nimport LoaderComponent from \"../misc-components/LoaderComponent\";\r\nimport {MAX_UPLOAD_SIZE} from \"../constants/DatabaseConstants\";\r\n\r\n/**\r\n * This component renders a modal that allows the user to select an image from their local files,\r\n * and then upload that image to the database. The user's selected image will be previewed in this modal.\r\n */\r\nexport default class ImageUploadModal extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the user making a selection in the file selection dialog\r\n\t * @param {Object} event - the event representing the file selection interaction\r\n\t */\r\n\t_selectImageToUpload = (event) => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tif (file && file.size <= MAX_UPLOAD_SIZE) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tloadingSelectedImage: true,\r\n\t\t\t\tselectedImageSize: null,\r\n\t\t\t\tselectedImage: null,\r\n\t\t\t\tselectedFileName: file.name\r\n\t\t\t});\r\n\t\t\tgetFile(file).then((res) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedImage: res,\r\n\t\t\t\t\tselectedImageSize: file.size,\r\n\t\t\t\t\tloadingSelectedImage: false\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else if (!this.state.selectedImage || (file && file.size > MAX_UPLOAD_SIZE)) {\r\n\t\t\t// don't overwrite any existing selected image\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedImageSize: file && file.size,\r\n\t\t\t\tselectedImage: null,\r\n\t\t\t\tselectedFileName: file && file.name,\r\n\t\t\t\tloadingSelectedImage: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Gets whether the large image size warnings should be rendered or not\r\n\t * @return {boolean} - whether the large image size warnings should be rendered or not\r\n\t */\r\n\t_shouldDisplaySizeWarning = () => {\r\n\t\treturn Boolean(this.state.selectedImageSize && this.state.selectedImageSize > MAX_UPLOAD_SIZE);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets whether the upload image should be active or not\r\n\t * @return {boolean} - whether the upload image should be active or not\r\n\t */\r\n\t_canUpload = () => {\r\n\t\treturn Boolean(this.state.selectedImage && this.state.selectedImageSize <= MAX_UPLOAD_SIZE);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user closing the modal without uploading the image\r\n\t */\r\n\t_cancel = () => {\r\n\t\tthis.setState({\r\n\t\t\tselectedImage: null,\r\n\t\t\tselectedImageSize: null,\r\n\t\t\tselectedFileName: null,\r\n\t\t\tloadingSelectedImage: false\r\n\t\t});\r\n\t\tthis.props.onClose();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles the user selecting the upload button\r\n\t */\r\n\t_confirmUpload = () => {\r\n\t\tthis.props.onClose(this.state.selectedImage.split(\";base64,\")[1]);\r\n\t\tthis.setState({\r\n\t\t\tselectedImage: null,\r\n\t\t\tselectedImageSize: null,\r\n\t\t\tselectedFileName: null,\r\n\t\t\tloadingSelectedImage: false\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t  <Modal\r\n\t\t\t\tshow={this.props.visible}\r\n\t\t\t\tonHide={this._cancel}\r\n\t\t\t>\r\n\t\t\t<Modal.Header>\r\n\t\t\t  <Modal.Title>Upload Image</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._shouldDisplaySizeWarning() && (\r\n\t\t\t\t\t\t<Alert bsStyle=\"danger\">\r\n\t\t\t\t\t\t\tThat image is too large. The selected image should be no more than {Math.floor(bytesToMB(MAX_UPLOAD_SIZE))} megabytes.\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t<ImageSelectorComponent onSelect={this._selectImageToUpload} fileName={this.state.selectedFileName} />\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.selectedImage && (\r\n\t\t\t\t\t\t<div className=\"selectedImagePreview\">\r\n\t\t\t\t\t\t\t<img className=\"img-responsive\" alt=\"selected\" src={this.state.selectedImage} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.loadingSelectedImage && <LoaderComponent />\r\n\t\t\t\t}\r\n\t\t\t</Modal.Body>\r\n\r\n\t\t\t<Modal.Footer>\r\n\t\t\t  <Button onClick={this._cancel}>Cancel</Button>\r\n\t\t\t  <Button bsStyle=\"primary\" onClick={this._confirmUpload} disabled={!this._canUpload()}>Upload</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t  </Modal>\r\n\t\t);\r\n\t}\r\n\r\n}","import React from \"react\";\r\nimport {Button} from \"react-bootstrap\";\r\n\r\n/**\r\n * This component represents the \"Upload Image\" button that is visible on a Sidewalk's details\r\n */\r\nexport default class UploadSidewalkImageComponent extends React.Component {\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Button bsStyle=\"primary\" onClick={this.props.onClick}>\r\n\t\t\t\t<span className=\"glyphicon glyphicon-camera\" />\r\n\t\t\t\t<span className=\"uploadSidewalkImageText\">\r\n\t\t\t\t\tUpload Image\r\n\t\t\t\t</span>\r\n\t\t\t</Button>\r\n\t\t);\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\n\r\n/**\r\n * This component represents the view where the user can select to see all images uploaded to a sidewalk\r\n */\r\nexport default class PreviewSidewalkImagesComponent extends React.Component {\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"col-md-12\" onClick={this.props.onClick}>\r\n\t\t\t\t<div className=\"pull-left\">\r\n\t\t\t\t\t<img src={this.props.previewImage} alt=\"preview\" />\r\n\t\t\t\t</div>\r\n\t\t\t   <div className=\"pull-left\">View Images</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport InfiniteLoader from \"react-virtualized/dist/commonjs/InfiniteLoader\";\r\nimport List from \"react-virtualized/dist/commonjs/List\";\r\n\r\nexport default class ImageDisplayList extends React.PureComponent {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.listRef = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentWillReceiveProps(){\r\n\t\tthis.listRef.current.forceUpdateGrid();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst loadedCount = this.props.hasNextPage ? this.props.loadedItemCount + 1 : this.props.loadedItemCount;\r\n\t\treturn (\r\n\t\t\t<InfiniteLoader\r\n\t\t\t  isRowLoaded={this.props.isRowLoaded}\r\n\t\t\t  loadMoreRows={this.props.loadMoreRows}\r\n\t\t\t  rowCount={loadedCount}>\r\n\t\t\t  {({onRowsRendered}) => (\r\n\t\t\t\t\t<List\r\n\t\t\t\t\t  ref={this.listRef}\r\n\t\t\t\t\t  height={1000}\r\n\t\t\t\t\t  onRowsRendered={onRowsRendered}\r\n\t\t\t\t\t  rowCount={loadedCount}\r\n\t\t\t\t\t  rowHeight={160}\r\n\t\t\t\t\t  rowRenderer={this.props.rowRenderer}\r\n\t\t\t\t\t  width={250}\r\n\t\t\t\t\t/>\r\n\t\t\t  )}\r\n\t\t\t</InfiniteLoader>\r\n\t\t);\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport LoaderComponent from \"../misc-components/LoaderComponent\";\r\nimport ImageDisplayList from \"./ImageDisplayList\";\r\nimport MasonryInfiniteScroller from \"react-masonry-infinite\";\r\n\r\n// TODO: potentially use .data instead of .url for loaded images (depends on which is faster but there is also memory tradeoff)\r\n\r\n/**\r\n * This component handles the view where the user can see all of the images posted to a sidewalk\r\n */\r\nexport default class InfiniteImageGallery extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentImageIndex: 0\r\n\t\t};\r\n\r\n\t\tthis.selfRef = React.createRef();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Handles the window being resized\r\n\t */\r\n\t_onResize = () => {\r\n\t\tif (this.props.visible) {\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t};\r\n\t\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener(\"resize\", this._onResize);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (prevProps.visible !== this.props.visible && this.props.visible) {\r\n\t\t\tthis.selfRef.current.focus();\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener(\"resize\", this._onResize);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Handles an image being clicked\r\n\t * @param {number} index - the index of the image that was just clicked\r\n\t */\r\n\t_onImageClicked = (index) => {\r\n\t\tthis.setState({\r\n\t\t\tcurrentImageIndex: index\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets whether the specified item is loaded\r\n\t * @param {number} index - the index of the item in the list of all loaded items\r\n\t * @return {boolean} - whether the specified item is loaded\r\n\t */\r\n\t_isRowLoaded = ({index}) => {\r\n\t\treturn Boolean(this.props.loadedImages[index]);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Loads more items\r\n\t * @param {number} startIndex - the starting index of new items to load\r\n\t * @param {number} stopIndex - the ending index of new items to load\r\n\t */\r\n\t_loadMoreRows = ({startIndex, stopIndex}) => {\r\n\t\t// TODO: remove this if statement if using drawer\r\n\t\tif (!startIndex) {\r\n\t\t\tstartIndex = this.props.loadedImages.length;\r\n\t\t\tstopIndex = startIndex + 1;\r\n\t\t}\r\n\t\tthis.props.loadMoreData(startIndex, stopIndex);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Renders the specified item\r\n\t * @param {number} index - the index of the item in the list of loaded items\r\n\t * @param {*} key - the unique key of this item\r\n\t * @param {Object} style - the object's div style to render\r\n\t * @return {JSX} - the item to render\r\n\t */\r\n\t_rowRenderer = ({index, key, style}) => {\r\n\t\tlet content;\r\n\t\tif (this._isRowLoaded({index})) {\r\n\t\t\tcontent = (\r\n\t\t\t\t<div onClick={() => {this._onImageClicked(index)}} className={this.state.currentImageIndex === index ? \"infiniteImageRowSelected\" : \"infiniteImageRowUnselected\"}>\r\n\t\t\t\t\t<img className=\"img-responsive\" alt=\"uploaded\"\r\n\t\t\t\t\t\twidth={140}\r\n\t\t\t\t\t\tsrc={this.props.loadedImages[index].url} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tcontent = <LoaderComponent />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"infiniteImageListRow\" key={key} style={style}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Handles a key being pressed\r\n\t * @param {Object} event - the event representing the key press\r\n\t */\r\n\t_handleKeyDown = (event) => {\r\n\t\tif (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n\t\t\t// TODO: do some testing here\r\n\t\t\tif (this.state.currentImageIndex === this.props.loadedImages.length - 1) {\r\n\t\t\t\tthis._loadMoreRows({\r\n\t\t\t\t\tstartIndex: this.state.currentImageIndex + 1,\r\n\t\t\t\t\tendIndex: this.state.currentImageIndex + 1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentImageIndex: this.state.currentImageIndex + 1\r\n\t\t\t});\r\n\t\t} else if ((event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") && this.state.currentImageIndex > 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentImageIndex: this.state.currentImageIndex - 1\r\n\t\t\t});\r\n\t\t} else if (event.key === \"Escape\") {\r\n\t\t\tthis.props.onClose();\r\n\t\t}\r\n\t};\r\n\t\r\n\trenderSelectedImage() {\r\n\t\t/*if (this.props.loadedImages[this.state.currentImageIndex]) {\r\n\t\t\treturn (\r\n\t\t\t\t<img className=\"backgroundImage\"\r\n\t\t\t\t\talt=\"selected\"\r\n\t\t\t\t\tsrc={this.props.loadedImages[this.state.currentImageIndex].url} />\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn <LoaderComponent />;*/\r\n\t\t\r\n\t\tlet content;\r\n\t\tif (this.props.loadedImages[this.state.currentImageIndex]) {\r\n\t\t\tcontent = (\r\n\t\t\t\t<img className=\"backgroundImage\"\r\n\t\t\t\t\talt=\"selected\"\r\n\t\t\t\t\tsrc={this.props.loadedImages[this.state.currentImageIndex].url} />\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tcontent = <LoaderComponent />;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t// TODO: find a way to do this without inline styling. width = 100vw - 250px gives some weird problem\r\n\t\t\t// where this container is open if the window is maximized\r\n\t\t\t<div style={{width: window.innerWidth - 250}} className=\"selectedImageWrapper\">\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div tabIndex={0} onKeyDown={this._handleKeyDown} ref={this.selfRef} className=\"noOutlineDiv\" >\r\n\t\t\t\t<Drawer open={this.props.visible}\r\n\t\t\t\t\t\tvariant=\"persistent\"\r\n\t\t\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\t\t\tanchor=\"left\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t{this.renderSelectedImage()}\r\n\t\t\t\t</Drawer>\r\n\t\t\t\t<Drawer open={this.props.visible}\r\n\t\t\t\t\t\tvariant=\"persistent\"\r\n\t\t\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\t\t\tanchor=\"right\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<CloseIcon className=\"closeImageListButton\" onClick={this.props.onClose} />\r\n\t\t\t\t\t<ImageDisplayList isRowLoaded={this._isRowLoaded}\r\n\t\t\t\t\t\tloadMoreRows={this.props.isNextPageLoading ? () => {} : this._loadMoreRows}\r\n\t\t\t\t\t\trowRenderer={this._rowRenderer}\r\n\t\t\t\t\t\thasNextPage={this.props.hasNextPage}\r\n\t\t\t\t\t\tloadedItemCount={this.props.loadedImages.length}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Drawer>\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t// TODO: set rendered image width to 200 for this\r\n\t\t/*return (\r\n\t\t\t<div tabIndex={0} onKeyDown={this._handleKeyDown} ref={this.selfRef} className=\"noOutlineDiv\" >\r\n\t\t\t\t{this.renderSelectedImage()}\r\n\t\t\t\t<MasonryInfiniteScroller\r\n\t\t\t\t\thasMore={this.props.hasNextPage}\r\n\t\t\t\t\tloadMore={this.props.isNextPageLoading ? () => {} : this._loadMoreRows}\r\n\t\t\t\t\tsizes={[{ columns: 3, gutter: 0 },\r\n\t\t\t\t\t{ mq: '768px', columns: 4, gutter: 0 },\r\n\t\t\t\t\t{ mq: '1024px', columns: 5, gutter: 0 }]}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.loadedImages.map((id, index) =>\r\n\t\t\t\t\t\t\tthis._rowRenderer({index: index, key: index, style: {height: 200, width: 200}})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</MasonryInfiniteScroller>\r\n\t\t\t\t{this.props.isNextPageLoading && <LoaderComponent />}\r\n\t\t\t</div>\r\n\t\t);*/\r\n\t}\r\n\t\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\n\r\nimport InfiniteImageGallery from \"../images/InfiniteImageGallery\";\r\nimport SidewalkStore from \"./SidewalkStore\";\r\nimport SidewalkActions from \"./SidewalkActions\";\r\n\r\n/**\r\n * This component handles the view where the user can see all of the images posted to a sidewalk\r\n */\r\nexport default class SidewalkImagesView extends Reflux.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = SidewalkStore;\r\n\t\tthis.state = {\r\n\t\t\tisNextPageLoading: false\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Loads more images to display\r\n\t * @param {number} startIndex - the starting index of new items to load\r\n\t * @param {number} stopIndex - the ending index of new items to load\r\n\t */\r\n\t_loadMoreImages = (startIndex, stopIndex) => {\r\n\t\tthis.setState({\r\n\t\t\tisNextPageLoading: true\r\n\t\t});\r\n\t\tSidewalkActions.loadUploadedImages(startIndex, stopIndex, () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisNextPageLoading: false\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn <InfiniteImageGallery loadedImages={this.state.loadedUserImages}\r\n\t\t\t\t\thasNextPage={this.state.hasNextImagesPage}\r\n\t\t\t\t\tloadMoreData={this._loadMoreImages}\r\n\t\t\t\t\tvisible={this.props.visible}\r\n\t\t\t\t\tisNextPageLoading={this.state.isNextPageLoading}\r\n\t\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\t/>;\r\n\t}\r\n}","import React from \"react\";\r\nimport { Component } from \"reflux\";\r\nimport { Alert } from \"react-bootstrap\";\r\n\r\nimport Store from \"./SidewalkStore\";\r\nimport Actions from \"./SidewalkActions\";\r\n\r\nimport ImageUploadModal from \"../images/ImageUploadModal\";\r\nimport UploadSidewalkImageComponent from \"./UploadSidewalkImageComponent\";\r\nimport PreviewSidewalkImagesComponent from \"./PreviewSidewalkImagesComponent\";\r\nimport SidewalkImagesView from \"./SidewalkImagesView\";\r\nimport LoaderComponent from \"../misc-components/LoaderComponent\";\r\n\r\n/**\r\n * This component handles rendering details about a selected sidewalk\r\n */\r\nexport default class SidewalkDetailsView extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmodalOpened: false,\r\n\t\t\tviewingImages: false\r\n\t\t};\r\n\t\tthis.store = Store;\r\n\t}\r\n\r\n\t/**\r\n\t * Opens the modal allowing the user to upload images\r\n\t */\r\n\t_openImageModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: true\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Closes the image upload modal\r\n\t * @param {String?} - the base64 encoded string representing the image the user uploaded if valid, or undefined otherwise\r\n\t */\r\n\t_closeImageModal = (uploadedFile) => {\r\n\t\tthis.setState({\r\n\t\t\tmodalOpened: false\r\n\t\t});\r\n\t\tif (uploadedFile) {\r\n\t\t\tActions.uploadSidewalkImage(uploadedFile);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Opens up the uploaded images view\r\n\t */\r\n\t_viewImages = () => {\r\n\t\tthis.setState({\r\n\t\t\tviewingImages: true\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Closes the uploaded images view\r\n\t */\r\n\t_closeImages = () => {\r\n\t\tthis.setState({\r\n\t\t\tviewingImages: false\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<UploadSidewalkImageComponent onClick={this._openImageModal} />\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.uploadedImageError && (\r\n\t\t\t\t\t\t<Alert bsStyle=\"danger\">\r\n\t\t\t\t\t\t\tAn error occurred while uploading the image.\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.uploadingSidewalkImage && (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>Uploading</span>\r\n\t\t\t\t\t\t\t<LoaderComponent />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t<PreviewSidewalkImagesComponent previewImage=\"\" onClick={this._viewImages} />\r\n\t\t\t\t<ImageUploadModal visible={this.state.modalOpened} onClose={this._closeImageModal} />\r\n\t\t\t\t<SidewalkImagesView onClose={this._closeImages} visible={this.state.viewingImages} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React from \"react\";\r\nimport { Component } from 'reflux';\r\nimport SummaryMapView from \"./SummaryMapView\";\r\nimport SidewalkDetails from \"../sidewalk/SidewalkDetailsView\";\r\n\r\nexport default class MapDashboard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t// TODO: change to using the store instead\r\n\t\tthis.state = {\r\n\t\t\tsidewalkOpened: true\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<SummaryMapView />\r\n\t\t\t\t{this.state.sidewalkOpened && <SidewalkDetails />}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React from \"react\";\r\n\r\n/**\r\n * This component renders the page that details what the site is about\r\n */\r\nexport default class AboutPageView extends React.Component {\r\n\r\n\t/**\r\n\t * Renders a topic in the about page\r\n\t * @param {String} title - the title of the topic\r\n\t * @param {String} content - the content describing the topic\r\n\t */\r\n\trenderCategory(title, content) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h3>{title}</h3>\r\n\t\t\t\t<p>{content}</p>\r\n\t\t\t\t<hr />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"padding25\">\r\n\t\t\t\t{this.renderCategory(\"What is this website about?\", \r\n\t\t\t\t\t`This website was made for the purpose of allowing the citizens of Edmonton to discuss \r\n\t\t\t\t\ttheir experiences on sidewalks across the city with other people. As a user of this site, you are able to select any\r\n\t\t\t\t\tsidewalk in the city from the map displayed on the home page. By selecting a sidewalk, you will be\r\n\t\t\t\t\tshown what other people think about that particular sidewalk, through ratings, images, and comments.\r\n\t\t\t\t\tYou can leave your own ratings and comments on the sidewalk, as well as upload any image that you\r\n\t\t\t\t\tfeel is relevant to the sidewalk.`)}\r\n\t\t\t\t{this.renderCategory(\"Who will use the results?\", `\r\n\t\t\t\tThe results will primarily be used by two parties. The first one is government officials, so they can see\r\n\t\t\t\twhat sidewalks in the city are in need of improvement the most. STEPS researchers will also use the data collected\r\n\t\t\t\tfrom this website so that they can analyze it to get a bigger picture of the overall state of sidewalks\r\n\t\t\t\tin Edmonton.\r\n\t\t\t\t`)}\r\n\t\t\t\t{this.renderCategory(\"How can I get involved?\", `\r\n\t\t\t\tAll you need to do to be involved with the STEPS application is to leave your feelings and thoughts\r\n\t\t\t\tabout particular sidewalks. You can rate any sidewalk you want, comment on it, or even upload an image to it.\r\n\t\t\t\t`)}\r\n\t\t\t\t{this.renderCategory(\"Privacy Policy\", `\r\n\t\t\t\tAll of the data collected on this site will be used purely for research purposes. We will never sell any of the\r\n\t\t\t\tdata we collect to third parties, and nothing that you upload to the site will be directly linked back to you.\r\n\t\t\t\tAll of your interactions with the site will be anonymous.\r\n\t\t\t\t`)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import Reflux from \"reflux\";\r\n\r\nconst Actions = Reflux.createActions([\r\n\t\"placeholderAction\"\r\n]);\r\n\r\nexport default Actions;","import Reflux from \"reflux\";\r\n\r\nimport Actions from \"./AdminActions\";\r\nimport RestUtil from \"../util/RestUtil\";\r\n\r\n/**\r\n * This store keeps track of the state of components that deal with administrator actions\r\n */\r\nexport default class AdminStore extends Reflux.Store {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\tisLoggedIn: false\r\n\t\t};\r\n        this.listenables = Actions;\r\n    }\r\n\r\n}","import React from \"react\";\r\nimport Reflux from \"reflux\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {SECONDARY_COLOUR, FONT_FAMILY} from \"../constants/ThemeConstants\";\r\n\r\nimport AdminStore from \"../admin/AdminStore\";\r\n\r\nconst styles = {\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginLeft: -12,\r\n\t\tmarginRight: 20,\r\n\t},\r\n\tbutton: {\r\n\t\tfontSize: 14,\r\n\t\t\"&:hover\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\t\"&:focus\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t}\r\n\t},\r\n\ttitleButton: {\r\n\t\tfontSize: 18,\r\n\t\t\"&:hover\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\t\"&:focus\": {\r\n\t\t\tcolor: SECONDARY_COLOUR\r\n\t\t},\r\n\t\tfontFamily: FONT_FAMILY\r\n\t}\r\n};\r\n\r\n/**\r\n * This component renders the global navigation bar at the top of the page\r\n */\r\nclass NavbarComponent extends Reflux.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = AdminStore;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<AppBar position=\"static\">\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Button color=\"inherit\" className={classes.titleButton} href=\"/\">STEPS</Button>\r\n\t\t\t\t\t\t<Button color=\"inherit\" className={classes.button} href=\"/about\">About</Button>\r\n\t\t\t\t\t\t<Button color=\"inherit\" className={classes.button} href=\"/statistics\">Statistics</Button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!this.state.isLoggedIn && <Button color=\"inherit\" className={classes.button} href=\"/login\">Login</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.isLoggedIn && <Button color=\"inherit\" className={classes.button} href=\"/dashboard\">Dashboard</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(NavbarComponent);","export const SECONDARY_COLOUR = \"#FFEB3B\",\r\n\tFONT_FAMILY = \"Proza Libre\";","import React, { Component } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport './style/App.scss';\r\n\r\nimport MapDashboard from \"./map/MapDashboard\";\r\nimport AboutPageView from \"./misc-components/AboutPageView\";\r\nimport NavbarComponent from \"./misc-components/NavbarComponent\";\r\n\r\nclass App extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <NavbarComponent />\r\n\t\t<Switch>\r\n\t\t\t<Route path=\"/about/\" component={AboutPageView} />\r\n\t\t\t<Route path=\"/statistics\" component={MapDashboard} />\r\n\t\t\t<Route path=\"/login\" component={MapDashboard} />\r\n\t\t\t<Route path=\"/map/:id\" component={MapDashboard} />\r\n            <Route path=\"/dashboard\" component={MapDashboard} />\r\n\t\t\t<Route path=\"/\" component={MapDashboard} />\r\n\t\t</Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./style/index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport purple from \"@material-ui/core/colors/purple\";\r\nimport {SECONDARY_COLOUR} from \"./constants/ThemeConstants\";\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: purple,\r\n\t\tsecondary: {\r\n\t\t\tmain: SECONDARY_COLOUR,\r\n\t\t}\r\n\t}\r\n});\r\n\r\nReactDOM.render(\r\n\t<BrowserRouter>\r\n\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t<App />\r\n\t\t</MuiThemeProvider>\r\n\t</BrowserRouter>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}